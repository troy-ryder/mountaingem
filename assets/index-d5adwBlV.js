var $g=Object.defineProperty;var Mg=(t,e,n)=>e in t?$g(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var un=(t,e,n)=>(Mg(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Oe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _o(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Kh={exports:{}},wo={},Wh={exports:{}},W={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ys=Symbol.for("react.element"),Ug=Symbol.for("react.portal"),Zg=Symbol.for("react.fragment"),zg=Symbol.for("react.strict_mode"),Fg=Symbol.for("react.profiler"),Bg=Symbol.for("react.provider"),Vg=Symbol.for("react.context"),Hg=Symbol.for("react.forward_ref"),Kg=Symbol.for("react.suspense"),Wg=Symbol.for("react.memo"),qg=Symbol.for("react.lazy"),Fd=Symbol.iterator;function Qg(t){return t===null||typeof t!="object"?null:(t=Fd&&t[Fd]||t["@@iterator"],typeof t=="function"?t:null)}var qh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qh=Object.assign,Gh={};function Fr(t,e,n){this.props=t,this.context=e,this.refs=Gh,this.updater=n||qh}Fr.prototype.isReactComponent={};Fr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Fr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Jh(){}Jh.prototype=Fr.prototype;function oc(t,e,n){this.props=t,this.context=e,this.refs=Gh,this.updater=n||qh}var lc=oc.prototype=new Jh;lc.constructor=oc;Qh(lc,Fr.prototype);lc.isPureReactComponent=!0;var Bd=Array.isArray,Xh=Object.prototype.hasOwnProperty,uc={current:null},Yh={key:!0,ref:!0,__self:!0,__source:!0};function ep(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)Xh.call(e,r)&&!Yh.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:ys,type:t,key:s,ref:a,props:i,_owner:uc.current}}function Gg(t,e){return{$$typeof:ys,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function cc(t){return typeof t=="object"&&t!==null&&t.$$typeof===ys}function Jg(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Vd=/\/+/g;function ll(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Jg(""+t.key):e.toString(36)}function Ys(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case ys:case Ug:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+ll(a,0):r,Bd(i)?(n="",t!=null&&(n=t.replace(Vd,"$&/")+"/"),Ys(i,e,n,"",function(c){return c})):i!=null&&(cc(i)&&(i=Gg(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Vd,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",Bd(t))for(var o=0;o<t.length;o++){s=t[o];var l=r+ll(s,o);a+=Ys(s,e,n,l,i)}else if(l=Qg(t),typeof l=="function")for(t=l.call(t),o=0;!(s=t.next()).done;)s=s.value,l=r+ll(s,o++),a+=Ys(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Os(t,e,n){if(t==null)return t;var r=[],i=0;return Ys(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Xg(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ze={current:null},ea={transition:null},Yg={ReactCurrentDispatcher:Ze,ReactCurrentBatchConfig:ea,ReactCurrentOwner:uc};W.Children={map:Os,forEach:function(t,e,n){Os(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Os(t,function(){e++}),e},toArray:function(t){return Os(t,function(e){return e})||[]},only:function(t){if(!cc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};W.Component=Fr;W.Fragment=Zg;W.Profiler=Fg;W.PureComponent=oc;W.StrictMode=zg;W.Suspense=Kg;W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yg;W.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Qh({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=uc.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)Xh.call(e,l)&&!Yh.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:ys,type:t.type,key:i,ref:s,props:r,_owner:a}};W.createContext=function(t){return t={$$typeof:Vg,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Bg,_context:t},t.Consumer=t};W.createElement=ep;W.createFactory=function(t){var e=ep.bind(null,t);return e.type=t,e};W.createRef=function(){return{current:null}};W.forwardRef=function(t){return{$$typeof:Hg,render:t}};W.isValidElement=cc;W.lazy=function(t){return{$$typeof:qg,_payload:{_status:-1,_result:t},_init:Xg}};W.memo=function(t,e){return{$$typeof:Wg,type:t,compare:e===void 0?null:e}};W.startTransition=function(t){var e=ea.transition;ea.transition={};try{t()}finally{ea.transition=e}};W.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};W.useCallback=function(t,e){return Ze.current.useCallback(t,e)};W.useContext=function(t){return Ze.current.useContext(t)};W.useDebugValue=function(){};W.useDeferredValue=function(t){return Ze.current.useDeferredValue(t)};W.useEffect=function(t,e){return Ze.current.useEffect(t,e)};W.useId=function(){return Ze.current.useId()};W.useImperativeHandle=function(t,e,n){return Ze.current.useImperativeHandle(t,e,n)};W.useInsertionEffect=function(t,e){return Ze.current.useInsertionEffect(t,e)};W.useLayoutEffect=function(t,e){return Ze.current.useLayoutEffect(t,e)};W.useMemo=function(t,e){return Ze.current.useMemo(t,e)};W.useReducer=function(t,e,n){return Ze.current.useReducer(t,e,n)};W.useRef=function(t){return Ze.current.useRef(t)};W.useState=function(t){return Ze.current.useState(t)};W.useSyncExternalStore=function(t,e,n){return Ze.current.useSyncExternalStore(t,e,n)};W.useTransition=function(){return Ze.current.useTransition()};W.version="18.2.0";Wh.exports=W;var ke=Wh.exports;const ev=_o(ke);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tv=ke,nv=Symbol.for("react.element"),rv=Symbol.for("react.fragment"),iv=Object.prototype.hasOwnProperty,sv=tv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,av={key:!0,ref:!0,__self:!0,__source:!0};function tp(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)iv.call(e,r)&&!av.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:nv,type:t,key:s,ref:a,props:i,_owner:sv.current}}wo.Fragment=rv;wo.jsx=tp;wo.jsxs=tp;Kh.exports=wo;var Z=Kh.exports,Gl={},np={exports:{}},it={},rp={exports:{}},ip={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,O){var R=N.length;N.push(O);e:for(;0<R;){var M=R-1>>>1,J=N[M];if(0<i(J,O))N[M]=O,N[R]=J,R=M;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var O=N[0],R=N.pop();if(R!==O){N[0]=R;e:for(var M=0,J=N.length,Fe=J>>>1;M<Fe;){var Xe=2*(M+1)-1,Bt=N[Xe],me=Xe+1,Rt=N[me];if(0>i(Bt,R))me<J&&0>i(Rt,Bt)?(N[M]=Rt,N[me]=R,M=me):(N[M]=Bt,N[Xe]=R,M=Xe);else if(me<J&&0>i(Rt,R))N[M]=Rt,N[me]=R,M=me;else break e}}return O}function i(N,O){var R=N.sortIndex-O.sortIndex;return R!==0?R:N.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],d=1,p=null,h=3,y=!1,b=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(N){for(var O=n(c);O!==null;){if(O.callback===null)r(c);else if(O.startTime<=N)r(c),O.sortIndex=O.expirationTime,e(l,O);else break;O=n(c)}}function P(N){if(S=!1,E(N),!b)if(n(l)!==null)b=!0,De(x);else{var O=n(c);O!==null&&At(P,O.startTime-N)}}function x(N,O){b=!1,S&&(S=!1,v(L),L=-1),y=!0;var R=h;try{for(E(O),p=n(l);p!==null&&(!(p.expirationTime>O)||N&&!pe());){var M=p.callback;if(typeof M=="function"){p.callback=null,h=p.priorityLevel;var J=M(p.expirationTime<=O);O=t.unstable_now(),typeof J=="function"?p.callback=J:p===n(l)&&r(l),E(O)}else r(l);p=n(l)}if(p!==null)var Fe=!0;else{var Xe=n(c);Xe!==null&&At(P,Xe.startTime-O),Fe=!1}return Fe}finally{p=null,h=R,y=!1}}var j=!1,D=null,L=-1,H=5,F=-1;function pe(){return!(t.unstable_now()-F<H)}function Ge(){if(D!==null){var N=t.unstable_now();F=N;var O=!0;try{O=D(!0,N)}finally{O?Je():(j=!1,D=null)}}else j=!1}var Je;if(typeof g=="function")Je=function(){g(Ge)};else if(typeof MessageChannel<"u"){var at=new MessageChannel,gt=at.port2;at.port1.onmessage=Ge,Je=function(){gt.postMessage(null)}}else Je=function(){C(Ge,0)};function De(N){D=N,j||(j=!0,Je())}function At(N,O){L=C(function(){N(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){b||y||(b=!0,De(x))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(N){switch(h){case 1:case 2:case 3:var O=3;break;default:O=h}var R=h;h=O;try{return N()}finally{h=R}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,O){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var R=h;h=N;try{return O()}finally{h=R}},t.unstable_scheduleCallback=function(N,O,R){var M=t.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?M+R:M):R=M,N){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=R+J,N={id:d++,callback:O,priorityLevel:N,startTime:R,expirationTime:J,sortIndex:-1},R>M?(N.sortIndex=R,e(c,N),n(l)===null&&N===n(c)&&(S?(v(L),L=-1):S=!0,At(P,R-M))):(N.sortIndex=J,e(l,N),b||y||(b=!0,De(x))),N},t.unstable_shouldYield=pe,t.unstable_wrapCallback=function(N){var O=h;return function(){var R=h;h=O;try{return N.apply(this,arguments)}finally{h=R}}}})(ip);rp.exports=ip;var ov=rp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sp=ke,rt=ov;function A(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ap=new Set,Bi={};function rr(t,e){Nr(t,e),Nr(t+"Capture",e)}function Nr(t,e){for(Bi[t]=e,t=0;t<e.length;t++)ap.add(e[t])}var en=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jl=Object.prototype.hasOwnProperty,lv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hd={},Kd={};function uv(t){return Jl.call(Kd,t)?!0:Jl.call(Hd,t)?!1:lv.test(t)?Kd[t]=!0:(Hd[t]=!0,!1)}function cv(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function dv(t,e,n,r){if(e===null||typeof e>"u"||cv(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ze(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Ce={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ce[t]=new ze(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ce[e]=new ze(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ce[t]=new ze(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ce[t]=new ze(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ce[t]=new ze(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ce[t]=new ze(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ce[t]=new ze(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ce[t]=new ze(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ce[t]=new ze(t,5,!1,t.toLowerCase(),null,!1,!1)});var dc=/[\-:]([a-z])/g;function fc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(dc,fc);Ce[e]=new ze(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(dc,fc);Ce[e]=new ze(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(dc,fc);Ce[e]=new ze(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ce[t]=new ze(t,1,!1,t.toLowerCase(),null,!1,!1)});Ce.xlinkHref=new ze("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ce[t]=new ze(t,1,!1,t.toLowerCase(),null,!0,!0)});function hc(t,e,n,r){var i=Ce.hasOwnProperty(e)?Ce[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(dv(e,n,i,r)&&(n=null),r||i===null?uv(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var an=sp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,As=Symbol.for("react.element"),dr=Symbol.for("react.portal"),fr=Symbol.for("react.fragment"),pc=Symbol.for("react.strict_mode"),Xl=Symbol.for("react.profiler"),op=Symbol.for("react.provider"),lp=Symbol.for("react.context"),mc=Symbol.for("react.forward_ref"),Yl=Symbol.for("react.suspense"),eu=Symbol.for("react.suspense_list"),yc=Symbol.for("react.memo"),pn=Symbol.for("react.lazy"),up=Symbol.for("react.offscreen"),Wd=Symbol.iterator;function Xr(t){return t===null||typeof t!="object"?null:(t=Wd&&t[Wd]||t["@@iterator"],typeof t=="function"?t:null)}var ae=Object.assign,ul;function ki(t){if(ul===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ul=e&&e[1]||""}return`
`+ul+t}var cl=!1;function dl(t,e){if(!t||cl)return"";cl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{cl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ki(t):""}function fv(t){switch(t.tag){case 5:return ki(t.type);case 16:return ki("Lazy");case 13:return ki("Suspense");case 19:return ki("SuspenseList");case 0:case 2:case 15:return t=dl(t.type,!1),t;case 11:return t=dl(t.type.render,!1),t;case 1:return t=dl(t.type,!0),t;default:return""}}function tu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fr:return"Fragment";case dr:return"Portal";case Xl:return"Profiler";case pc:return"StrictMode";case Yl:return"Suspense";case eu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case lp:return(t.displayName||"Context")+".Consumer";case op:return(t._context.displayName||"Context")+".Provider";case mc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yc:return e=t.displayName||null,e!==null?e:tu(t.type)||"Memo";case pn:e=t._payload,t=t._init;try{return tu(t(e))}catch{}}return null}function hv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tu(e);case 8:return e===pc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function In(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pv(t){var e=cp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Rs(t){t._valueTracker||(t._valueTracker=pv(t))}function dp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=cp(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function va(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function nu(t,e){var n=e.checked;return ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function qd(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=In(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function fp(t,e){e=e.checked,e!=null&&hc(t,"checked",e,!1)}function ru(t,e){fp(t,e);var n=In(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?iu(t,e.type,n):e.hasOwnProperty("defaultValue")&&iu(t,e.type,In(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Qd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function iu(t,e,n){(e!=="number"||va(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Si=Array.isArray;function Cr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+In(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function su(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(A(91));return ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Gd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(A(92));if(Si(n)){if(1<n.length)throw Error(A(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:In(n)}}function hp(t,e){var n=In(e.value),r=In(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Jd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function pp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function au(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?pp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ns,mp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ns=Ns||document.createElement("div"),Ns.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ns.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Vi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ai={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mv=["Webkit","ms","Moz","O"];Object.keys(Ai).forEach(function(t){mv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ai[e]=Ai[t]})});function yp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ai.hasOwnProperty(t)&&Ai[t]?(""+e).trim():e+"px"}function gp(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=yp(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var yv=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ou(t,e){if(e){if(yv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(A(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(A(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(A(61))}if(e.style!=null&&typeof e.style!="object")throw Error(A(62))}}function lu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uu=null;function gc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var cu=null,Pr=null,Tr=null;function Xd(t){if(t=_s(t)){if(typeof cu!="function")throw Error(A(280));var e=t.stateNode;e&&(e=Co(e),cu(t.stateNode,t.type,e))}}function vp(t){Pr?Tr?Tr.push(t):Tr=[t]:Pr=t}function _p(){if(Pr){var t=Pr,e=Tr;if(Tr=Pr=null,Xd(t),e)for(t=0;t<e.length;t++)Xd(e[t])}}function wp(t,e){return t(e)}function bp(){}var fl=!1;function Ep(t,e,n){if(fl)return t(e,n);fl=!0;try{return wp(t,e,n)}finally{fl=!1,(Pr!==null||Tr!==null)&&(bp(),_p())}}function Hi(t,e){var n=t.stateNode;if(n===null)return null;var r=Co(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(A(231,e,typeof n));return n}var du=!1;if(en)try{var Yr={};Object.defineProperty(Yr,"passive",{get:function(){du=!0}}),window.addEventListener("test",Yr,Yr),window.removeEventListener("test",Yr,Yr)}catch{du=!1}function gv(t,e,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Ri=!1,_a=null,wa=!1,fu=null,vv={onError:function(t){Ri=!0,_a=t}};function _v(t,e,n,r,i,s,a,o,l){Ri=!1,_a=null,gv.apply(vv,arguments)}function wv(t,e,n,r,i,s,a,o,l){if(_v.apply(this,arguments),Ri){if(Ri){var c=_a;Ri=!1,_a=null}else throw Error(A(198));wa||(wa=!0,fu=c)}}function ir(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function kp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Yd(t){if(ir(t)!==t)throw Error(A(188))}function bv(t){var e=t.alternate;if(!e){if(e=ir(t),e===null)throw Error(A(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Yd(i),t;if(s===r)return Yd(i),e;s=s.sibling}throw Error(A(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(A(189))}}if(n.alternate!==r)throw Error(A(190))}if(n.tag!==3)throw Error(A(188));return n.stateNode.current===n?t:e}function Sp(t){return t=bv(t),t!==null?Cp(t):null}function Cp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Cp(t);if(e!==null)return e;t=t.sibling}return null}var Pp=rt.unstable_scheduleCallback,ef=rt.unstable_cancelCallback,Ev=rt.unstable_shouldYield,kv=rt.unstable_requestPaint,ue=rt.unstable_now,Sv=rt.unstable_getCurrentPriorityLevel,vc=rt.unstable_ImmediatePriority,Tp=rt.unstable_UserBlockingPriority,ba=rt.unstable_NormalPriority,Cv=rt.unstable_LowPriority,xp=rt.unstable_IdlePriority,bo=null,Mt=null;function Pv(t){if(Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(bo,t,void 0,(t.current.flags&128)===128)}catch{}}var Tt=Math.clz32?Math.clz32:Iv,Tv=Math.log,xv=Math.LN2;function Iv(t){return t>>>=0,t===0?32:31-(Tv(t)/xv|0)|0}var js=64,Ds=4194304;function Ci(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ea(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=Ci(o):(s&=a,s!==0&&(r=Ci(s)))}else a=n&~i,a!==0?r=Ci(a):s!==0&&(r=Ci(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Tt(e),i=1<<n,r|=t[n],e&=~i;return r}function Ov(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Av(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Tt(s),o=1<<a,l=i[a];l===-1?(!(o&n)||o&r)&&(i[a]=Ov(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}function hu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ip(){var t=js;return js<<=1,!(js&4194240)&&(js=64),t}function hl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function gs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Tt(e),t[e]=n}function Rv(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Tt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function _c(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Tt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var X=0;function Op(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ap,wc,Rp,Np,jp,pu=!1,Ls=[],bn=null,En=null,kn=null,Ki=new Map,Wi=new Map,yn=[],Nv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tf(t,e){switch(t){case"focusin":case"focusout":bn=null;break;case"dragenter":case"dragleave":En=null;break;case"mouseover":case"mouseout":kn=null;break;case"pointerover":case"pointerout":Ki.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wi.delete(e.pointerId)}}function ei(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=_s(e),e!==null&&wc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function jv(t,e,n,r,i){switch(e){case"focusin":return bn=ei(bn,t,e,n,r,i),!0;case"dragenter":return En=ei(En,t,e,n,r,i),!0;case"mouseover":return kn=ei(kn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ki.set(s,ei(Ki.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Wi.set(s,ei(Wi.get(s)||null,t,e,n,r,i)),!0}return!1}function Dp(t){var e=Bn(t.target);if(e!==null){var n=ir(e);if(n!==null){if(e=n.tag,e===13){if(e=kp(n),e!==null){t.blockedOn=e,jp(t.priority,function(){Rp(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ta(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=mu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);uu=r,n.target.dispatchEvent(r),uu=null}else return e=_s(n),e!==null&&wc(e),t.blockedOn=n,!1;e.shift()}return!0}function nf(t,e,n){ta(t)&&n.delete(e)}function Dv(){pu=!1,bn!==null&&ta(bn)&&(bn=null),En!==null&&ta(En)&&(En=null),kn!==null&&ta(kn)&&(kn=null),Ki.forEach(nf),Wi.forEach(nf)}function ti(t,e){t.blockedOn===e&&(t.blockedOn=null,pu||(pu=!0,rt.unstable_scheduleCallback(rt.unstable_NormalPriority,Dv)))}function qi(t){function e(i){return ti(i,t)}if(0<Ls.length){ti(Ls[0],t);for(var n=1;n<Ls.length;n++){var r=Ls[n];r.blockedOn===t&&(r.blockedOn=null)}}for(bn!==null&&ti(bn,t),En!==null&&ti(En,t),kn!==null&&ti(kn,t),Ki.forEach(e),Wi.forEach(e),n=0;n<yn.length;n++)r=yn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<yn.length&&(n=yn[0],n.blockedOn===null);)Dp(n),n.blockedOn===null&&yn.shift()}var xr=an.ReactCurrentBatchConfig,ka=!0;function Lv(t,e,n,r){var i=X,s=xr.transition;xr.transition=null;try{X=1,bc(t,e,n,r)}finally{X=i,xr.transition=s}}function $v(t,e,n,r){var i=X,s=xr.transition;xr.transition=null;try{X=4,bc(t,e,n,r)}finally{X=i,xr.transition=s}}function bc(t,e,n,r){if(ka){var i=mu(t,e,n,r);if(i===null)kl(t,e,r,Sa,n),tf(t,r);else if(jv(i,t,e,n,r))r.stopPropagation();else if(tf(t,r),e&4&&-1<Nv.indexOf(t)){for(;i!==null;){var s=_s(i);if(s!==null&&Ap(s),s=mu(t,e,n,r),s===null&&kl(t,e,r,Sa,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else kl(t,e,r,null,n)}}var Sa=null;function mu(t,e,n,r){if(Sa=null,t=gc(r),t=Bn(t),t!==null)if(e=ir(t),e===null)t=null;else if(n=e.tag,n===13){if(t=kp(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Sa=t,null}function Lp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sv()){case vc:return 1;case Tp:return 4;case ba:case Cv:return 16;case xp:return 536870912;default:return 16}default:return 16}}var vn=null,Ec=null,na=null;function $p(){if(na)return na;var t,e=Ec,n=e.length,r,i="value"in vn?vn.value:vn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return na=i.slice(t,1<r?1-r:void 0)}function ra(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function $s(){return!0}function rf(){return!1}function st(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$s:rf,this.isPropagationStopped=rf,this}return ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$s)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$s)},persist:function(){},isPersistent:$s}),e}var Br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kc=st(Br),vs=ae({},Br,{view:0,detail:0}),Mv=st(vs),pl,ml,ni,Eo=ae({},vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ni&&(ni&&t.type==="mousemove"?(pl=t.screenX-ni.screenX,ml=t.screenY-ni.screenY):ml=pl=0,ni=t),pl)},movementY:function(t){return"movementY"in t?t.movementY:ml}}),sf=st(Eo),Uv=ae({},Eo,{dataTransfer:0}),Zv=st(Uv),zv=ae({},vs,{relatedTarget:0}),yl=st(zv),Fv=ae({},Br,{animationName:0,elapsedTime:0,pseudoElement:0}),Bv=st(Fv),Vv=ae({},Br,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Hv=st(Vv),Kv=ae({},Br,{data:0}),af=st(Kv),Wv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gv(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Qv[t])?!!e[t]:!1}function Sc(){return Gv}var Jv=ae({},vs,{key:function(t){if(t.key){var e=Wv[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ra(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sc,charCode:function(t){return t.type==="keypress"?ra(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ra(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Xv=st(Jv),Yv=ae({},Eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),of=st(Yv),e_=ae({},vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sc}),t_=st(e_),n_=ae({},Br,{propertyName:0,elapsedTime:0,pseudoElement:0}),r_=st(n_),i_=ae({},Eo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),s_=st(i_),a_=[9,13,27,32],Cc=en&&"CompositionEvent"in window,Ni=null;en&&"documentMode"in document&&(Ni=document.documentMode);var o_=en&&"TextEvent"in window&&!Ni,Mp=en&&(!Cc||Ni&&8<Ni&&11>=Ni),lf=" ",uf=!1;function Up(t,e){switch(t){case"keyup":return a_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hr=!1;function l_(t,e){switch(t){case"compositionend":return Zp(e);case"keypress":return e.which!==32?null:(uf=!0,lf);case"textInput":return t=e.data,t===lf&&uf?null:t;default:return null}}function u_(t,e){if(hr)return t==="compositionend"||!Cc&&Up(t,e)?(t=$p(),na=Ec=vn=null,hr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Mp&&e.locale!=="ko"?null:e.data;default:return null}}var c_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!c_[t.type]:e==="textarea"}function zp(t,e,n,r){vp(r),e=Ca(e,"onChange"),0<e.length&&(n=new kc("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ji=null,Qi=null;function d_(t){Xp(t,0)}function ko(t){var e=yr(t);if(dp(e))return t}function f_(t,e){if(t==="change")return e}var Fp=!1;if(en){var gl;if(en){var vl="oninput"in document;if(!vl){var df=document.createElement("div");df.setAttribute("oninput","return;"),vl=typeof df.oninput=="function"}gl=vl}else gl=!1;Fp=gl&&(!document.documentMode||9<document.documentMode)}function ff(){ji&&(ji.detachEvent("onpropertychange",Bp),Qi=ji=null)}function Bp(t){if(t.propertyName==="value"&&ko(Qi)){var e=[];zp(e,Qi,t,gc(t)),Ep(d_,e)}}function h_(t,e,n){t==="focusin"?(ff(),ji=e,Qi=n,ji.attachEvent("onpropertychange",Bp)):t==="focusout"&&ff()}function p_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ko(Qi)}function m_(t,e){if(t==="click")return ko(e)}function y_(t,e){if(t==="input"||t==="change")return ko(e)}function g_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var It=typeof Object.is=="function"?Object.is:g_;function Gi(t,e){if(It(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Jl.call(e,i)||!It(t[i],e[i]))return!1}return!0}function hf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pf(t,e){var n=hf(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hf(n)}}function Vp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Vp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Hp(){for(var t=window,e=va();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=va(t.document)}return e}function Pc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function v_(t){var e=Hp(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Vp(n.ownerDocument.documentElement,n)){if(r!==null&&Pc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=pf(n,s);var a=pf(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var __=en&&"documentMode"in document&&11>=document.documentMode,pr=null,yu=null,Di=null,gu=!1;function mf(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gu||pr==null||pr!==va(r)||(r=pr,"selectionStart"in r&&Pc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Di&&Gi(Di,r)||(Di=r,r=Ca(yu,"onSelect"),0<r.length&&(e=new kc("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=pr)))}function Ms(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var mr={animationend:Ms("Animation","AnimationEnd"),animationiteration:Ms("Animation","AnimationIteration"),animationstart:Ms("Animation","AnimationStart"),transitionend:Ms("Transition","TransitionEnd")},_l={},Kp={};en&&(Kp=document.createElement("div").style,"AnimationEvent"in window||(delete mr.animationend.animation,delete mr.animationiteration.animation,delete mr.animationstart.animation),"TransitionEvent"in window||delete mr.transitionend.transition);function So(t){if(_l[t])return _l[t];if(!mr[t])return t;var e=mr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Kp)return _l[t]=e[n];return t}var Wp=So("animationend"),qp=So("animationiteration"),Qp=So("animationstart"),Gp=So("transitionend"),Jp=new Map,yf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rn(t,e){Jp.set(t,e),rr(e,[t])}for(var wl=0;wl<yf.length;wl++){var bl=yf[wl],w_=bl.toLowerCase(),b_=bl[0].toUpperCase()+bl.slice(1);Rn(w_,"on"+b_)}Rn(Wp,"onAnimationEnd");Rn(qp,"onAnimationIteration");Rn(Qp,"onAnimationStart");Rn("dblclick","onDoubleClick");Rn("focusin","onFocus");Rn("focusout","onBlur");Rn(Gp,"onTransitionEnd");Nr("onMouseEnter",["mouseout","mouseover"]);Nr("onMouseLeave",["mouseout","mouseover"]);Nr("onPointerEnter",["pointerout","pointerover"]);Nr("onPointerLeave",["pointerout","pointerover"]);rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rr("onBeforeInput",["compositionend","keypress","textInput","paste"]);rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pi));function gf(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,wv(r,e,void 0,t),t.currentTarget=null}function Xp(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;gf(i,o,c),s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;gf(i,o,c),s=l}}}if(wa)throw t=fu,wa=!1,fu=null,t}function te(t,e){var n=e[Eu];n===void 0&&(n=e[Eu]=new Set);var r=t+"__bubble";n.has(r)||(Yp(e,t,2,!1),n.add(r))}function El(t,e,n){var r=0;e&&(r|=4),Yp(n,t,r,e)}var Us="_reactListening"+Math.random().toString(36).slice(2);function Ji(t){if(!t[Us]){t[Us]=!0,ap.forEach(function(n){n!=="selectionchange"&&(E_.has(n)||El(n,!1,t),El(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Us]||(e[Us]=!0,El("selectionchange",!1,e))}}function Yp(t,e,n,r){switch(Lp(e)){case 1:var i=Lv;break;case 4:i=$v;break;default:i=bc}n=i.bind(null,e,n,t),i=void 0,!du||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function kl(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Bn(o),a===null)return;if(l=a.tag,l===5||l===6){r=s=a;continue e}o=o.parentNode}}r=r.return}Ep(function(){var c=s,d=gc(n),p=[];e:{var h=Jp.get(t);if(h!==void 0){var y=kc,b=t;switch(t){case"keypress":if(ra(n)===0)break e;case"keydown":case"keyup":y=Xv;break;case"focusin":b="focus",y=yl;break;case"focusout":b="blur",y=yl;break;case"beforeblur":case"afterblur":y=yl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=sf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Zv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=t_;break;case Wp:case qp:case Qp:y=Bv;break;case Gp:y=r_;break;case"scroll":y=Mv;break;case"wheel":y=s_;break;case"copy":case"cut":case"paste":y=Hv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=of}var S=(e&4)!==0,C=!S&&t==="scroll",v=S?h!==null?h+"Capture":null:h;S=[];for(var g=c,E;g!==null;){E=g;var P=E.stateNode;if(E.tag===5&&P!==null&&(E=P,v!==null&&(P=Hi(g,v),P!=null&&S.push(Xi(g,P,E)))),C)break;g=g.return}0<S.length&&(h=new y(h,b,null,n,d),p.push({event:h,listeners:S}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",h&&n!==uu&&(b=n.relatedTarget||n.fromElement)&&(Bn(b)||b[tn]))break e;if((y||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,y?(b=n.relatedTarget||n.toElement,y=c,b=b?Bn(b):null,b!==null&&(C=ir(b),b!==C||b.tag!==5&&b.tag!==6)&&(b=null)):(y=null,b=c),y!==b)){if(S=sf,P="onMouseLeave",v="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(S=of,P="onPointerLeave",v="onPointerEnter",g="pointer"),C=y==null?h:yr(y),E=b==null?h:yr(b),h=new S(P,g+"leave",y,n,d),h.target=C,h.relatedTarget=E,P=null,Bn(d)===c&&(S=new S(v,g+"enter",b,n,d),S.target=E,S.relatedTarget=C,P=S),C=P,y&&b)t:{for(S=y,v=b,g=0,E=S;E;E=or(E))g++;for(E=0,P=v;P;P=or(P))E++;for(;0<g-E;)S=or(S),g--;for(;0<E-g;)v=or(v),E--;for(;g--;){if(S===v||v!==null&&S===v.alternate)break t;S=or(S),v=or(v)}S=null}else S=null;y!==null&&vf(p,h,y,S,!1),b!==null&&C!==null&&vf(p,C,b,S,!0)}}e:{if(h=c?yr(c):window,y=h.nodeName&&h.nodeName.toLowerCase(),y==="select"||y==="input"&&h.type==="file")var x=f_;else if(cf(h))if(Fp)x=y_;else{x=p_;var j=h_}else(y=h.nodeName)&&y.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(x=m_);if(x&&(x=x(t,c))){zp(p,x,n,d);break e}j&&j(t,h,c),t==="focusout"&&(j=h._wrapperState)&&j.controlled&&h.type==="number"&&iu(h,"number",h.value)}switch(j=c?yr(c):window,t){case"focusin":(cf(j)||j.contentEditable==="true")&&(pr=j,yu=c,Di=null);break;case"focusout":Di=yu=pr=null;break;case"mousedown":gu=!0;break;case"contextmenu":case"mouseup":case"dragend":gu=!1,mf(p,n,d);break;case"selectionchange":if(__)break;case"keydown":case"keyup":mf(p,n,d)}var D;if(Cc)e:{switch(t){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else hr?Up(t,n)&&(L="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(L="onCompositionStart");L&&(Mp&&n.locale!=="ko"&&(hr||L!=="onCompositionStart"?L==="onCompositionEnd"&&hr&&(D=$p()):(vn=d,Ec="value"in vn?vn.value:vn.textContent,hr=!0)),j=Ca(c,L),0<j.length&&(L=new af(L,t,null,n,d),p.push({event:L,listeners:j}),D?L.data=D:(D=Zp(n),D!==null&&(L.data=D)))),(D=o_?l_(t,n):u_(t,n))&&(c=Ca(c,"onBeforeInput"),0<c.length&&(d=new af("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:c}),d.data=D))}Xp(p,e)})}function Xi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ca(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Hi(t,n),s!=null&&r.unshift(Xi(t,s,i)),s=Hi(t,e),s!=null&&r.push(Xi(t,s,i))),t=t.return}return r}function or(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function vf(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&c!==null&&(o=c,i?(l=Hi(n,s),l!=null&&a.unshift(Xi(n,l,o))):i||(l=Hi(n,s),l!=null&&a.push(Xi(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var k_=/\r\n?/g,S_=/\u0000|\uFFFD/g;function _f(t){return(typeof t=="string"?t:""+t).replace(k_,`
`).replace(S_,"")}function Zs(t,e,n){if(e=_f(e),_f(t)!==e&&n)throw Error(A(425))}function Pa(){}var vu=null,_u=null;function wu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bu=typeof setTimeout=="function"?setTimeout:void 0,C_=typeof clearTimeout=="function"?clearTimeout:void 0,wf=typeof Promise=="function"?Promise:void 0,P_=typeof queueMicrotask=="function"?queueMicrotask:typeof wf<"u"?function(t){return wf.resolve(null).then(t).catch(T_)}:bu;function T_(t){setTimeout(function(){throw t})}function Sl(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),qi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);qi(e)}function Sn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Vr=Math.random().toString(36).slice(2),Lt="__reactFiber$"+Vr,Yi="__reactProps$"+Vr,tn="__reactContainer$"+Vr,Eu="__reactEvents$"+Vr,x_="__reactListeners$"+Vr,I_="__reactHandles$"+Vr;function Bn(t){var e=t[Lt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[tn]||n[Lt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=bf(t);t!==null;){if(n=t[Lt])return n;t=bf(t)}return e}t=n,n=t.parentNode}return null}function _s(t){return t=t[Lt]||t[tn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function yr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(A(33))}function Co(t){return t[Yi]||null}var ku=[],gr=-1;function Nn(t){return{current:t}}function ne(t){0>gr||(t.current=ku[gr],ku[gr]=null,gr--)}function Y(t,e){gr++,ku[gr]=t.current,t.current=e}var On={},je=Nn(On),Ke=Nn(!1),Gn=On;function jr(t,e){var n=t.type.contextTypes;if(!n)return On;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function We(t){return t=t.childContextTypes,t!=null}function Ta(){ne(Ke),ne(je)}function Ef(t,e,n){if(je.current!==On)throw Error(A(168));Y(je,e),Y(Ke,n)}function em(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(A(108,hv(t)||"Unknown",i));return ae({},n,r)}function xa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||On,Gn=je.current,Y(je,t),Y(Ke,Ke.current),!0}function kf(t,e,n){var r=t.stateNode;if(!r)throw Error(A(169));n?(t=em(t,e,Gn),r.__reactInternalMemoizedMergedChildContext=t,ne(Ke),ne(je),Y(je,t)):ne(Ke),Y(Ke,n)}var qt=null,Po=!1,Cl=!1;function tm(t){qt===null?qt=[t]:qt.push(t)}function O_(t){Po=!0,tm(t)}function jn(){if(!Cl&&qt!==null){Cl=!0;var t=0,e=X;try{var n=qt;for(X=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}qt=null,Po=!1}catch(i){throw qt!==null&&(qt=qt.slice(t+1)),Pp(vc,jn),i}finally{X=e,Cl=!1}}return null}var vr=[],_r=0,Ia=null,Oa=0,ut=[],ct=0,Jn=null,Gt=1,Jt="";function Un(t,e){vr[_r++]=Oa,vr[_r++]=Ia,Ia=t,Oa=e}function nm(t,e,n){ut[ct++]=Gt,ut[ct++]=Jt,ut[ct++]=Jn,Jn=t;var r=Gt;t=Jt;var i=32-Tt(r)-1;r&=~(1<<i),n+=1;var s=32-Tt(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Gt=1<<32-Tt(e)+i|n<<i|r,Jt=s+t}else Gt=1<<s|n<<i|r,Jt=t}function Tc(t){t.return!==null&&(Un(t,1),nm(t,1,0))}function xc(t){for(;t===Ia;)Ia=vr[--_r],vr[_r]=null,Oa=vr[--_r],vr[_r]=null;for(;t===Jn;)Jn=ut[--ct],ut[ct]=null,Jt=ut[--ct],ut[ct]=null,Gt=ut[--ct],ut[ct]=null}var nt=null,et=null,re=!1,Pt=null;function rm(t,e){var n=dt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Sf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,nt=t,et=Sn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,nt=t,et=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Jn!==null?{id:Gt,overflow:Jt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=dt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,nt=t,et=null,!0):!1;default:return!1}}function Su(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Cu(t){if(re){var e=et;if(e){var n=e;if(!Sf(t,e)){if(Su(t))throw Error(A(418));e=Sn(n.nextSibling);var r=nt;e&&Sf(t,e)?rm(r,n):(t.flags=t.flags&-4097|2,re=!1,nt=t)}}else{if(Su(t))throw Error(A(418));t.flags=t.flags&-4097|2,re=!1,nt=t}}}function Cf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;nt=t}function zs(t){if(t!==nt)return!1;if(!re)return Cf(t),re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!wu(t.type,t.memoizedProps)),e&&(e=et)){if(Su(t))throw im(),Error(A(418));for(;e;)rm(t,e),e=Sn(e.nextSibling)}if(Cf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(A(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){et=Sn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}et=null}}else et=nt?Sn(t.stateNode.nextSibling):null;return!0}function im(){for(var t=et;t;)t=Sn(t.nextSibling)}function Dr(){et=nt=null,re=!1}function Ic(t){Pt===null?Pt=[t]:Pt.push(t)}var A_=an.ReactCurrentBatchConfig;function St(t,e){if(t&&t.defaultProps){e=ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Aa=Nn(null),Ra=null,wr=null,Oc=null;function Ac(){Oc=wr=Ra=null}function Rc(t){var e=Aa.current;ne(Aa),t._currentValue=e}function Pu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ir(t,e){Ra=t,Oc=wr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(He=!0),t.firstContext=null)}function pt(t){var e=t._currentValue;if(Oc!==t)if(t={context:t,memoizedValue:e,next:null},wr===null){if(Ra===null)throw Error(A(308));wr=t,Ra.dependencies={lanes:0,firstContext:t}}else wr=wr.next=t;return e}var Vn=null;function Nc(t){Vn===null?Vn=[t]:Vn.push(t)}function sm(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Nc(e)):(n.next=i.next,i.next=n),e.interleaved=n,nn(t,r)}function nn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var mn=!1;function jc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function am(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Cn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Q&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,nn(t,n)}return i=r.interleaved,i===null?(e.next=e,Nc(r)):(e.next=i.next,i.next=e),r.interleaved=e,nn(t,n)}function ia(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_c(t,n)}}function Pf(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Na(t,e,n,r){var i=t.updateQueue;mn=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(s!==null){var p=i.baseState;a=0,d=c=l=null,o=s;do{var h=o.lane,y=o.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:y,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var b=t,S=o;switch(h=e,y=n,S.tag){case 1:if(b=S.payload,typeof b=="function"){p=b.call(y,p,h);break e}p=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=S.payload,h=typeof b=="function"?b.call(y,p,h):b,h==null)break e;p=ae({},p,h);break e;case 2:mn=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else y={eventTime:y,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=y,l=p):d=d.next=y,a|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(l=p),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Yn|=a,t.lanes=a,t.memoizedState=p}}function Tf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(A(191,i));i.call(r)}}}var om=new sp.Component().refs;function Tu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var To={isMounted:function(t){return(t=t._reactInternals)?ir(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ue(),i=Tn(t),s=Xt(r,i);s.payload=e,n!=null&&(s.callback=n),e=Cn(t,s,i),e!==null&&(xt(e,t,i,r),ia(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ue(),i=Tn(t),s=Xt(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Cn(t,s,i),e!==null&&(xt(e,t,i,r),ia(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ue(),r=Tn(t),i=Xt(n,r);i.tag=2,e!=null&&(i.callback=e),e=Cn(t,i,r),e!==null&&(xt(e,t,r,n),ia(e,t,r))}};function xf(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Gi(n,r)||!Gi(i,s):!0}function lm(t,e,n){var r=!1,i=On,s=e.contextType;return typeof s=="object"&&s!==null?s=pt(s):(i=We(e)?Gn:je.current,r=e.contextTypes,s=(r=r!=null)?jr(t,i):On),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=To,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function If(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&To.enqueueReplaceState(e,e.state,null)}function xu(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=om,jc(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=pt(s):(s=We(e)?Gn:je.current,i.context=jr(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Tu(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&To.enqueueReplaceState(i,i.state,null),Na(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ri(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(A(309));var r=n.stateNode}if(!r)throw Error(A(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;o===om&&(o=i.refs={}),a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(A(284));if(!n._owner)throw Error(A(290,t))}return t}function Fs(t,e){throw t=Object.prototype.toString.call(e),Error(A(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Of(t){var e=t._init;return e(t._payload)}function um(t){function e(v,g){if(t){var E=v.deletions;E===null?(v.deletions=[g],v.flags|=16):E.push(g)}}function n(v,g){if(!t)return null;for(;g!==null;)e(v,g),g=g.sibling;return null}function r(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function i(v,g){return v=xn(v,g),v.index=0,v.sibling=null,v}function s(v,g,E){return v.index=E,t?(E=v.alternate,E!==null?(E=E.index,E<g?(v.flags|=2,g):E):(v.flags|=2,g)):(v.flags|=1048576,g)}function a(v){return t&&v.alternate===null&&(v.flags|=2),v}function o(v,g,E,P){return g===null||g.tag!==6?(g=Rl(E,v.mode,P),g.return=v,g):(g=i(g,E),g.return=v,g)}function l(v,g,E,P){var x=E.type;return x===fr?d(v,g,E.props.children,P,E.key):g!==null&&(g.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===pn&&Of(x)===g.type)?(P=i(g,E.props),P.ref=ri(v,g,E),P.return=v,P):(P=ca(E.type,E.key,E.props,null,v.mode,P),P.ref=ri(v,g,E),P.return=v,P)}function c(v,g,E,P){return g===null||g.tag!==4||g.stateNode.containerInfo!==E.containerInfo||g.stateNode.implementation!==E.implementation?(g=Nl(E,v.mode,P),g.return=v,g):(g=i(g,E.children||[]),g.return=v,g)}function d(v,g,E,P,x){return g===null||g.tag!==7?(g=qn(E,v.mode,P,x),g.return=v,g):(g=i(g,E),g.return=v,g)}function p(v,g,E){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Rl(""+g,v.mode,E),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case As:return E=ca(g.type,g.key,g.props,null,v.mode,E),E.ref=ri(v,null,g),E.return=v,E;case dr:return g=Nl(g,v.mode,E),g.return=v,g;case pn:var P=g._init;return p(v,P(g._payload),E)}if(Si(g)||Xr(g))return g=qn(g,v.mode,E,null),g.return=v,g;Fs(v,g)}return null}function h(v,g,E,P){var x=g!==null?g.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return x!==null?null:o(v,g,""+E,P);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case As:return E.key===x?l(v,g,E,P):null;case dr:return E.key===x?c(v,g,E,P):null;case pn:return x=E._init,h(v,g,x(E._payload),P)}if(Si(E)||Xr(E))return x!==null?null:d(v,g,E,P,null);Fs(v,E)}return null}function y(v,g,E,P,x){if(typeof P=="string"&&P!==""||typeof P=="number")return v=v.get(E)||null,o(g,v,""+P,x);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case As:return v=v.get(P.key===null?E:P.key)||null,l(g,v,P,x);case dr:return v=v.get(P.key===null?E:P.key)||null,c(g,v,P,x);case pn:var j=P._init;return y(v,g,E,j(P._payload),x)}if(Si(P)||Xr(P))return v=v.get(E)||null,d(g,v,P,x,null);Fs(g,P)}return null}function b(v,g,E,P){for(var x=null,j=null,D=g,L=g=0,H=null;D!==null&&L<E.length;L++){D.index>L?(H=D,D=null):H=D.sibling;var F=h(v,D,E[L],P);if(F===null){D===null&&(D=H);break}t&&D&&F.alternate===null&&e(v,D),g=s(F,g,L),j===null?x=F:j.sibling=F,j=F,D=H}if(L===E.length)return n(v,D),re&&Un(v,L),x;if(D===null){for(;L<E.length;L++)D=p(v,E[L],P),D!==null&&(g=s(D,g,L),j===null?x=D:j.sibling=D,j=D);return re&&Un(v,L),x}for(D=r(v,D);L<E.length;L++)H=y(D,v,L,E[L],P),H!==null&&(t&&H.alternate!==null&&D.delete(H.key===null?L:H.key),g=s(H,g,L),j===null?x=H:j.sibling=H,j=H);return t&&D.forEach(function(pe){return e(v,pe)}),re&&Un(v,L),x}function S(v,g,E,P){var x=Xr(E);if(typeof x!="function")throw Error(A(150));if(E=x.call(E),E==null)throw Error(A(151));for(var j=x=null,D=g,L=g=0,H=null,F=E.next();D!==null&&!F.done;L++,F=E.next()){D.index>L?(H=D,D=null):H=D.sibling;var pe=h(v,D,F.value,P);if(pe===null){D===null&&(D=H);break}t&&D&&pe.alternate===null&&e(v,D),g=s(pe,g,L),j===null?x=pe:j.sibling=pe,j=pe,D=H}if(F.done)return n(v,D),re&&Un(v,L),x;if(D===null){for(;!F.done;L++,F=E.next())F=p(v,F.value,P),F!==null&&(g=s(F,g,L),j===null?x=F:j.sibling=F,j=F);return re&&Un(v,L),x}for(D=r(v,D);!F.done;L++,F=E.next())F=y(D,v,L,F.value,P),F!==null&&(t&&F.alternate!==null&&D.delete(F.key===null?L:F.key),g=s(F,g,L),j===null?x=F:j.sibling=F,j=F);return t&&D.forEach(function(Ge){return e(v,Ge)}),re&&Un(v,L),x}function C(v,g,E,P){if(typeof E=="object"&&E!==null&&E.type===fr&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case As:e:{for(var x=E.key,j=g;j!==null;){if(j.key===x){if(x=E.type,x===fr){if(j.tag===7){n(v,j.sibling),g=i(j,E.props.children),g.return=v,v=g;break e}}else if(j.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===pn&&Of(x)===j.type){n(v,j.sibling),g=i(j,E.props),g.ref=ri(v,j,E),g.return=v,v=g;break e}n(v,j);break}else e(v,j);j=j.sibling}E.type===fr?(g=qn(E.props.children,v.mode,P,E.key),g.return=v,v=g):(P=ca(E.type,E.key,E.props,null,v.mode,P),P.ref=ri(v,g,E),P.return=v,v=P)}return a(v);case dr:e:{for(j=E.key;g!==null;){if(g.key===j)if(g.tag===4&&g.stateNode.containerInfo===E.containerInfo&&g.stateNode.implementation===E.implementation){n(v,g.sibling),g=i(g,E.children||[]),g.return=v,v=g;break e}else{n(v,g);break}else e(v,g);g=g.sibling}g=Nl(E,v.mode,P),g.return=v,v=g}return a(v);case pn:return j=E._init,C(v,g,j(E._payload),P)}if(Si(E))return b(v,g,E,P);if(Xr(E))return S(v,g,E,P);Fs(v,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,g!==null&&g.tag===6?(n(v,g.sibling),g=i(g,E),g.return=v,v=g):(n(v,g),g=Rl(E,v.mode,P),g.return=v,v=g),a(v)):n(v,g)}return C}var Lr=um(!0),cm=um(!1),ws={},Ut=Nn(ws),es=Nn(ws),ts=Nn(ws);function Hn(t){if(t===ws)throw Error(A(174));return t}function Dc(t,e){switch(Y(ts,e),Y(es,t),Y(Ut,ws),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:au(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=au(e,t)}ne(Ut),Y(Ut,e)}function $r(){ne(Ut),ne(es),ne(ts)}function dm(t){Hn(ts.current);var e=Hn(Ut.current),n=au(e,t.type);e!==n&&(Y(es,t),Y(Ut,n))}function Lc(t){es.current===t&&(ne(Ut),ne(es))}var ie=Nn(0);function ja(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pl=[];function $c(){for(var t=0;t<Pl.length;t++)Pl[t]._workInProgressVersionPrimary=null;Pl.length=0}var sa=an.ReactCurrentDispatcher,Tl=an.ReactCurrentBatchConfig,Xn=0,se=null,fe=null,ge=null,Da=!1,Li=!1,ns=0,R_=0;function Te(){throw Error(A(321))}function Mc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!It(t[n],e[n]))return!1;return!0}function Uc(t,e,n,r,i,s){if(Xn=s,se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,sa.current=t===null||t.memoizedState===null?L_:$_,t=n(r,i),Li){s=0;do{if(Li=!1,ns=0,25<=s)throw Error(A(301));s+=1,ge=fe=null,e.updateQueue=null,sa.current=M_,t=n(r,i)}while(Li)}if(sa.current=La,e=fe!==null&&fe.next!==null,Xn=0,ge=fe=se=null,Da=!1,e)throw Error(A(300));return t}function Zc(){var t=ns!==0;return ns=0,t}function Dt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ge===null?se.memoizedState=ge=t:ge=ge.next=t,ge}function mt(){if(fe===null){var t=se.alternate;t=t!==null?t.memoizedState:null}else t=fe.next;var e=ge===null?se.memoizedState:ge.next;if(e!==null)ge=e,fe=t;else{if(t===null)throw Error(A(310));fe=t,t={memoizedState:fe.memoizedState,baseState:fe.baseState,baseQueue:fe.baseQueue,queue:fe.queue,next:null},ge===null?se.memoizedState=ge=t:ge=ge.next=t}return ge}function rs(t,e){return typeof e=="function"?e(t):e}function xl(t){var e=mt(),n=e.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=t;var r=fe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,l=null,c=s;do{var d=c.lane;if((Xn&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=p,a=r):l=l.next=p,se.lanes|=d,Yn|=d}c=c.next}while(c!==null&&c!==s);l===null?a=r:l.next=o,It(r,e.memoizedState)||(He=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,se.lanes|=s,Yn|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Il(t){var e=mt(),n=e.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);It(s,e.memoizedState)||(He=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function fm(){}function hm(t,e){var n=se,r=mt(),i=e(),s=!It(r.memoizedState,i);if(s&&(r.memoizedState=i,He=!0),r=r.queue,zc(ym.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ge!==null&&ge.memoizedState.tag&1){if(n.flags|=2048,is(9,mm.bind(null,n,r,i,e),void 0,null),ve===null)throw Error(A(349));Xn&30||pm(n,e,i)}return i}function pm(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=se.updateQueue,e===null?(e={lastEffect:null,stores:null},se.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function mm(t,e,n,r){e.value=n,e.getSnapshot=r,gm(e)&&vm(t)}function ym(t,e,n){return n(function(){gm(e)&&vm(t)})}function gm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!It(t,n)}catch{return!0}}function vm(t){var e=nn(t,1);e!==null&&xt(e,t,1,-1)}function Af(t){var e=Dt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:t},e.queue=t,t=t.dispatch=D_.bind(null,se,t),[e.memoizedState,t]}function is(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=se.updateQueue,e===null?(e={lastEffect:null,stores:null},se.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function _m(){return mt().memoizedState}function aa(t,e,n,r){var i=Dt();se.flags|=t,i.memoizedState=is(1|e,n,void 0,r===void 0?null:r)}function xo(t,e,n,r){var i=mt();r=r===void 0?null:r;var s=void 0;if(fe!==null){var a=fe.memoizedState;if(s=a.destroy,r!==null&&Mc(r,a.deps)){i.memoizedState=is(e,n,s,r);return}}se.flags|=t,i.memoizedState=is(1|e,n,s,r)}function Rf(t,e){return aa(8390656,8,t,e)}function zc(t,e){return xo(2048,8,t,e)}function wm(t,e){return xo(4,2,t,e)}function bm(t,e){return xo(4,4,t,e)}function Em(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function km(t,e,n){return n=n!=null?n.concat([t]):null,xo(4,4,Em.bind(null,e,t),n)}function Fc(){}function Sm(t,e){var n=mt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Cm(t,e){var n=mt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Pm(t,e,n){return Xn&21?(It(n,e)||(n=Ip(),se.lanes|=n,Yn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,He=!0),t.memoizedState=n)}function N_(t,e){var n=X;X=n!==0&&4>n?n:4,t(!0);var r=Tl.transition;Tl.transition={};try{t(!1),e()}finally{X=n,Tl.transition=r}}function Tm(){return mt().memoizedState}function j_(t,e,n){var r=Tn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},xm(t))Im(e,n);else if(n=sm(t,e,n,r),n!==null){var i=Ue();xt(n,t,r,i),Om(n,e,r)}}function D_(t,e,n){var r=Tn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(xm(t))Im(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,It(o,a)){var l=e.interleaved;l===null?(i.next=i,Nc(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=sm(t,e,i,r),n!==null&&(i=Ue(),xt(n,t,r,i),Om(n,e,r))}}function xm(t){var e=t.alternate;return t===se||e!==null&&e===se}function Im(t,e){Li=Da=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Om(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_c(t,n)}}var La={readContext:pt,useCallback:Te,useContext:Te,useEffect:Te,useImperativeHandle:Te,useInsertionEffect:Te,useLayoutEffect:Te,useMemo:Te,useReducer:Te,useRef:Te,useState:Te,useDebugValue:Te,useDeferredValue:Te,useTransition:Te,useMutableSource:Te,useSyncExternalStore:Te,useId:Te,unstable_isNewReconciler:!1},L_={readContext:pt,useCallback:function(t,e){return Dt().memoizedState=[t,e===void 0?null:e],t},useContext:pt,useEffect:Rf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,aa(4194308,4,Em.bind(null,e,t),n)},useLayoutEffect:function(t,e){return aa(4194308,4,t,e)},useInsertionEffect:function(t,e){return aa(4,2,t,e)},useMemo:function(t,e){var n=Dt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Dt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=j_.bind(null,se,t),[r.memoizedState,t]},useRef:function(t){var e=Dt();return t={current:t},e.memoizedState=t},useState:Af,useDebugValue:Fc,useDeferredValue:function(t){return Dt().memoizedState=t},useTransition:function(){var t=Af(!1),e=t[0];return t=N_.bind(null,t[1]),Dt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=se,i=Dt();if(re){if(n===void 0)throw Error(A(407));n=n()}else{if(n=e(),ve===null)throw Error(A(349));Xn&30||pm(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Rf(ym.bind(null,r,s,t),[t]),r.flags|=2048,is(9,mm.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Dt(),e=ve.identifierPrefix;if(re){var n=Jt,r=Gt;n=(r&~(1<<32-Tt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ns++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=R_++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$_={readContext:pt,useCallback:Sm,useContext:pt,useEffect:zc,useImperativeHandle:km,useInsertionEffect:wm,useLayoutEffect:bm,useMemo:Cm,useReducer:xl,useRef:_m,useState:function(){return xl(rs)},useDebugValue:Fc,useDeferredValue:function(t){var e=mt();return Pm(e,fe.memoizedState,t)},useTransition:function(){var t=xl(rs)[0],e=mt().memoizedState;return[t,e]},useMutableSource:fm,useSyncExternalStore:hm,useId:Tm,unstable_isNewReconciler:!1},M_={readContext:pt,useCallback:Sm,useContext:pt,useEffect:zc,useImperativeHandle:km,useInsertionEffect:wm,useLayoutEffect:bm,useMemo:Cm,useReducer:Il,useRef:_m,useState:function(){return Il(rs)},useDebugValue:Fc,useDeferredValue:function(t){var e=mt();return fe===null?e.memoizedState=t:Pm(e,fe.memoizedState,t)},useTransition:function(){var t=Il(rs)[0],e=mt().memoizedState;return[t,e]},useMutableSource:fm,useSyncExternalStore:hm,useId:Tm,unstable_isNewReconciler:!1};function Mr(t,e){try{var n="",r=e;do n+=fv(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ol(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Iu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var U_=typeof WeakMap=="function"?WeakMap:Map;function Am(t,e,n){n=Xt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ma||(Ma=!0,Uu=r),Iu(t,e)},n}function Rm(t,e,n){n=Xt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Iu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Iu(t,e),typeof r!="function"&&(Pn===null?Pn=new Set([this]):Pn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Nf(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new U_;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Y_.bind(null,t,e,n),e.then(t,t))}function jf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Df(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Xt(-1,1),e.tag=2,Cn(n,e,1))),n.lanes|=1),t)}var Z_=an.ReactCurrentOwner,He=!1;function Me(t,e,n,r){e.child=t===null?cm(e,null,n,r):Lr(e,t.child,n,r)}function Lf(t,e,n,r,i){n=n.render;var s=e.ref;return Ir(e,i),r=Uc(t,e,n,r,s,i),n=Zc(),t!==null&&!He?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,rn(t,e,i)):(re&&n&&Tc(e),e.flags|=1,Me(t,e,r,i),e.child)}function $f(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Gc(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Nm(t,e,s,r,i)):(t=ca(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Gi,n(a,r)&&t.ref===e.ref)return rn(t,e,i)}return e.flags|=1,t=xn(s,r),t.ref=e.ref,t.return=e,e.child=t}function Nm(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Gi(s,r)&&t.ref===e.ref)if(He=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(He=!0);else return e.lanes=t.lanes,rn(t,e,i)}return Ou(t,e,n,r,i)}function jm(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Y(Er,Ye),Ye|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Y(Er,Ye),Ye|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Y(Er,Ye),Ye|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Y(Er,Ye),Ye|=r;return Me(t,e,i,n),e.child}function Dm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ou(t,e,n,r,i){var s=We(n)?Gn:je.current;return s=jr(e,s),Ir(e,i),n=Uc(t,e,n,r,s,i),r=Zc(),t!==null&&!He?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,rn(t,e,i)):(re&&r&&Tc(e),e.flags|=1,Me(t,e,n,i),e.child)}function Mf(t,e,n,r,i){if(We(n)){var s=!0;xa(e)}else s=!1;if(Ir(e,i),e.stateNode===null)oa(t,e),lm(e,n,r),xu(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=pt(c):(c=We(n)?Gn:je.current,c=jr(e,c));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==c)&&If(e,a,r,c),mn=!1;var h=e.memoizedState;a.state=h,Na(e,r,a,i),l=e.memoizedState,o!==r||h!==l||Ke.current||mn?(typeof d=="function"&&(Tu(e,n,d,r),l=e.memoizedState),(o=mn||xf(e,n,o,r,h,l,c))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,am(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:St(e.type,o),a.props=c,p=e.pendingProps,h=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=pt(l):(l=We(n)?Gn:je.current,l=jr(e,l));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==p||h!==l)&&If(e,a,r,l),mn=!1,h=e.memoizedState,a.state=h,Na(e,r,a,i);var b=e.memoizedState;o!==p||h!==b||Ke.current||mn?(typeof y=="function"&&(Tu(e,n,y,r),b=e.memoizedState),(c=mn||xf(e,n,c,r,h,b,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,b,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,b,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),a.props=r,a.state=b,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Au(t,e,n,r,s,i)}function Au(t,e,n,r,i,s){Dm(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&kf(e,n,!1),rn(t,e,s);r=e.stateNode,Z_.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Lr(e,t.child,null,s),e.child=Lr(e,null,o,s)):Me(t,e,o,s),e.memoizedState=r.state,i&&kf(e,n,!0),e.child}function Lm(t){var e=t.stateNode;e.pendingContext?Ef(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ef(t,e.context,!1),Dc(t,e.containerInfo)}function Uf(t,e,n,r,i){return Dr(),Ic(i),e.flags|=256,Me(t,e,n,r),e.child}var Ru={dehydrated:null,treeContext:null,retryLane:0};function Nu(t){return{baseLanes:t,cachePool:null,transitions:null}}function $m(t,e,n){var r=e.pendingProps,i=ie.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Y(ie,i&1),t===null)return Cu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Ao(a,r,0,null),t=qn(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Nu(n),e.memoizedState=Ru,t):Bc(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return z_(t,e,a,r,o,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=xn(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=xn(o,s):(s=qn(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?Nu(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=Ru,r}return s=t.child,t=s.sibling,r=xn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Bc(t,e){return e=Ao({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Bs(t,e,n,r){return r!==null&&Ic(r),Lr(e,t.child,null,n),t=Bc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function z_(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=Ol(Error(A(422))),Bs(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Ao({mode:"visible",children:r.children},i,0,null),s=qn(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Lr(e,t.child,null,a),e.child.memoizedState=Nu(a),e.memoizedState=Ru,s);if(!(e.mode&1))return Bs(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(A(419)),r=Ol(s,r,void 0),Bs(t,e,a,r)}if(o=(a&t.childLanes)!==0,He||o){if(r=ve,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,nn(t,i),xt(r,t,i,-1))}return Qc(),r=Ol(Error(A(421))),Bs(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=ew.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,et=Sn(i.nextSibling),nt=e,re=!0,Pt=null,t!==null&&(ut[ct++]=Gt,ut[ct++]=Jt,ut[ct++]=Jn,Gt=t.id,Jt=t.overflow,Jn=e),e=Bc(e,r.children),e.flags|=4096,e)}function Zf(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Pu(t.return,e,n)}function Al(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Mm(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Me(t,e,r.children,n),r=ie.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Zf(t,n,e);else if(t.tag===19)Zf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Y(ie,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ja(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Al(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ja(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Al(e,!0,n,null,s);break;case"together":Al(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function oa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function rn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Yn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(A(153));if(e.child!==null){for(t=e.child,n=xn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=xn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function F_(t,e,n){switch(e.tag){case 3:Lm(e),Dr();break;case 5:dm(e);break;case 1:We(e.type)&&xa(e);break;case 4:Dc(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Y(Aa,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Y(ie,ie.current&1),e.flags|=128,null):n&e.child.childLanes?$m(t,e,n):(Y(ie,ie.current&1),t=rn(t,e,n),t!==null?t.sibling:null);Y(ie,ie.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Mm(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Y(ie,ie.current),r)break;return null;case 22:case 23:return e.lanes=0,jm(t,e,n)}return rn(t,e,n)}var Um,ju,Zm,zm;Um=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ju=function(){};Zm=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Hn(Ut.current);var s=null;switch(n){case"input":i=nu(t,i),r=nu(t,r),s=[];break;case"select":i=ae({},i,{value:void 0}),r=ae({},r,{value:void 0}),s=[];break;case"textarea":i=su(t,i),r=su(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Pa)}ou(n,r);var a;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var o=i[c];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Bi.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(o=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Bi.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&te("scroll",t),s||o===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};zm=function(t,e,n,r){n!==r&&(e.flags|=4)};function ii(t,e){if(!re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function xe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function B_(t,e,n){var r=e.pendingProps;switch(xc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xe(e),null;case 1:return We(e.type)&&Ta(),xe(e),null;case 3:return r=e.stateNode,$r(),ne(Ke),ne(je),$c(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(zs(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pt!==null&&(Fu(Pt),Pt=null))),ju(t,e),xe(e),null;case 5:Lc(e);var i=Hn(ts.current);if(n=e.type,t!==null&&e.stateNode!=null)Zm(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(A(166));return xe(e),null}if(t=Hn(Ut.current),zs(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Lt]=e,r[Yi]=s,t=(e.mode&1)!==0,n){case"dialog":te("cancel",r),te("close",r);break;case"iframe":case"object":case"embed":te("load",r);break;case"video":case"audio":for(i=0;i<Pi.length;i++)te(Pi[i],r);break;case"source":te("error",r);break;case"img":case"image":case"link":te("error",r),te("load",r);break;case"details":te("toggle",r);break;case"input":qd(r,s),te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},te("invalid",r);break;case"textarea":Gd(r,s),te("invalid",r)}ou(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&Zs(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Zs(r.textContent,o,t),i=["children",""+o]):Bi.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&te("scroll",r)}switch(n){case"input":Rs(r),Qd(r,s,!0);break;case"textarea":Rs(r),Jd(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Pa)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=pp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Lt]=e,t[Yi]=r,Um(t,e,!1,!1),e.stateNode=t;e:{switch(a=lu(n,r),n){case"dialog":te("cancel",t),te("close",t),i=r;break;case"iframe":case"object":case"embed":te("load",t),i=r;break;case"video":case"audio":for(i=0;i<Pi.length;i++)te(Pi[i],t);i=r;break;case"source":te("error",t),i=r;break;case"img":case"image":case"link":te("error",t),te("load",t),i=r;break;case"details":te("toggle",t),i=r;break;case"input":qd(t,r),i=nu(t,r),te("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ae({},r,{value:void 0}),te("invalid",t);break;case"textarea":Gd(t,r),i=su(t,r),te("invalid",t);break;default:i=r}ou(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?gp(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&mp(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Vi(t,l):typeof l=="number"&&Vi(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Bi.hasOwnProperty(s)?l!=null&&s==="onScroll"&&te("scroll",t):l!=null&&hc(t,s,l,a))}switch(n){case"input":Rs(t),Qd(t,r,!1);break;case"textarea":Rs(t),Jd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+In(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Cr(t,!!r.multiple,s,!1):r.defaultValue!=null&&Cr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Pa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xe(e),null;case 6:if(t&&e.stateNode!=null)zm(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(A(166));if(n=Hn(ts.current),Hn(Ut.current),zs(e)){if(r=e.stateNode,n=e.memoizedProps,r[Lt]=e,(s=r.nodeValue!==n)&&(t=nt,t!==null))switch(t.tag){case 3:Zs(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Zs(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Lt]=e,e.stateNode=r}return xe(e),null;case 13:if(ne(ie),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(re&&et!==null&&e.mode&1&&!(e.flags&128))im(),Dr(),e.flags|=98560,s=!1;else if(s=zs(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(A(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(A(317));s[Lt]=e}else Dr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xe(e),s=!1}else Pt!==null&&(Fu(Pt),Pt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ie.current&1?he===0&&(he=3):Qc())),e.updateQueue!==null&&(e.flags|=4),xe(e),null);case 4:return $r(),ju(t,e),t===null&&Ji(e.stateNode.containerInfo),xe(e),null;case 10:return Rc(e.type._context),xe(e),null;case 17:return We(e.type)&&Ta(),xe(e),null;case 19:if(ne(ie),s=e.memoizedState,s===null)return xe(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)ii(s,!1);else{if(he!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=ja(t),a!==null){for(e.flags|=128,ii(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Y(ie,ie.current&1|2),e.child}t=t.sibling}s.tail!==null&&ue()>Ur&&(e.flags|=128,r=!0,ii(s,!1),e.lanes=4194304)}else{if(!r)if(t=ja(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ii(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!re)return xe(e),null}else 2*ue()-s.renderingStartTime>Ur&&n!==1073741824&&(e.flags|=128,r=!0,ii(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ue(),e.sibling=null,n=ie.current,Y(ie,r?n&1|2:n&1),e):(xe(e),null);case 22:case 23:return qc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ye&1073741824&&(xe(e),e.subtreeFlags&6&&(e.flags|=8192)):xe(e),null;case 24:return null;case 25:return null}throw Error(A(156,e.tag))}function V_(t,e){switch(xc(e),e.tag){case 1:return We(e.type)&&Ta(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return $r(),ne(Ke),ne(je),$c(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Lc(e),null;case 13:if(ne(ie),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(A(340));Dr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ne(ie),null;case 4:return $r(),null;case 10:return Rc(e.type._context),null;case 22:case 23:return qc(),null;case 24:return null;default:return null}}var Vs=!1,Re=!1,H_=typeof WeakSet=="function"?WeakSet:Set,$=null;function br(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){oe(t,e,r)}else n.current=null}function Du(t,e,n){try{n()}catch(r){oe(t,e,r)}}var zf=!1;function K_(t,e){if(vu=ka,t=Hp(),Pc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,c=0,d=0,p=t,h=null;t:for(;;){for(var y;p!==n||i!==0&&p.nodeType!==3||(o=a+i),p!==s||r!==0&&p.nodeType!==3||(l=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(y=p.firstChild)!==null;)h=p,p=y;for(;;){if(p===t)break t;if(h===n&&++c===i&&(o=a),h===s&&++d===r&&(l=a),(y=p.nextSibling)!==null)break;p=h,h=p.parentNode}p=y}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(_u={focusedElem:t,selectionRange:n},ka=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var S=b.memoizedProps,C=b.memoizedState,v=e.stateNode,g=v.getSnapshotBeforeUpdate(e.elementType===e.type?S:St(e.type,S),C);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(P){oe(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return b=zf,zf=!1,b}function $i(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Du(e,n,s)}i=i.next}while(i!==r)}}function Io(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Lu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Fm(t){var e=t.alternate;e!==null&&(t.alternate=null,Fm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Lt],delete e[Yi],delete e[Eu],delete e[x_],delete e[I_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Bm(t){return t.tag===5||t.tag===3||t.tag===4}function Ff(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Bm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $u(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Pa));else if(r!==4&&(t=t.child,t!==null))for($u(t,e,n),t=t.sibling;t!==null;)$u(t,e,n),t=t.sibling}function Mu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Mu(t,e,n),t=t.sibling;t!==null;)Mu(t,e,n),t=t.sibling}var be=null,Ct=!1;function cn(t,e,n){for(n=n.child;n!==null;)Vm(t,e,n),n=n.sibling}function Vm(t,e,n){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(bo,n)}catch{}switch(n.tag){case 5:Re||br(n,e);case 6:var r=be,i=Ct;be=null,cn(t,e,n),be=r,Ct=i,be!==null&&(Ct?(t=be,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):be.removeChild(n.stateNode));break;case 18:be!==null&&(Ct?(t=be,n=n.stateNode,t.nodeType===8?Sl(t.parentNode,n):t.nodeType===1&&Sl(t,n),qi(t)):Sl(be,n.stateNode));break;case 4:r=be,i=Ct,be=n.stateNode.containerInfo,Ct=!0,cn(t,e,n),be=r,Ct=i;break;case 0:case 11:case 14:case 15:if(!Re&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Du(n,e,a),i=i.next}while(i!==r)}cn(t,e,n);break;case 1:if(!Re&&(br(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){oe(n,e,o)}cn(t,e,n);break;case 21:cn(t,e,n);break;case 22:n.mode&1?(Re=(r=Re)||n.memoizedState!==null,cn(t,e,n),Re=r):cn(t,e,n);break;default:cn(t,e,n)}}function Bf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new H_),e.forEach(function(r){var i=tw.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function _t(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:be=o.stateNode,Ct=!1;break e;case 3:be=o.stateNode.containerInfo,Ct=!0;break e;case 4:be=o.stateNode.containerInfo,Ct=!0;break e}o=o.return}if(be===null)throw Error(A(160));Vm(s,a,i),be=null,Ct=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){oe(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Hm(e,t),e=e.sibling}function Hm(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_t(e,t),Nt(t),r&4){try{$i(3,t,t.return),Io(3,t)}catch(S){oe(t,t.return,S)}try{$i(5,t,t.return)}catch(S){oe(t,t.return,S)}}break;case 1:_t(e,t),Nt(t),r&512&&n!==null&&br(n,n.return);break;case 5:if(_t(e,t),Nt(t),r&512&&n!==null&&br(n,n.return),t.flags&32){var i=t.stateNode;try{Vi(i,"")}catch(S){oe(t,t.return,S)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&fp(i,s),lu(o,a);var c=lu(o,s);for(a=0;a<l.length;a+=2){var d=l[a],p=l[a+1];d==="style"?gp(i,p):d==="dangerouslySetInnerHTML"?mp(i,p):d==="children"?Vi(i,p):hc(i,d,p,c)}switch(o){case"input":ru(i,s);break;case"textarea":hp(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?Cr(i,!!s.multiple,y,!1):h!==!!s.multiple&&(s.defaultValue!=null?Cr(i,!!s.multiple,s.defaultValue,!0):Cr(i,!!s.multiple,s.multiple?[]:"",!1))}i[Yi]=s}catch(S){oe(t,t.return,S)}}break;case 6:if(_t(e,t),Nt(t),r&4){if(t.stateNode===null)throw Error(A(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(S){oe(t,t.return,S)}}break;case 3:if(_t(e,t),Nt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{qi(e.containerInfo)}catch(S){oe(t,t.return,S)}break;case 4:_t(e,t),Nt(t);break;case 13:_t(e,t),Nt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Kc=ue())),r&4&&Bf(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Re=(c=Re)||d,_t(e,t),Re=c):_t(e,t),Nt(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for($=t,d=t.child;d!==null;){for(p=$=d;$!==null;){switch(h=$,y=h.child,h.tag){case 0:case 11:case 14:case 15:$i(4,h,h.return);break;case 1:br(h,h.return);var b=h.stateNode;if(typeof b.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(S){oe(r,n,S)}}break;case 5:br(h,h.return);break;case 22:if(h.memoizedState!==null){Hf(p);continue}}y!==null?(y.return=h,$=y):Hf(p)}d=d.sibling}e:for(d=null,p=t;;){if(p.tag===5){if(d===null){d=p;try{i=p.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=p.stateNode,l=p.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=yp("display",a))}catch(S){oe(t,t.return,S)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(S){oe(t,t.return,S)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:_t(e,t),Nt(t),r&4&&Bf(t);break;case 21:break;default:_t(e,t),Nt(t)}}function Nt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Bm(n)){var r=n;break e}n=n.return}throw Error(A(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Vi(i,""),r.flags&=-33);var s=Ff(t);Mu(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=Ff(t);$u(t,o,a);break;default:throw Error(A(161))}}catch(l){oe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function W_(t,e,n){$=t,Km(t)}function Km(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var i=$,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Vs;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||Re;o=Vs;var c=Re;if(Vs=a,(Re=l)&&!c)for($=i;$!==null;)a=$,l=a.child,a.tag===22&&a.memoizedState!==null?Kf(i):l!==null?(l.return=a,$=l):Kf(i);for(;s!==null;)$=s,Km(s),s=s.sibling;$=i,Vs=o,Re=c}Vf(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,$=s):Vf(t)}}function Vf(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Re||Io(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Re)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:St(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Tf(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Tf(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&qi(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}Re||e.flags&512&&Lu(e)}catch(h){oe(e,e.return,h)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function Hf(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function Kf(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Io(4,e)}catch(l){oe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){oe(e,i,l)}}var s=e.return;try{Lu(e)}catch(l){oe(e,s,l)}break;case 5:var a=e.return;try{Lu(e)}catch(l){oe(e,a,l)}}}catch(l){oe(e,e.return,l)}if(e===t){$=null;break}var o=e.sibling;if(o!==null){o.return=e.return,$=o;break}$=e.return}}var q_=Math.ceil,$a=an.ReactCurrentDispatcher,Vc=an.ReactCurrentOwner,ft=an.ReactCurrentBatchConfig,Q=0,ve=null,de=null,Se=0,Ye=0,Er=Nn(0),he=0,ss=null,Yn=0,Oo=0,Hc=0,Mi=null,Ve=null,Kc=0,Ur=1/0,Wt=null,Ma=!1,Uu=null,Pn=null,Hs=!1,_n=null,Ua=0,Ui=0,Zu=null,la=-1,ua=0;function Ue(){return Q&6?ue():la!==-1?la:la=ue()}function Tn(t){return t.mode&1?Q&2&&Se!==0?Se&-Se:A_.transition!==null?(ua===0&&(ua=Ip()),ua):(t=X,t!==0||(t=window.event,t=t===void 0?16:Lp(t.type)),t):1}function xt(t,e,n,r){if(50<Ui)throw Ui=0,Zu=null,Error(A(185));gs(t,n,r),(!(Q&2)||t!==ve)&&(t===ve&&(!(Q&2)&&(Oo|=n),he===4&&gn(t,Se)),qe(t,r),n===1&&Q===0&&!(e.mode&1)&&(Ur=ue()+500,Po&&jn()))}function qe(t,e){var n=t.callbackNode;Av(t,e);var r=Ea(t,t===ve?Se:0);if(r===0)n!==null&&ef(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ef(n),e===1)t.tag===0?O_(Wf.bind(null,t)):tm(Wf.bind(null,t)),P_(function(){!(Q&6)&&jn()}),n=null;else{switch(Op(r)){case 1:n=vc;break;case 4:n=Tp;break;case 16:n=ba;break;case 536870912:n=xp;break;default:n=ba}n=ey(n,Wm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Wm(t,e){if(la=-1,ua=0,Q&6)throw Error(A(327));var n=t.callbackNode;if(Or()&&t.callbackNode!==n)return null;var r=Ea(t,t===ve?Se:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Za(t,r);else{e=r;var i=Q;Q|=2;var s=Qm();(ve!==t||Se!==e)&&(Wt=null,Ur=ue()+500,Wn(t,e));do try{J_();break}catch(o){qm(t,o)}while(!0);Ac(),$a.current=s,Q=i,de!==null?e=0:(ve=null,Se=0,e=he)}if(e!==0){if(e===2&&(i=hu(t),i!==0&&(r=i,e=zu(t,i))),e===1)throw n=ss,Wn(t,0),gn(t,r),qe(t,ue()),n;if(e===6)gn(t,r);else{if(i=t.current.alternate,!(r&30)&&!Q_(i)&&(e=Za(t,r),e===2&&(s=hu(t),s!==0&&(r=s,e=zu(t,s))),e===1))throw n=ss,Wn(t,0),gn(t,r),qe(t,ue()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(A(345));case 2:Zn(t,Ve,Wt);break;case 3:if(gn(t,r),(r&130023424)===r&&(e=Kc+500-ue(),10<e)){if(Ea(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ue(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=bu(Zn.bind(null,t,Ve,Wt),e);break}Zn(t,Ve,Wt);break;case 4:if(gn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Tt(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*q_(r/1960))-r,10<r){t.timeoutHandle=bu(Zn.bind(null,t,Ve,Wt),r);break}Zn(t,Ve,Wt);break;case 5:Zn(t,Ve,Wt);break;default:throw Error(A(329))}}}return qe(t,ue()),t.callbackNode===n?Wm.bind(null,t):null}function zu(t,e){var n=Mi;return t.current.memoizedState.isDehydrated&&(Wn(t,e).flags|=256),t=Za(t,e),t!==2&&(e=Ve,Ve=n,e!==null&&Fu(e)),t}function Fu(t){Ve===null?Ve=t:Ve.push.apply(Ve,t)}function Q_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!It(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function gn(t,e){for(e&=~Hc,e&=~Oo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Tt(e),r=1<<n;t[n]=-1,e&=~r}}function Wf(t){if(Q&6)throw Error(A(327));Or();var e=Ea(t,0);if(!(e&1))return qe(t,ue()),null;var n=Za(t,e);if(t.tag!==0&&n===2){var r=hu(t);r!==0&&(e=r,n=zu(t,r))}if(n===1)throw n=ss,Wn(t,0),gn(t,e),qe(t,ue()),n;if(n===6)throw Error(A(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Zn(t,Ve,Wt),qe(t,ue()),null}function Wc(t,e){var n=Q;Q|=1;try{return t(e)}finally{Q=n,Q===0&&(Ur=ue()+500,Po&&jn())}}function er(t){_n!==null&&_n.tag===0&&!(Q&6)&&Or();var e=Q;Q|=1;var n=ft.transition,r=X;try{if(ft.transition=null,X=1,t)return t()}finally{X=r,ft.transition=n,Q=e,!(Q&6)&&jn()}}function qc(){Ye=Er.current,ne(Er)}function Wn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,C_(n)),de!==null)for(n=de.return;n!==null;){var r=n;switch(xc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ta();break;case 3:$r(),ne(Ke),ne(je),$c();break;case 5:Lc(r);break;case 4:$r();break;case 13:ne(ie);break;case 19:ne(ie);break;case 10:Rc(r.type._context);break;case 22:case 23:qc()}n=n.return}if(ve=t,de=t=xn(t.current,null),Se=Ye=e,he=0,ss=null,Hc=Oo=Yn=0,Ve=Mi=null,Vn!==null){for(e=0;e<Vn.length;e++)if(n=Vn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Vn=null}return t}function qm(t,e){do{var n=de;try{if(Ac(),sa.current=La,Da){for(var r=se.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Da=!1}if(Xn=0,ge=fe=se=null,Li=!1,ns=0,Vc.current=null,n===null||n.return===null){he=1,ss=e,de=null;break}e:{var s=t,a=n.return,o=n,l=e;if(e=Se,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=o,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=jf(a);if(y!==null){y.flags&=-257,Df(y,a,o,s,e),y.mode&1&&Nf(s,c,e),e=y,l=c;var b=e.updateQueue;if(b===null){var S=new Set;S.add(l),e.updateQueue=S}else b.add(l);break e}else{if(!(e&1)){Nf(s,c,e),Qc();break e}l=Error(A(426))}}else if(re&&o.mode&1){var C=jf(a);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Df(C,a,o,s,e),Ic(Mr(l,o));break e}}s=l=Mr(l,o),he!==4&&(he=2),Mi===null?Mi=[s]:Mi.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=Am(s,l,e);Pf(s,v);break e;case 1:o=l;var g=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Pn===null||!Pn.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var P=Rm(s,o,e);Pf(s,P);break e}}s=s.return}while(s!==null)}Jm(n)}catch(x){e=x,de===n&&n!==null&&(de=n=n.return);continue}break}while(!0)}function Qm(){var t=$a.current;return $a.current=La,t===null?La:t}function Qc(){(he===0||he===3||he===2)&&(he=4),ve===null||!(Yn&268435455)&&!(Oo&268435455)||gn(ve,Se)}function Za(t,e){var n=Q;Q|=2;var r=Qm();(ve!==t||Se!==e)&&(Wt=null,Wn(t,e));do try{G_();break}catch(i){qm(t,i)}while(!0);if(Ac(),Q=n,$a.current=r,de!==null)throw Error(A(261));return ve=null,Se=0,he}function G_(){for(;de!==null;)Gm(de)}function J_(){for(;de!==null&&!Ev();)Gm(de)}function Gm(t){var e=Ym(t.alternate,t,Ye);t.memoizedProps=t.pendingProps,e===null?Jm(t):de=e,Vc.current=null}function Jm(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=V_(n,e),n!==null){n.flags&=32767,de=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{he=6,de=null;return}}else if(n=B_(n,e,Ye),n!==null){de=n;return}if(e=e.sibling,e!==null){de=e;return}de=e=t}while(e!==null);he===0&&(he=5)}function Zn(t,e,n){var r=X,i=ft.transition;try{ft.transition=null,X=1,X_(t,e,n,r)}finally{ft.transition=i,X=r}return null}function X_(t,e,n,r){do Or();while(_n!==null);if(Q&6)throw Error(A(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(A(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Rv(t,s),t===ve&&(de=ve=null,Se=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Hs||(Hs=!0,ey(ba,function(){return Or(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ft.transition,ft.transition=null;var a=X;X=1;var o=Q;Q|=4,Vc.current=null,K_(t,n),Hm(n,t),v_(_u),ka=!!vu,_u=vu=null,t.current=n,W_(n),kv(),Q=o,X=a,ft.transition=s}else t.current=n;if(Hs&&(Hs=!1,_n=t,Ua=i),s=t.pendingLanes,s===0&&(Pn=null),Pv(n.stateNode),qe(t,ue()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ma)throw Ma=!1,t=Uu,Uu=null,t;return Ua&1&&t.tag!==0&&Or(),s=t.pendingLanes,s&1?t===Zu?Ui++:(Ui=0,Zu=t):Ui=0,jn(),null}function Or(){if(_n!==null){var t=Op(Ua),e=ft.transition,n=X;try{if(ft.transition=null,X=16>t?16:t,_n===null)var r=!1;else{if(t=_n,_n=null,Ua=0,Q&6)throw Error(A(331));var i=Q;for(Q|=4,$=t.current;$!==null;){var s=$,a=s.child;if($.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for($=c;$!==null;){var d=$;switch(d.tag){case 0:case 11:case 15:$i(8,d,s)}var p=d.child;if(p!==null)p.return=d,$=p;else for(;$!==null;){d=$;var h=d.sibling,y=d.return;if(Fm(d),d===c){$=null;break}if(h!==null){h.return=y,$=h;break}$=y}}}var b=s.alternate;if(b!==null){var S=b.child;if(S!==null){b.child=null;do{var C=S.sibling;S.sibling=null,S=C}while(S!==null)}}$=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,$=a;else e:for(;$!==null;){if(s=$,s.flags&2048)switch(s.tag){case 0:case 11:case 15:$i(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,$=v;break e}$=s.return}}var g=t.current;for($=g;$!==null;){a=$;var E=a.child;if(a.subtreeFlags&2064&&E!==null)E.return=a,$=E;else e:for(a=g;$!==null;){if(o=$,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Io(9,o)}}catch(x){oe(o,o.return,x)}if(o===a){$=null;break e}var P=o.sibling;if(P!==null){P.return=o.return,$=P;break e}$=o.return}}if(Q=i,jn(),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(bo,t)}catch{}r=!0}return r}finally{X=n,ft.transition=e}}return!1}function qf(t,e,n){e=Mr(n,e),e=Am(t,e,1),t=Cn(t,e,1),e=Ue(),t!==null&&(gs(t,1,e),qe(t,e))}function oe(t,e,n){if(t.tag===3)qf(t,t,n);else for(;e!==null;){if(e.tag===3){qf(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Pn===null||!Pn.has(r))){t=Mr(n,t),t=Rm(e,t,1),e=Cn(e,t,1),t=Ue(),e!==null&&(gs(e,1,t),qe(e,t));break}}e=e.return}}function Y_(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ue(),t.pingedLanes|=t.suspendedLanes&n,ve===t&&(Se&n)===n&&(he===4||he===3&&(Se&130023424)===Se&&500>ue()-Kc?Wn(t,0):Hc|=n),qe(t,e)}function Xm(t,e){e===0&&(t.mode&1?(e=Ds,Ds<<=1,!(Ds&130023424)&&(Ds=4194304)):e=1);var n=Ue();t=nn(t,e),t!==null&&(gs(t,e,n),qe(t,n))}function ew(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Xm(t,n)}function tw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(A(314))}r!==null&&r.delete(e),Xm(t,n)}var Ym;Ym=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ke.current)He=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return He=!1,F_(t,e,n);He=!!(t.flags&131072)}else He=!1,re&&e.flags&1048576&&nm(e,Oa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;oa(t,e),t=e.pendingProps;var i=jr(e,je.current);Ir(e,n),i=Uc(null,e,r,t,i,n);var s=Zc();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,We(r)?(s=!0,xa(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,jc(e),i.updater=To,e.stateNode=i,i._reactInternals=e,xu(e,r,t,n),e=Au(null,e,r,!0,s,n)):(e.tag=0,re&&s&&Tc(e),Me(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(oa(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=rw(r),t=St(r,t),i){case 0:e=Ou(null,e,r,t,n);break e;case 1:e=Mf(null,e,r,t,n);break e;case 11:e=Lf(null,e,r,t,n);break e;case 14:e=$f(null,e,r,St(r.type,t),n);break e}throw Error(A(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:St(r,i),Ou(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:St(r,i),Mf(t,e,r,i,n);case 3:e:{if(Lm(e),t===null)throw Error(A(387));r=e.pendingProps,s=e.memoizedState,i=s.element,am(t,e),Na(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Mr(Error(A(423)),e),e=Uf(t,e,r,n,i);break e}else if(r!==i){i=Mr(Error(A(424)),e),e=Uf(t,e,r,n,i);break e}else for(et=Sn(e.stateNode.containerInfo.firstChild),nt=e,re=!0,Pt=null,n=cm(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Dr(),r===i){e=rn(t,e,n);break e}Me(t,e,r,n)}e=e.child}return e;case 5:return dm(e),t===null&&Cu(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,wu(r,i)?a=null:s!==null&&wu(r,s)&&(e.flags|=32),Dm(t,e),Me(t,e,a,n),e.child;case 6:return t===null&&Cu(e),null;case 13:return $m(t,e,n);case 4:return Dc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Lr(e,null,r,n):Me(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:St(r,i),Lf(t,e,r,i,n);case 7:return Me(t,e,e.pendingProps,n),e.child;case 8:return Me(t,e,e.pendingProps.children,n),e.child;case 12:return Me(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Y(Aa,r._currentValue),r._currentValue=a,s!==null)if(It(s.value,a)){if(s.children===i.children&&!Ke.current){e=rn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Xt(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Pu(s.return,n,e),o.lanes|=n;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(A(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),Pu(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Me(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ir(e,n),i=pt(i),r=r(i),e.flags|=1,Me(t,e,r,n),e.child;case 14:return r=e.type,i=St(r,e.pendingProps),i=St(r.type,i),$f(t,e,r,i,n);case 15:return Nm(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:St(r,i),oa(t,e),e.tag=1,We(r)?(t=!0,xa(e)):t=!1,Ir(e,n),lm(e,r,i),xu(e,r,i,n),Au(null,e,r,!0,t,n);case 19:return Mm(t,e,n);case 22:return jm(t,e,n)}throw Error(A(156,e.tag))};function ey(t,e){return Pp(t,e)}function nw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dt(t,e,n,r){return new nw(t,e,n,r)}function Gc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rw(t){if(typeof t=="function")return Gc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===mc)return 11;if(t===yc)return 14}return 2}function xn(t,e){var n=t.alternate;return n===null?(n=dt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ca(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")Gc(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case fr:return qn(n.children,i,s,e);case pc:a=8,i|=8;break;case Xl:return t=dt(12,n,e,i|2),t.elementType=Xl,t.lanes=s,t;case Yl:return t=dt(13,n,e,i),t.elementType=Yl,t.lanes=s,t;case eu:return t=dt(19,n,e,i),t.elementType=eu,t.lanes=s,t;case up:return Ao(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case op:a=10;break e;case lp:a=9;break e;case mc:a=11;break e;case yc:a=14;break e;case pn:a=16,r=null;break e}throw Error(A(130,t==null?t:typeof t,""))}return e=dt(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function qn(t,e,n,r){return t=dt(7,t,r,e),t.lanes=n,t}function Ao(t,e,n,r){return t=dt(22,t,r,e),t.elementType=up,t.lanes=n,t.stateNode={isHidden:!1},t}function Rl(t,e,n){return t=dt(6,t,null,e),t.lanes=n,t}function Nl(t,e,n){return e=dt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function iw(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hl(0),this.expirationTimes=hl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Jc(t,e,n,r,i,s,a,o,l){return t=new iw(t,e,n,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=dt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jc(s),t}function sw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ty(t){if(!t)return On;t=t._reactInternals;e:{if(ir(t)!==t||t.tag!==1)throw Error(A(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(We(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(A(171))}if(t.tag===1){var n=t.type;if(We(n))return em(t,n,e)}return e}function ny(t,e,n,r,i,s,a,o,l){return t=Jc(n,r,!0,t,i,s,a,o,l),t.context=ty(null),n=t.current,r=Ue(),i=Tn(n),s=Xt(r,i),s.callback=e??null,Cn(n,s,i),t.current.lanes=i,gs(t,i,r),qe(t,r),t}function Ro(t,e,n,r){var i=e.current,s=Ue(),a=Tn(i);return n=ty(n),e.context===null?e.context=n:e.pendingContext=n,e=Xt(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Cn(i,e,a),t!==null&&(xt(t,i,a,s),ia(t,i,a)),a}function za(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Qf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Xc(t,e){Qf(t,e),(t=t.alternate)&&Qf(t,e)}function aw(){return null}var ry=typeof reportError=="function"?reportError:function(t){console.error(t)};function Yc(t){this._internalRoot=t}No.prototype.render=Yc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(A(409));Ro(t,e,null,null)};No.prototype.unmount=Yc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;er(function(){Ro(null,t,null,null)}),e[tn]=null}};function No(t){this._internalRoot=t}No.prototype.unstable_scheduleHydration=function(t){if(t){var e=Np();t={blockedOn:null,target:t,priority:e};for(var n=0;n<yn.length&&e!==0&&e<yn[n].priority;n++);yn.splice(n,0,t),n===0&&Dp(t)}};function ed(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function jo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Gf(){}function ow(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=za(a);s.call(c)}}var a=ny(e,r,t,0,null,!1,!1,"",Gf);return t._reactRootContainer=a,t[tn]=a.current,Ji(t.nodeType===8?t.parentNode:t),er(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var c=za(l);o.call(c)}}var l=Jc(t,0,!1,null,null,!1,!1,"",Gf);return t._reactRootContainer=l,t[tn]=l.current,Ji(t.nodeType===8?t.parentNode:t),er(function(){Ro(e,l,n,r)}),l}function Do(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=za(a);o.call(l)}}Ro(e,a,t,i)}else a=ow(n,e,t,i,r);return za(a)}Ap=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ci(e.pendingLanes);n!==0&&(_c(e,n|1),qe(e,ue()),!(Q&6)&&(Ur=ue()+500,jn()))}break;case 13:er(function(){var r=nn(t,1);if(r!==null){var i=Ue();xt(r,t,1,i)}}),Xc(t,1)}};wc=function(t){if(t.tag===13){var e=nn(t,134217728);if(e!==null){var n=Ue();xt(e,t,134217728,n)}Xc(t,134217728)}};Rp=function(t){if(t.tag===13){var e=Tn(t),n=nn(t,e);if(n!==null){var r=Ue();xt(n,t,e,r)}Xc(t,e)}};Np=function(){return X};jp=function(t,e){var n=X;try{return X=t,e()}finally{X=n}};cu=function(t,e,n){switch(e){case"input":if(ru(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Co(r);if(!i)throw Error(A(90));dp(r),ru(r,i)}}}break;case"textarea":hp(t,n);break;case"select":e=n.value,e!=null&&Cr(t,!!n.multiple,e,!1)}};wp=Wc;bp=er;var lw={usingClientEntryPoint:!1,Events:[_s,yr,Co,vp,_p,Wc]},si={findFiberByHostInstance:Bn,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},uw={bundleType:si.bundleType,version:si.version,rendererPackageName:si.rendererPackageName,rendererConfig:si.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:an.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Sp(t),t===null?null:t.stateNode},findFiberByHostInstance:si.findFiberByHostInstance||aw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ks=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ks.isDisabled&&Ks.supportsFiber)try{bo=Ks.inject(uw),Mt=Ks}catch{}}it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lw;it.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ed(e))throw Error(A(200));return sw(t,e,null,n)};it.createRoot=function(t,e){if(!ed(t))throw Error(A(299));var n=!1,r="",i=ry;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Jc(t,1,!1,null,null,n,!1,r,i),t[tn]=e.current,Ji(t.nodeType===8?t.parentNode:t),new Yc(e)};it.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(A(188)):(t=Object.keys(t).join(","),Error(A(268,t)));return t=Sp(e),t=t===null?null:t.stateNode,t};it.flushSync=function(t){return er(t)};it.hydrate=function(t,e,n){if(!jo(e))throw Error(A(200));return Do(null,t,e,!0,n)};it.hydrateRoot=function(t,e,n){if(!ed(t))throw Error(A(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=ry;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=ny(e,null,t,1,n??null,i,!1,s,a),t[tn]=e.current,Ji(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new No(e)};it.render=function(t,e,n){if(!jo(e))throw Error(A(200));return Do(null,t,e,!1,n)};it.unmountComponentAtNode=function(t){if(!jo(t))throw Error(A(40));return t._reactRootContainer?(er(function(){Do(null,null,t,!1,function(){t._reactRootContainer=null,t[tn]=null})}),!0):!1};it.unstable_batchedUpdates=Wc;it.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!jo(n))throw Error(A(200));if(t==null||t._reactInternals===void 0)throw Error(A(38));return Do(t,e,n,!1,r)};it.version="18.2.0-next-9e3b772b8-20220608";function iy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iy)}catch(t){console.error(t)}}iy(),np.exports=it;var cw=np.exports,Jf=cw;Gl.createRoot=Jf.createRoot,Gl.hydrateRoot=Jf.hydrateRoot;var dw=[["Wealth Generation","Wealth Accumulation","Investing Knowledge","Future Planning","Other"],["A"],["Substantially Greater","Somewhat Greater","About The Same","Lower Than Today"],["Very Stable but Lower Growth","Mix of Stable and Higher Growth","High Growth Potential with Risks","Not Quite Sure, Need Help"],["Optimistic","Somewhat Optimistic","Uncertain","Somewhat Pessimistic","Pessimistic"]];function fw({questionNumber:t,questionSetCount:e,QA:n,setQA:r,question:i}){var s=dw[t];function a(o){var l="Question: "+i+" Human Answer: "+o;r(c=>c.concat(" ",l)),e(t+1)}return Z.jsx(Z.Fragment,{children:Z.jsx("ul",{className:"answer-list",children:s.map(o=>Z.jsx("div",{className:"answer-card",children:Z.jsx("li",{className:"answer-list-item",onClick:()=>a(o),children:o},o)},o+"-card"))})})}function hw({questionNumber:t,questionSetCount:e,QA:n,setQA:r,question:i}){const[s,a]=ke.useState(0);function o(){a(s+1)}function l(){s>0&&a(s-1)}function c(d){var p="Question: "+i+" Human Answer: "+d;r(h=>h.concat(" ",p)),e(t+1)}return Z.jsx(Z.Fragment,{children:Z.jsxs("div",{className:"year-answer-card",children:[Z.jsx("div",{className:"top-year-card",children:Z.jsxs("div",{className:"year-counter",children:[Z.jsx("h1",{className:"year-display",children:s}),Z.jsx("h2",{className:"year-text",children:"years"})]})}),Z.jsxs("div",{className:"bottom-year-card",children:[Z.jsx("button",{className:"year-button",onClick:o,children:"+"}),Z.jsx("button",{className:"year-button",onClick:l,children:"-"})]}),Z.jsx("div",{className:"year-card-submit",children:Z.jsx("button",{onClick:()=>c(s+" years"),children:"Submit"})})]})})}function pw({questionNumber:t,questionSetCount:e,setAPI:n}){const r=i=>{n(i.target.value)};return Z.jsxs(Z.Fragment,{children:[Z.jsx("input",{type:"text",onChange:r}),Z.jsx("button",{onClick:()=>e(t+1),children:"Submit"})]})}var mw=["What is your financial Goal?","What time frame do you envision to achieve your financial goal?","In five years how do you forsee your standard of living compared to today?","Which investment strategy would you be most comfortable with?","How optimistic do you feel about the long term growth of the economy?","Input OpenAI API key"];function yw({questionNumber:t,questionSetCount:e,QA:n,setQA:r,setApiKey:i}){var s=mw[t],a;return t==1?a=Z.jsx(hw,{questionNumber:t,questionSetCount:e,QA:n,setQA:r,question:s}):t==5?a=Z.jsx(pw,{questionNumber:t,questionSetCount:e,setAPI:i}):a=Z.jsx(fw,{questionNumber:t,questionSetCount:e,QA:n,setQA:r,question:s}),Z.jsx(Z.Fragment,{children:Z.jsxs("div",{className:"question-card",children:[Z.jsx("div",{className:"question-card-header",children:Z.jsx("h1",{className:"question-title",children:s})}),a]})})}function Xf({fetchMessage:t,setBotMessage:e}){const[n,r]=ke.useState(!0),[i,s]=ke.useState("");function a(o){s(o),e(o)}return ke.useEffect(()=>{async function o(){const l=await t();r(!1),a(l)}o()},[t]),Z.jsx("div",{className:"message-container",children:Z.jsx("div",{className:"bot-message",children:n?"...":i})})}function gw({text:t}){return Z.jsx("div",{className:"message-container",children:Z.jsx("div",{className:"user-message",children:t})})}function vw({messages:t}){const e=ke.useRef(null);return ke.useEffect(()=>{e.current.scrollIntoView({block:"end",behavior:"smooth"})}),Z.jsxs("div",{className:"messages",children:[t,Z.jsx("div",{id:"el",ref:e})]})}function _w({onSend:t}){const[e,n]=ke.useState(""),r=s=>{n(s.target.value)},i=s=>{s.preventDefault(),t(e),n("")};return Z.jsx("div",{className:"input",children:Z.jsxs("form",{onSubmit:i,children:[Z.jsx("input",{type:"text",onChange:r,value:e,placeholder:"Enter your message here"}),Z.jsx("button",{children:Z.jsx("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 500 500",children:Z.jsx("g",{children:Z.jsx("g",{children:Z.jsx("polygon",{points:"0,497.25 535.5,267.75 0,38.25 0,216.75 382.5,267.75 0,318.75"})})})})})]})})}const ur="4.20.1";let Yf=!1,Zi,sy,ay,Bu,oy,ly,uy,cy,dy;function ww(t,e={auto:!1}){if(Yf)throw new Error(`you must \`import 'openai/shims/${t.kind}'\` before importing anything else from openai`);if(Zi)throw new Error(`can't \`import 'openai/shims/${t.kind}'\` after \`import 'openai/shims/${Zi}'\``);Yf=e.auto,Zi=t.kind,sy=t.fetch,t.Request,t.Response,t.Headers,ay=t.FormData,t.Blob,Bu=t.File,oy=t.ReadableStream,ly=t.getMultipartRequestOptions,uy=t.getDefaultAgent,cy=t.fileFromPath,dy=t.isFsReadStream}class bw{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function Ew({manuallyImported:t}={}){const e=t?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,i,s;try{n=fetch,r=Request,i=Response,s=Headers}catch(a){throw new Error(`this environment is missing the following Web Fetch API type: ${a.message}. ${e}`)}return{kind:"web",fetch:n,Request:r,Response:i,Headers:s,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(a,o)=>({...o,body:new bw(a)}),getDefaultAgent:a=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:a=>!1}}Zi||ww(Ew(),{auto:!0});let G=class extends Error{},Qe=class Vu extends G{constructor(e,n,r,i){super(`${Vu.makeMessage(e,n,r)}`),this.status=e,this.headers=i;const s=n;this.error=s,this.code=s==null?void 0:s.code,this.param=s==null?void 0:s.param,this.type=s==null?void 0:s.type}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e)return new bs({cause:Ku(n)});const s=n==null?void 0:n.error;return e===400?new td(e,s,r,i):e===401?new nd(e,s,r,i):e===403?new rd(e,s,r,i):e===404?new id(e,s,r,i):e===409?new sd(e,s,r,i):e===422?new ad(e,s,r,i):e===429?new od(e,s,r,i):e>=500?new ld(e,s,r,i):new Vu(e,s,r,i)}},An=class extends Qe{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}},bs=class extends Qe{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,n&&(this.cause=n)}},Lo=class extends bs{constructor({message:e}={}){super({message:e??"Request timed out."})}},td=class extends Qe{constructor(){super(...arguments),this.status=400}},nd=class extends Qe{constructor(){super(...arguments),this.status=401}},rd=class extends Qe{constructor(){super(...arguments),this.status=403}},id=class extends Qe{constructor(){super(...arguments),this.status=404}},sd=class extends Qe{constructor(){super(...arguments),this.status=409}},ad=class extends Qe{constructor(){super(...arguments),this.status=422}},od=class extends Qe{constructor(){super(...arguments),this.status=429}},ld=class extends Qe{};const kw=Object.freeze(Object.defineProperty({__proto__:null,APIConnectionError:bs,APIConnectionTimeoutError:Lo,APIError:Qe,APIUserAbortError:An,AuthenticationError:nd,BadRequestError:td,ConflictError:sd,InternalServerError:ld,NotFoundError:id,OpenAIError:G,PermissionDeniedError:rd,RateLimitError:od,UnprocessableEntityError:ad},Symbol.toStringTag,{value:"Module"}));class wn{constructor(e,n){this.iterator=e,this.controller=n}static fromSSEResponse(e,n){let r=!1;const i=new Sw;async function*s(){if(!e.body)throw n.abort(),new G("Attempted to iterate over a response with no body");const o=new tr,l=eh(e.body);for await(const c of l)for(const d of o.decode(c)){const p=i.decode(d);p&&(yield p)}for(const c of o.flush()){const d=i.decode(c);d&&(yield d)}}async function*a(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let o=!1;try{for await(const l of s())if(!o){if(l.data.startsWith("[DONE]")){o=!0;continue}if(l.event===null){let c;try{c=JSON.parse(l.data)}catch(d){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),d}if(c&&c.error)throw new Qe(void 0,c.error,void 0,void 0);yield c}}o=!0}catch(l){if(l instanceof Error&&l.name==="AbortError")return;throw l}finally{o||n.abort()}}return new wn(a,n)}static fromReadableStream(e,n){let r=!1;async function*i(){const a=new tr,o=eh(e);for await(const l of o)for(const c of a.decode(l))yield c;for(const l of a.flush())yield l}async function*s(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let a=!1;try{for await(const o of i())a||o&&(yield JSON.parse(o));a=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{a||n.abort()}}return new wn(s,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const a=r.next();e.push(a),n.push(a)}return s.shift()}});return[new wn(()=>i(e),this.controller),new wn(()=>i(n),this.controller)]}toReadableStream(){const e=this;let n;const r=new TextEncoder;return new oy({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:s,done:a}=await n.next();if(a)return i.close();const o=r.encode(JSON.stringify(s)+`
`);i.enqueue(o)}catch(s){i.error(s)}},async cancel(){var i;await((i=n.return)==null?void 0:i.call(n))}})}}class Sw{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=Cw(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}class tr{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let n=this.decodeText(e);if(this.trailingCR&&(n="\r"+n,this.trailingCR=!1),n.endsWith("\r")&&(this.trailingCR=!0,n=n.slice(0,-1)),!n)return[];const r=tr.NEWLINE_CHARS.has(n[n.length-1]||"");let i=n.split(tr.NEWLINE_REGEXP);return i.length===1&&!r?(this.buffer.push(i[0]),[]):(this.buffer.length>0&&(i=[this.buffer.join("")+i[0],...i.slice(1)],this.buffer=[]),r||(this.buffer=[i.pop()||""]),i)}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new G(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new G(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new G("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}tr.NEWLINE_CHARS=new Set([`
`,"\r","\v","\f","","","","","\u2028","\u2029"]);tr.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;function Cw(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}function eh(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const fy=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",Pw=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&hy(t),hy=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Tw=t=>Pw(t)||fy(t)||dy(t);async function py(t,e,n={}){var i;if(t=await t,fy(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file"),new Bu([s],e,n)}const r=await xw(t);if(e||(e=Ow(t)??"unknown_file"),!n.type){const s=(i=r[0])==null?void 0:i.type;typeof s=="string"&&(n={...n,type:s})}return new Bu(r,e,n)}async function xw(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(hy(t))e.push(await t.arrayBuffer());else if(Aw(t))for await(const r of t)e.push(r);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${(n=t==null?void 0:t.constructor)==null?void 0:n.name}; props: ${Iw(t)}`);return e}function Iw(t){return`[${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}function Ow(t){var e;return jl(t.name)||jl(t.filename)||((e=jl(t.path))==null?void 0:e.split(/[\\/]/).pop())}const jl=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},Aw=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",th=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody",as=async t=>{const e=await Rw(t.body);return ly(e,t)},Rw=async t=>{const e=new ay;return await Promise.all(Object.entries(t||{}).map(([n,r])=>Hu(e,n,r))),e},Hu=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(Tw(n)){const r=await py(n);t.append(e,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>Hu(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>Hu(t,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var da={},Nw=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},jw=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Ws;async function my(t){const{response:e}=t;if(t.options.stream)return zi("response",e.status,e.url,e.headers,e.body),wn.fromSSEResponse(e,t.controller);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const n=e.headers.get("content-type");if(n!=null&&n.includes("application/json")){const i=await e.json();return zi("response",e.status,e.url,e.headers,i),i}const r=await e.text();return zi("response",e.status,e.url,e.headers,r),r}class $o extends Promise{constructor(e,n=my){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=n}_thenUnwrap(e){return new $o(this.responsePromise,async n=>e(await this.parseResponse(n)))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class Dw{constructor({baseURL:e,maxRetries:n=2,timeout:r=6e5,httpAgent:i,fetch:s}){this.baseURL=e,this.maxRetries=Dl("maxRetries",n),this.timeout=Dl("timeout",r),this.httpAgent=i,this.fetch=s??sy}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...zw(),...this.authHeaders(e)}}validateHeaders(e,n){}defaultIdempotencyKey(){return`stainless-node-retry-${Kw()}`}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>({method:e,path:n,...i})))}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}return null}buildRequest(e){var b;const{method:n,path:r,query:i,headers:s={}}=e,a=th(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,o=this.calculateContentLength(a),l=this.buildURL(r,i);"timeout"in e&&Dl("timeout",e.timeout);const c=e.timeout??this.timeout,d=e.httpAgent??this.httpAgent??uy(l),p=c+1e3;typeof((b=d==null?void 0:d.options)==null?void 0:b.timeout)=="number"&&p>(d.options.timeout??0)&&(d.options.timeout=p),this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const h={...o&&{"Content-Length":o},...this.defaultHeaders(e),...s};th(e.body)&&Zi!=="node"&&delete h["Content-Type"],Object.keys(h).forEach(S=>h[S]===null&&delete h[S]);const y={method:n,...a&&{body:a},headers:h,...d&&{agent:d},signal:e.signal??null};return this.validateHeaders(h,s),{req:y,url:l,timeout:c}}async prepareRequest(e,{url:n,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(n=>[...n])):{...e}:{}}makeStatusError(e,n,r,i){return Qe.generate(e,n,r,i)}request(e,n=null){return new $o(this.makeRequest(e,n))}async makeRequest(e,n){var d,p;const r=await e;n==null&&(n=r.maxRetries??this.maxRetries);const{req:i,url:s,timeout:a}=this.buildRequest(r);if(await this.prepareRequest(i,{url:s,options:r}),zi("request",s,r,i.headers),(d=r.signal)!=null&&d.aborted)throw new An;const o=new AbortController,l=await this.fetchWithTimeout(s,i,a,o).catch(Ku);if(l instanceof Error){if((p=r.signal)!=null&&p.aborted)throw new An;if(n)return this.retryRequest(r,n);throw l.name==="AbortError"?new Lo:new bs({cause:l})}const c=$w(l.headers);if(!l.ok){if(n&&this.shouldRetry(l))return this.retryRequest(r,n,c);const h=await l.text().catch(C=>Ku(C).message),y=Fw(h),b=y?void 0:h;throw zi("response",l.status,s,c,b),this.makeStatusError(l.status,y,b,c)}return{response:l,options:r,controller:o}}requestAPIList(e,n){const r=this.makeRequest(n,null);return new Lw(this,r,e)}buildURL(e,n){const r=Vw(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return vy(i)||(n={...i,...n}),n&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new G(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,n,r,i){const{signal:s,...a}=n||{};s&&s.addEventListener("abort",()=>i.abort());const o=setTimeout(()=>i.abort(),r);return this.getRequestClient().fetch.call(void 0,e,{signal:i.signal,...a}).finally(()=>{clearTimeout(o)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r){let i;const s=r==null?void 0:r["retry-after"];if(s){const a=parseInt(s);Number.isNaN(a)?i=Date.parse(s)-Date.now():i=a*1e3}if(!i||!Number.isInteger(i)||i<=0||i>60*1e3){const a=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,a)}return await gy(i),this.makeRequest(e,n-1)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,a=Math.min(.5*Math.pow(2,s),8),o=1-Math.random()*.25;return a*o*1e3}getUserAgent(){return`${this.constructor.name}/JS ${ur}`}}class yy{constructor(e,n,r,i){Ws.set(this,void 0),Nw(this,Ws,e,"f"),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new G("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in e)n.query={...n.query,...e.params};else if("url"in e){const r=[...Object.entries(n.query||{}),...e.url.searchParams.entries()];for(const[i,s]of r)e.url.searchParams.set(i,s);n.query=void 0,n.path=e.url.toString()}return await jw(this,Ws,"f").requestAPIList(this.constructor,n)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Ws=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class Lw extends $o{constructor(e,n,r){super(n,async i=>new r(e,i.response,await my(i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}const $w=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,n){const r=n.toString();return e[r.toLowerCase()]||e[r]}}),Mw={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryResponse:!0},Ft=t=>typeof t=="object"&&t!==null&&!vy(t)&&Object.keys(t).every(e=>Hw(Mw,e)),Uw=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ur,"X-Stainless-OS":rh(Deno.build.os),"X-Stainless-Arch":nh(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":Deno.version};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ur,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ur,"X-Stainless-OS":rh(process.platform),"X-Stainless-Arch":nh(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=Zw();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ur,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ur,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Zw(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,a=r[3]||0;return{browser:e,version:`${i}.${s}.${a}`}}}return null}const nh=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",rh=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let ih;const zw=()=>ih??(ih=Uw()),Fw=t=>{try{return JSON.parse(t)}catch{return}},Bw=new RegExp("^(?:[a-z]+:)?//","i"),Vw=t=>Bw.test(t),gy=t=>new Promise(e=>setTimeout(e,t)),Dl=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new G(`${t} must be an integer`);if(e<0)throw new G(`${t} must be a positive integer`);return e},Ku=t=>t instanceof Error?t:new Error(t),sh=t=>{var e,n;if(typeof process<"u")return(da==null?void 0:da[t])??void 0;if(typeof Deno<"u")return(n=(e=Deno.env)==null?void 0:e.get)==null?void 0:n.call(e,t)};function vy(t){if(!t)return!0;for(const e in t)return!1;return!0}function Hw(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function zi(t,...e){typeof process<"u"&&da.DEBUG==="true"&&console.log(`OpenAI:DEBUG:${t}`,...e)}const Kw=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),Ww=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";class Mo extends yy{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data,this.object=r.object}getPaginatedItems(){return this.data}nextPageParams(){return null}nextPageInfo(){return null}}class on extends yy{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data}getPaginatedItems(){return this.data}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const n=Object.fromEntries(e.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){var n,r;if(!((n=this.data)!=null&&n.length))return null;const e=(r=this.data[this.data.length-1])==null?void 0:r.id;return e?{params:{after:e}}:null}}class ee{constructor(e){this._client=e}}let Fa=class extends ee{create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}};Fa||(Fa={});let Ba=class extends ee{constructor(){super(...arguments),this.completions=new Fa(this._client)}};(function(t){t.Completions=Fa})(Ba||(Ba={}));class Va extends ee{create(e,n){return this._client.post("/audio/speech",{body:e,...n,__binaryResponse:!0})}}Va||(Va={});class Ha extends ee{create(e,n){return this._client.post("/audio/transcriptions",as({body:e,...n}))}}Ha||(Ha={});class Ka extends ee{create(e,n){return this._client.post("/audio/translations",as({body:e,...n}))}}Ka||(Ka={});class Wa extends ee{constructor(){super(...arguments),this.transcriptions=new Ha(this._client),this.translations=new Ka(this._client),this.speech=new Va(this._client)}}(function(t){t.Transcriptions=Ha,t.Translations=Ka,t.Speech=Va})(Wa||(Wa={}));let qa=class extends ee{create(e,n,r){return this._client.post(`/assistants/${e}/files`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/assistants/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}list(e,n={},r){return Ft(n)?this.list(e,{},n):this._client.getAPIList(`/assistants/${e}/files`,ud,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}del(e,n,r){return this._client.delete(`/assistants/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}};class ud extends on{}(function(t){t.AssistantFilesPage=ud})(qa||(qa={}));class Qa extends ee{constructor(){super(...arguments),this.files=new qa(this._client)}create(e,n){return this._client.post("/assistants",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/assistants/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}list(e={},n){return Ft(e)?this.list({},e):this._client.getAPIList("/assistants",cd,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}del(e,n){return this._client.delete(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}}class cd extends on{}(function(t){t.AssistantsPage=cd,t.Files=qa,t.AssistantFilesPage=ud})(Qa||(Qa={}));function ah(t){return typeof t.parse=="function"}const os=t=>(t==null?void 0:t.role)==="assistant",_y=t=>(t==null?void 0:t.role)==="function",qw=t=>(t==null?void 0:t.role)==="tool";var wt=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},K=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},$e,fa,ha,Ti,xi,pa,Ii,Ht,Oi,ma,ya,cr,Wu,qu,Qu,Gu,Ju,Xu,wy,Yu;const oh=10;class by{constructor(){$e.add(this),this.controller=new AbortController,fa.set(this,void 0),ha.set(this,()=>{}),Ti.set(this,()=>{}),xi.set(this,void 0),pa.set(this,()=>{}),Ii.set(this,()=>{}),Ht.set(this,{}),this._chatCompletions=[],this.messages=[],Oi.set(this,!1),ma.set(this,!1),ya.set(this,!1),cr.set(this,!1),Xu.set(this,e=>{if(wt(this,ma,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new An),e instanceof An)return wt(this,ya,!0,"f"),this._emit("abort",e);if(e instanceof G)return this._emit("error",e);if(e instanceof Error){const n=new G(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new G(String(e)))}),wt(this,fa,new Promise((e,n)=>{wt(this,ha,e,"f"),wt(this,Ti,n,"f")}),"f"),wt(this,xi,new Promise((e,n)=>{wt(this,pa,e,"f"),wt(this,Ii,n,"f")}),"f"),K(this,fa,"f").catch(()=>{}),K(this,xi,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},K(this,Xu,"f"))},0)}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(r=e.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if(this.messages.push(e),n){if(this._emit("message",e),(_y(e)||qw(e))&&e.content)this._emit("functionCallResult",e.content);else if(os(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(os(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}_connected(){this.ended||(K(this,ha,"f").call(this),this._emit("connect"))}get ended(){return K(this,Oi,"f")}get errored(){return K(this,ma,"f")}get aborted(){return K(this,ya,"f")}abort(){this.controller.abort()}on(e,n){return(K(this,Ht,"f")[e]||(K(this,Ht,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=K(this,Ht,"f")[e];if(!r)return this;const i=r.findIndex(s=>s.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(K(this,Ht,"f")[e]||(K(this,Ht,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{wt(this,cr,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){wt(this,cr,!0,"f"),await K(this,xi,"f")}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new G("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),K(this,$e,"m",Wu).call(this)}async finalMessage(){return await this.done(),K(this,$e,"m",qu).call(this)}async finalFunctionCall(){return await this.done(),K(this,$e,"m",Qu).call(this)}async finalFunctionCallResult(){return await this.done(),K(this,$e,"m",Gu).call(this)}async totalUsage(){return await this.done(),K(this,$e,"m",Ju).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emit(e,...n){if(K(this,Oi,"f"))return;e==="end"&&(wt(this,Oi,!0,"f"),K(this,pa,"f").call(this));const r=K(this,Ht,"f")[e];if(r&&(K(this,Ht,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!K(this,cr,"f")&&!(r!=null&&r.length)&&Promise.reject(i),K(this,Ti,"f").call(this,i),K(this,Ii,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!K(this,cr,"f")&&!(r!=null&&r.length)&&Promise.reject(i),K(this,Ti,"f").call(this,i),K(this,Ii,"f").call(this,i),this._emit("end")}}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=this.messages[this.messages.length-1];n&&this._emit("finalMessage",n);const r=K(this,$e,"m",Wu).call(this);r&&this._emit("finalContent",r);const i=K(this,$e,"m",Qu).call(this);i&&this._emit("finalFunctionCall",i);const s=K(this,$e,"m",Gu).call(this);s!=null&&this._emit("finalFunctionCallResult",s),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",K(this,$e,"m",Ju).call(this))}async _createChatCompletion(e,n,r){const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),K(this,$e,"m",wy).call(this,n);const s=await e.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(s)}async _runChatCompletion(e,n,r){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,n,r)}async _runFunctions(e,n,r){var h;const i="function",{function_call:s="auto",stream:a,...o}=n,l=typeof s!="string"&&(s==null?void 0:s.name),{maxChatCompletions:c=oh}=r||{},d={};for(const y of n.functions)d[y.name||y.function.name]=y;const p=n.functions.map(y=>({name:y.name||y.function.name,parameters:y.parameters,description:y.description}));for(const y of n.messages)this._addMessage(y,!1);for(let y=0;y<c;++y){const S=(h=(await this._createChatCompletion(e,{...o,function_call:s,functions:p,messages:[...this.messages]},r)).choices[0])==null?void 0:h.message;if(!S)throw new G("missing message in ChatCompletion response");if(!S.function_call)return;const{name:C,arguments:v}=S.function_call,g=d[C];if(g){if(l&&l!==C){const j=`Invalid function_call: ${JSON.stringify(C)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,name:C,content:j});continue}}else{const j=`Invalid function_call: ${JSON.stringify(C)}. Available options are: ${p.map(D=>JSON.stringify(D.name)).join(", ")}. Please try again`;this._addMessage({role:i,name:C,content:j});continue}let E;try{E=ah(g)?await g.parse(v):v}catch(j){this._addMessage({role:i,name:C,content:j instanceof Error?j.message:String(j)});continue}const P=await g.function(E,this),x=K(this,$e,"m",Yu).call(this,P);if(this._addMessage({role:i,name:C,content:x}),l)return}}async _runTools(e,n,r){var h,y;const i="tool",{tool_choice:s="auto",stream:a,...o}=n,l=typeof s!="string"&&((h=s==null?void 0:s.function)==null?void 0:h.name),{maxChatCompletions:c=oh}=r||{},d={};for(const b of n.tools)b.type==="function"&&(d[b.function.name||b.function.function.name]=b.function);const p="tools"in n?n.tools.map(b=>b.type==="function"?{type:"function",function:{name:b.function.name||b.function.function.name,parameters:b.function.parameters,description:b.function.description}}:b):void 0;for(const b of n.messages)this._addMessage(b,!1);for(let b=0;b<c;++b){const C=(y=(await this._createChatCompletion(e,{...o,tool_choice:s,tools:p,messages:[...this.messages]},r)).choices[0])==null?void 0:y.message;if(!C)throw new G("missing message in ChatCompletion response");if(!C.tool_calls)return;for(const v of C.tool_calls){if(v.type!=="function")continue;const g=v.id,{name:E,arguments:P}=v.function,x=d[E];if(x){if(l&&l!==E){const H=`Invalid tool_call: ${JSON.stringify(E)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,tool_call_id:g,content:H});continue}}else{const H=`Invalid tool_call: ${JSON.stringify(E)}. Available options are: ${p.map(F=>JSON.stringify(F.function.name)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:g,content:H});continue}let j;try{j=ah(x)?await x.parse(P):P}catch(H){const F=H instanceof Error?H.message:String(H);this._addMessage({role:i,tool_call_id:g,content:F});continue}const D=await x.function(j,this),L=K(this,$e,"m",Yu).call(this,D);if(this._addMessage({role:i,tool_call_id:g,content:L}),l)return}}}}fa=new WeakMap,ha=new WeakMap,Ti=new WeakMap,xi=new WeakMap,pa=new WeakMap,Ii=new WeakMap,Ht=new WeakMap,Oi=new WeakMap,ma=new WeakMap,ya=new WeakMap,cr=new WeakMap,Xu=new WeakMap,$e=new WeakSet,Wu=function(){return K(this,$e,"m",qu).call(this).content},qu=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(os(n))return n}throw new G("stream ended without producing a ChatCompletionMessage with role=assistant")},Qu=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(os(n)&&(n!=null&&n.function_call))return n.function_call}},Gu=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(_y(n)&&n.content!=null)return n.content}},Ju=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},wy=function(e){if(e.n!=null&&e.n>1)throw new G("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Yu=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class ls extends by{static runFunctions(e,n,r){const i=new ls;return i._run(()=>i._runFunctions(e,n,r)),i}static runTools(e,n,r){const i=new ls;return i._run(()=>i._runTools(e,n,r)),i}_addMessage(e){super._addMessage(e),os(e)&&e.content&&this._emit("content",e.content)}}var bt=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Ll=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},jt,dn,$l,Ml,qs,lh;class us extends by{constructor(){super(...arguments),jt.add(this),dn.set(this,void 0)}get currentChatCompletionSnapshot(){return bt(this,dn,"f")}static fromReadableStream(e){const n=new us;return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const i=new us;return i._run(()=>i._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,n,r){var a;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),bt(this,jt,"m",$l).call(this);const s=await e.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const o of s)bt(this,jt,"m",Ml).call(this,o);if((a=s.controller.signal)!=null&&a.aborted)throw new An;return this._addChatCompletion(bt(this,jt,"m",qs).call(this))}async _fromReadableStream(e,n){var a;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),bt(this,jt,"m",$l).call(this),this._connected();const i=wn.fromReadableStream(e,this.controller);let s;for await(const o of i)s&&s!==o.id&&this._addChatCompletion(bt(this,jt,"m",qs).call(this)),bt(this,jt,"m",Ml).call(this,o),s=o.id;if((a=i.controller.signal)!=null&&a.aborted)throw new An;return this._addChatCompletion(bt(this,jt,"m",qs).call(this))}[(dn=new WeakMap,jt=new WeakSet,$l=function(){this.ended||Ll(this,dn,void 0,"f")},Ml=function(n){var a,o,l;if(this.ended)return;const r=bt(this,jt,"m",lh).call(this,n);this._emit("chunk",n,r);const i=(o=(a=n.choices[0])==null?void 0:a.delta)==null?void 0:o.content,s=(l=r.choices[0])==null?void 0:l.message;i!=null&&(s==null?void 0:s.role)==="assistant"&&(s!=null&&s.content)&&this._emit("content",i,s.content)},qs=function(){if(this.ended)throw new G("stream has ended, this shouldn't happen");const n=bt(this,dn,"f");if(!n)throw new G("request ended without sending any chunks");return Ll(this,dn,void 0,"f"),Qw(n)},lh=function(n){var r,i;let s=bt(this,dn,"f");const{choices:a,...o}=n;s?Object.assign(s,o):s=Ll(this,dn,{...o,choices:[]},"f");for(const{delta:l,finish_reason:c,index:d,...p}of n.choices){let h=s.choices[d];if(!h){s.choices[d]={finish_reason:c,index:d,message:l,...p};continue}if(c&&(h.finish_reason=c),Object.assign(h,p),!l)continue;const{content:y,function_call:b,role:S,tool_calls:C}=l;if(y&&(h.message.content=(h.message.content||"")+y),S&&(h.message.role=S),b&&(h.message.function_call?(b.name&&(h.message.function_call.name=b.name),b.arguments&&((r=h.message.function_call).arguments??(r.arguments=""),h.message.function_call.arguments+=b.arguments)):h.message.function_call=b),C){h.message.tool_calls||(h.message.tool_calls=[]);for(const{index:v,id:g,type:E,function:P}of C){const x=(i=h.message.tool_calls)[v]??(i[v]={});g&&(x.id=g),E&&(x.type=E),P&&(x.function??(x.function={arguments:""})),P!=null&&P.name&&(x.function.name=P.name),P!=null&&P.arguments&&(x.function.arguments+=P.arguments)}}}return s},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",i=>{const s=n.shift();s?s(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i(void 0);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise(s=>n.push(s)).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0})}}toReadableStream(){return new wn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Qw(t){const{id:e,choices:n,created:r,model:i}=t;return{id:e,choices:n.map(({message:s,finish_reason:a,index:o})=>{if(!a)throw new G(`missing finish_reason for choice ${o}`);const{content:l=null,function_call:c,tool_calls:d}=s,p=s.role;if(!p)throw new G(`missing role for choice ${o}`);if(c){const{arguments:h,name:y}=c;if(h==null)throw new G(`missing function_call.arguments for choice ${o}`);if(!y)throw new G(`missing function_call.name for choice ${o}`);return{message:{content:l,function_call:{arguments:h,name:y},role:p},finish_reason:a,index:o}}return d?{index:o,finish_reason:a,message:{role:p,content:l,tool_calls:d.map((h,y)=>{const{function:b,type:S,id:C}=h,{arguments:v,name:g}=b||{};if(C==null)throw new G(`missing choices[${o}].tool_calls[${y}].id
${Qs(t)}`);if(S==null)throw new G(`missing choices[${o}].tool_calls[${y}].type
${Qs(t)}`);if(g==null)throw new G(`missing choices[${o}].tool_calls[${y}].function.name
${Qs(t)}`);if(v==null)throw new G(`missing choices[${o}].tool_calls[${y}].function.arguments
${Qs(t)}`);return{id:C,type:S,function:{name:g,arguments:v}}})}}:{message:{content:l,role:p},finish_reason:a,index:o}}),created:r,model:i,object:"chat.completion"}}function Qs(t){return JSON.stringify(t)}class Ar extends us{static fromReadableStream(e){const n=new Ar;return n._run(()=>n._fromReadableStream(e)),n}static runFunctions(e,n,r){const i=new Ar;return i._run(()=>i._runFunctions(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}})),i}static runTools(e,n,r){const i=new Ar;return i._run(()=>i._runTools(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}})),i}}let Ey=class extends ee{runFunctions(e,n){return e.stream?Ar.runFunctions(this._client.chat.completions,e,n):ls.runFunctions(this._client.chat.completions,e,n)}runTools(e,n){return e.stream?Ar.runTools(this._client.chat.completions,e,n):ls.runTools(this._client.chat.completions,e,n)}stream(e,n){return us.createChatCompletion(this._client.chat.completions,e,n)}};class Ga extends ee{constructor(){super(...arguments),this.completions=new Ey(this._client)}}(function(t){t.Completions=Ey})(Ga||(Ga={}));let Ja=class extends ee{retrieve(e,n,r,i){return this._client.get(`/threads/${e}/messages/${n}/files/${r}`,{...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(e,n,r={},i){return Ft(r)?this.list(e,n,{},r):this._client.getAPIList(`/threads/${e}/messages/${n}/files`,dd,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}};class dd extends on{}(function(t){t.MessageFilesPage=dd})(Ja||(Ja={}));class Xa extends ee{constructor(){super(...arguments),this.files=new Ja(this._client)}create(e,n,r){return this._client.post(`/threads/${e}/messages`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}update(e,n,r,i){return this._client.post(`/threads/${e}/messages/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(e,n={},r){return Ft(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/messages`,fd,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}}class fd extends on{}(function(t){t.ThreadMessagesPage=fd,t.Files=Ja,t.MessageFilesPage=dd})(Xa||(Xa={}));class Ya extends ee{retrieve(e,n,r,i){return this._client.get(`/threads/${e}/runs/${n}/steps/${r}`,{...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(e,n,r={},i){return Ft(r)?this.list(e,n,{},r):this._client.getAPIList(`/threads/${e}/runs/${n}/steps`,hd,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}}class hd extends on{}(function(t){t.RunStepsPage=hd})(Ya||(Ya={}));class eo extends ee{constructor(){super(...arguments),this.steps=new Ya(this._client)}create(e,n,r){return this._client.post(`/threads/${e}/runs`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/threads/${e}/runs/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}update(e,n,r,i){return this._client.post(`/threads/${e}/runs/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(e,n={},r){return Ft(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/runs`,pd,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}cancel(e,n,r){return this._client.post(`/threads/${e}/runs/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}submitToolOutputs(e,n,r,i){return this._client.post(`/threads/${e}/runs/${n}/submit_tool_outputs`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}}class pd extends on{}(function(t){t.RunsPage=pd,t.Steps=Ya,t.RunStepsPage=hd})(eo||(eo={}));class to extends ee{constructor(){super(...arguments),this.runs=new eo(this._client),this.messages=new Xa(this._client)}create(e={},n){return Ft(e)?this.create({},e):this._client.post("/threads",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/threads/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}del(e,n){return this._client.delete(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}}(function(t){t.Runs=eo,t.RunsPage=pd,t.Messages=Xa,t.ThreadMessagesPage=fd})(to||(to={}));class no extends ee{constructor(){super(...arguments),this.chat=new Ga(this._client),this.assistants=new Qa(this._client),this.threads=new to(this._client)}}(function(t){t.Chat=Ga,t.Assistants=Qa,t.AssistantsPage=cd,t.Threads=to})(no||(no={}));class ro extends ee{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}ro||(ro={});class io extends ee{create(e,n){return this._client.post("/embeddings",{body:e,...n})}}io||(io={});class so extends ee{create(e,n){return this._client.post("/edits",{body:e,...n})}}so||(so={});class ao extends ee{create(e,n){return this._client.post("/files",as({body:e,...n}))}retrieve(e,n){return this._client.get(`/files/${e}`,n)}list(e={},n){return Ft(e)?this.list({},e):this._client.getAPIList("/files",md,{query:e,...n})}del(e,n){return this._client.delete(`/files/${e}`,n)}content(e,n){return this._client.get(`/files/${e}/content`,{...n,__binaryResponse:!0})}retrieveContent(e,n){return this._client.get(`/files/${e}/content`,{...n,headers:{Accept:"application/json",...n==null?void 0:n.headers}})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),s=Date.now();let a=await this.retrieve(e);for(;!a.status||!i.has(a.status);)if(await gy(n),a=await this.retrieve(e),Date.now()-s>r)throw new Lo({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return a}}class md extends Mo{}(function(t){t.FileObjectsPage=md})(ao||(ao={}));class oo extends ee{create(e,n){return this._client.post("/fine-tunes",{body:e,...n})}retrieve(e,n){return this._client.get(`/fine-tunes/${e}`,n)}list(e){return this._client.getAPIList("/fine-tunes",yd,e)}cancel(e,n){return this._client.post(`/fine-tunes/${e}/cancel`,n)}listEvents(e,n,r){return this._client.get(`/fine-tunes/${e}/events`,{query:n,timeout:864e5,...r,stream:(n==null?void 0:n.stream)??!1})}}class yd extends Mo{}(function(t){t.FineTunesPage=yd})(oo||(oo={}));class lo extends ee{create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(`/fine_tuning/jobs/${e}`,n)}list(e={},n){return Ft(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",gd,{query:e,...n})}cancel(e,n){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return Ft(n)?this.listEvents(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,vd,{query:n,...r})}}class gd extends on{}class vd extends on{}(function(t){t.FineTuningJobsPage=gd,t.FineTuningJobEventsPage=vd})(lo||(lo={}));class uo extends ee{constructor(){super(...arguments),this.jobs=new lo(this._client)}}(function(t){t.Jobs=lo,t.FineTuningJobsPage=gd,t.FineTuningJobEventsPage=vd})(uo||(uo={}));class co extends ee{createVariation(e,n){return this._client.post("/images/variations",as({body:e,...n}))}edit(e,n){return this._client.post("/images/edits",as({body:e,...n}))}generate(e,n){return this._client.post("/images/generations",{body:e,...n})}}co||(co={});class fo extends ee{retrieve(e,n){return this._client.get(`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",_d,e)}del(e,n){return this._client.delete(`/models/${e}`,n)}}class _d extends Mo{}(function(t){t.ModelsPage=_d})(fo||(fo={}));class ho extends ee{create(e,n){return this._client.post("/moderations",{body:e,...n})}}ho||(ho={});var ky;class _e extends Dw{constructor({apiKey:e=sh("OPENAI_API_KEY"),organization:n=sh("OPENAI_ORG_ID")??null,...r}={}){if(e===void 0)throw new G("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const i={apiKey:e,organization:n,...r,baseURL:r.baseURL??"https://api.openai.com/v1"};if(!i.dangerouslyAllowBrowser&&Ww())throw new G(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:i.baseURL,timeout:i.timeout??6e5,httpAgent:i.httpAgent,maxRetries:i.maxRetries,fetch:i.fetch}),this.completions=new ro(this),this.chat=new Ba(this),this.edits=new so(this),this.embeddings=new io(this),this.files=new ao(this),this.images=new co(this),this.audio=new Wa(this),this.moderations=new ho(this),this.models=new fo(this),this.fineTuning=new uo(this),this.fineTunes=new oo(this),this.beta=new no(this),this._options=i,this.apiKey=e,this.organization=n}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}}ky=_e;_e.OpenAI=ky;_e.OpenAIError=G;_e.APIError=Qe;_e.APIConnectionError=bs;_e.APIConnectionTimeoutError=Lo;_e.APIUserAbortError=An;_e.NotFoundError=id;_e.ConflictError=sd;_e.RateLimitError=od;_e.BadRequestError=td;_e.AuthenticationError=nd;_e.InternalServerError=ld;_e.PermissionDeniedError=rd;_e.UnprocessableEntityError=ad;const{OpenAIError:pE,APIError:mE,APIConnectionError:yE,APIConnectionTimeoutError:Gw,APIUserAbortError:Jw,NotFoundError:gE,ConflictError:vE,RateLimitError:_E,BadRequestError:wE,AuthenticationError:bE,InternalServerError:EE,PermissionDeniedError:kE,UnprocessableEntityError:SE}=kw;(function(t){t.toFile=py,t.fileFromPath=cy,t.Page=Mo,t.CursorPage=on,t.Completions=ro,t.Chat=Ba,t.Edits=so,t.Embeddings=io,t.Files=ao,t.FileObjectsPage=md,t.Images=co,t.Audio=Wa,t.Moderations=ho,t.Models=fo,t.ModelsPage=_d,t.FineTuning=uo,t.FineTunes=oo,t.FineTunesPage=yd,t.Beta=no})(_e||(_e={}));var Xw=function(t,e){if(typeof t!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,t.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()};const Yw=_o(Xw);var Sy={exports:{}};const e0=/[\p{Lu}]/u,t0=/[\p{Ll}]/u,uh=/^[\p{Lu}](?![\p{Lu}])/gu,Cy=/([\p{Alpha}\p{N}_]|$)/u,Py=/[_.\- ]+/,n0=new RegExp("^"+Py.source),ch=new RegExp(Py.source+Cy.source,"gu"),dh=new RegExp("\\d+"+Cy.source,"gu"),r0=(t,e,n)=>{let r=!1,i=!1,s=!1;for(let a=0;a<t.length;a++){const o=t[a];r&&e0.test(o)?(t=t.slice(0,a)+"-"+t.slice(a),r=!1,s=i,i=!0,a++):i&&s&&t0.test(o)?(t=t.slice(0,a-1)+"-"+t.slice(a-1),s=i,i=!1,r=!0):(r=e(o)===o&&n(o)!==o,s=i,i=n(o)===o&&e(o)!==o)}return t},i0=(t,e)=>(uh.lastIndex=0,t.replace(uh,n=>e(n))),s0=(t,e)=>(ch.lastIndex=0,dh.lastIndex=0,t.replace(ch,(n,r)=>e(r)).replace(dh,n=>e(n))),Ty=(t,e)=>{if(!(typeof t=="string"||Array.isArray(t)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(t)?t=t.map(s=>s.trim()).filter(s=>s.length).join("-"):t=t.trim(),t.length===0)return"";const n=e.locale===!1?s=>s.toLowerCase():s=>s.toLocaleLowerCase(e.locale),r=e.locale===!1?s=>s.toUpperCase():s=>s.toLocaleUpperCase(e.locale);return t.length===1?e.pascalCase?r(t):n(t):(t!==n(t)&&(t=r0(t,n,r)),t=t.replace(n0,""),e.preserveConsecutiveUppercase?t=i0(t,n):t=n(t),e.pascalCase&&(t=r(t.charAt(0))+t.slice(1)),s0(t,r))};Sy.exports=Ty;Sy.exports.default=Ty;function a0(t,e){return(e==null?void 0:e[t])||Yw(t)}function o0(t,e,n){const r={};for(const i in t)Object.hasOwn(t,i)&&(r[e(i,n)]=t[i]);return r}function fh(t){return Array.isArray(t)?[...t]:{...t}}function l0(t,e){const n=fh(t);for(const[r,i]of Object.entries(e)){const[s,...a]=r.split(".").reverse();let o=n;for(const l of a.reverse()){if(o[l]===void 0)break;o[l]=fh(o[l]),o=o[l]}o[s]!==void 0&&(o[s]={lc:1,type:"secret",id:[i]})}return n}function xy(t){const e=Object.getPrototypeOf(t);return typeof t.lc_name=="function"&&(typeof e.lc_name!="function"||t.lc_name()!==e.lc_name())?t.lc_name():t.name}class nr{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,xy(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(e,...n){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_kwargs=e||{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof nr||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},n={},r=Object.keys(this.lc_kwargs).reduce((i,s)=>(i[s]=s in this?this[s]:this.lc_kwargs[s],i),{});for(let i=Object.getPrototypeOf(this);i;i=Object.getPrototypeOf(i))Object.assign(e,Reflect.get(i,"lc_aliases",this)),Object.assign(n,Reflect.get(i,"lc_secrets",this)),Object.assign(r,Reflect.get(i,"lc_attributes",this));return Object.keys(n).forEach(i=>{let s=this,a=r;const[o,...l]=i.split(".").reverse();for(const c of l.reverse()){if(!(c in s)||s[c]===void 0)return;(!(c in a)||a[c]===void 0)&&(typeof s[c]=="object"&&s[c]!=null?a[c]={}:Array.isArray(s[c])&&(a[c]=[])),s=s[c],a=a[c]}o in s&&s[o]!==void 0&&(a[o]=a[o]||s[o])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:o0(Object.keys(n).length?l0(r,n):r,a0,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}function Hr(t,e){return typeof t=="string"?typeof e=="string"?t+e:[{type:"text",text:t},...e]:Array.isArray(e)?[...t,...e]:[...t,{type:"text",text:e}]}class Es extends nr{get text(){return typeof this.content=="string"?this.content:""}constructor(e,n){typeof e=="string"&&(e={content:e,additional_kwargs:n}),e.additional_kwargs||(e.additional_kwargs={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}toChunk(){const e=this._getType();if(e==="human")return new cs({...this});if(e==="ai")return new ds({...this});if(e==="system")return new fs({...this});if(e==="function")return new hs({...this});if(wd.isInstance(this))return new ps({...this});throw new Error("Unknown message type.")}}function hh(t){return Array.isArray(t)&&t.every(e=>typeof e.index=="number")}class Kr extends Es{static _mergeAdditionalKwargs(e,n){var i,s;const r={...e};for(const[a,o]of Object.entries(n))if(r[a]===void 0)r[a]=o;else{if(typeof r[a]!=typeof o)throw new Error(`additional_kwargs[${a}] already exists in the message chunk, but with a different type.`);if(typeof r[a]=="string")r[a]=r[a]+o;else if(!Array.isArray(r[a])&&typeof r[a]=="object")r[a]=this._mergeAdditionalKwargs(r[a],o);else if(a==="tool_calls"&&hh(r[a])&&hh(o))for(const l of o)((i=r[a])==null?void 0:i[l.index])!==void 0?r[a]=(s=r[a])==null?void 0:s.map((c,d)=>d!==l.index?c:{...c,...l,function:{name:l.function.name??c.function.name,arguments:(c.function.arguments??"")+(l.function.arguments??"")}}):r[a][l.index]=l;else throw new Error(`additional_kwargs[${a}] already exists in this message chunk.`)}return r}}class Zr extends Es{static lc_name(){return"HumanMessage"}_getType(){return"human"}}class cs extends Kr{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}concat(e){return new cs({content:Hr(this.content,e.content),additional_kwargs:cs._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}}class Uo extends Es{static lc_name(){return"AIMessage"}_getType(){return"ai"}}class ds extends Kr{static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}concat(e){return new ds({content:Hr(this.content,e.content),additional_kwargs:ds._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}}class Iy extends Es{static lc_name(){return"SystemMessage"}_getType(){return"system"}}class fs extends Kr{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}concat(e){return new fs({content:Hr(this.content,e.content),additional_kwargs:fs._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}}class hs extends Kr{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){return new hs({content:Hr(this.content,e.content),additional_kwargs:hs._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs),name:this.name??""})}}class po extends Kr{constructor(e){super(e),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id}static lc_name(){return"ToolMessageChunk"}_getType(){return"tool"}concat(e){return new po({content:Hr(this.content,e.content),additional_kwargs:po._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs),tool_call_id:this.tool_call_id})}}class wd extends Es{static lc_name(){return"ChatMessage"}constructor(e,n){typeof e=="string"&&(e={content:e,role:n}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return e._getType()==="generic"}}function u0(t){return typeof(t==null?void 0:t._getType)=="function"}function ga(t){if(typeof t=="string")return new Zr(t);if(u0(t))return t;const[e,n]=t;if(e==="human"||e==="user")return new Zr({content:n});if(e==="ai"||e==="assistant")return new Uo({content:n});if(e==="system")return new Iy({content:n});throw new Error("Unable to coerce message from array: only human, AI, or system message coercion is currently supported.")}class ps extends Kr{static lc_name(){return"ChatMessageChunk"}constructor(e,n){typeof e=="string"&&(e={content:e,role:n}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new ps({content:Hr(this.content,e.content),additional_kwargs:ps._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs),role:this.role})}}function bd(t,e="Human",n="AI"){const r=[];for(const i of t){let s;if(i._getType()==="human")s=e;else if(i._getType()==="ai")s=n;else if(i._getType()==="system")s="System";else if(i._getType()==="function")s="Function";else if(i._getType()==="tool")s="Tool";else if(i._getType()==="generic")s=i.role;else throw new Error(`Got unsupported message type: ${i._getType()}`);const a=i.name?`${i.name}, `:"";r.push(`${s}: ${a}${i.content}`)}return r.join(`
`)}const c0="__run";class Ed{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new Ed({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}class kd extends Ed{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new kd({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}}class Oy extends nr{}class d0 extends Oy{constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new Zr(this.value)]}}class f0 extends Oy{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return bd(this.messages)}toChatMessages(){return this.messages}}/*
 * [js-sha1]{@link https://github.com/emn178/js-sha1}
 *
 * @version 0.6.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */var h0=typeof window=="object"?window:{},V="0123456789abcdef".split(""),p0=[-2147483648,8388608,32768,128],Et=[24,16,8,0],ye=[];function Ot(t){t?(ye[0]=ye[16]=ye[1]=ye[2]=ye[3]=ye[4]=ye[5]=ye[6]=ye[7]=ye[8]=ye[9]=ye[10]=ye[11]=ye[12]=ye[13]=ye[14]=ye[15]=0,this.blocks=ye):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Ot.prototype.update=function(t){if(!this.finalized){var e=typeof t!="string";e&&t.constructor===h0.ArrayBuffer&&(t=new Uint8Array(t));for(var n,r=0,i,s=t.length||0,a=this.blocks;r<s;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),e)for(i=this.start;r<s&&i<64;++r)a[i>>2]|=t[r]<<Et[i++&3];else for(i=this.start;r<s&&i<64;++r)n=t.charCodeAt(r),n<128?a[i>>2]|=n<<Et[i++&3]:n<2048?(a[i>>2]|=(192|n>>6)<<Et[i++&3],a[i>>2]|=(128|n&63)<<Et[i++&3]):n<55296||n>=57344?(a[i>>2]|=(224|n>>12)<<Et[i++&3],a[i>>2]|=(128|n>>6&63)<<Et[i++&3],a[i>>2]|=(128|n&63)<<Et[i++&3]):(n=65536+((n&1023)<<10|t.charCodeAt(++r)&1023),a[i>>2]|=(240|n>>18)<<Et[i++&3],a[i>>2]|=(128|n>>12&63)<<Et[i++&3],a[i>>2]|=(128|n>>6&63)<<Et[i++&3],a[i>>2]|=(128|n&63)<<Et[i++&3]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=a[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};Ot.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>2]|=p0[e&3],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}};Ot.prototype.hash=function(){var t=this.h0,e=this.h1,n=this.h2,r=this.h3,i=this.h4,s,a,o,l=this.blocks;for(a=16;a<80;++a)o=l[a-3]^l[a-8]^l[a-14]^l[a-16],l[a]=o<<1|o>>>31;for(a=0;a<20;a+=5)s=e&n|~e&r,o=t<<5|t>>>27,i=o+s+i+1518500249+l[a]<<0,e=e<<30|e>>>2,s=t&e|~t&n,o=i<<5|i>>>27,r=o+s+r+1518500249+l[a+1]<<0,t=t<<30|t>>>2,s=i&t|~i&e,o=r<<5|r>>>27,n=o+s+n+1518500249+l[a+2]<<0,i=i<<30|i>>>2,s=r&i|~r&t,o=n<<5|n>>>27,e=o+s+e+1518500249+l[a+3]<<0,r=r<<30|r>>>2,s=n&r|~n&i,o=e<<5|e>>>27,t=o+s+t+1518500249+l[a+4]<<0,n=n<<30|n>>>2;for(;a<40;a+=5)s=e^n^r,o=t<<5|t>>>27,i=o+s+i+1859775393+l[a]<<0,e=e<<30|e>>>2,s=t^e^n,o=i<<5|i>>>27,r=o+s+r+1859775393+l[a+1]<<0,t=t<<30|t>>>2,s=i^t^e,o=r<<5|r>>>27,n=o+s+n+1859775393+l[a+2]<<0,i=i<<30|i>>>2,s=r^i^t,o=n<<5|n>>>27,e=o+s+e+1859775393+l[a+3]<<0,r=r<<30|r>>>2,s=n^r^i,o=e<<5|e>>>27,t=o+s+t+1859775393+l[a+4]<<0,n=n<<30|n>>>2;for(;a<60;a+=5)s=e&n|e&r|n&r,o=t<<5|t>>>27,i=o+s+i-1894007588+l[a]<<0,e=e<<30|e>>>2,s=t&e|t&n|e&n,o=i<<5|i>>>27,r=o+s+r-1894007588+l[a+1]<<0,t=t<<30|t>>>2,s=i&t|i&e|t&e,o=r<<5|r>>>27,n=o+s+n-1894007588+l[a+2]<<0,i=i<<30|i>>>2,s=r&i|r&t|i&t,o=n<<5|n>>>27,e=o+s+e-1894007588+l[a+3]<<0,r=r<<30|r>>>2,s=n&r|n&i|r&i,o=e<<5|e>>>27,t=o+s+t-1894007588+l[a+4]<<0,n=n<<30|n>>>2;for(;a<80;a+=5)s=e^n^r,o=t<<5|t>>>27,i=o+s+i-899497514+l[a]<<0,e=e<<30|e>>>2,s=t^e^n,o=i<<5|i>>>27,r=o+s+r-899497514+l[a+1]<<0,t=t<<30|t>>>2,s=i^t^e,o=r<<5|r>>>27,n=o+s+n-899497514+l[a+2]<<0,i=i<<30|i>>>2,s=r^i^t,o=n<<5|n>>>27,e=o+s+e-899497514+l[a+3]<<0,r=r<<30|r>>>2,s=n^r^i,o=e<<5|e>>>27,t=o+s+t-899497514+l[a+4]<<0,n=n<<30|n>>>2;this.h0=this.h0+t<<0,this.h1=this.h1+e<<0,this.h2=this.h2+n<<0,this.h3=this.h3+r<<0,this.h4=this.h4+i<<0};Ot.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,r=this.h3,i=this.h4;return V[t>>28&15]+V[t>>24&15]+V[t>>20&15]+V[t>>16&15]+V[t>>12&15]+V[t>>8&15]+V[t>>4&15]+V[t&15]+V[e>>28&15]+V[e>>24&15]+V[e>>20&15]+V[e>>16&15]+V[e>>12&15]+V[e>>8&15]+V[e>>4&15]+V[e&15]+V[n>>28&15]+V[n>>24&15]+V[n>>20&15]+V[n>>16&15]+V[n>>12&15]+V[n>>8&15]+V[n>>4&15]+V[n&15]+V[r>>28&15]+V[r>>24&15]+V[r>>20&15]+V[r>>16&15]+V[r>>12&15]+V[r>>8&15]+V[r>>4&15]+V[r&15]+V[i>>28&15]+V[i>>24&15]+V[i>>20&15]+V[i>>16&15]+V[i>>12&15]+V[i>>8&15]+V[i>>4&15]+V[i&15]};Ot.prototype.toString=Ot.prototype.hex;Ot.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,r=this.h3,i=this.h4;return[t>>24&255,t>>16&255,t>>8&255,t&255,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24&255,n>>16&255,n>>8&255,n&255,r>>24&255,r>>16&255,r>>8&255,r&255,i>>24&255,i>>16&255,i>>8&255,i&255]};Ot.prototype.array=Ot.prototype.digest;Ot.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(20),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),t};const m0=t=>new Ot(!0).update(t).hex(),ph=(...t)=>m0(t.join("_"));class y0{}const g0=new Map;class Sd extends y0{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,n){return Promise.resolve(this.cache.get(ph(e,n))??null)}async update(e,n,r){this.cache.set(ph(e,n),r)}static global(){return new Sd(g0)}}var Ay={},Zo={},ai={},zo={},ec={},Zt={},Fo={},ks={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getParsedType=t.ZodParsedType=t.objectUtil=t.util=void 0;var e;(function(r){r.assertEqual=o=>o;function i(o){}r.assertIs=i;function s(o){throw new Error}r.assertNever=s,r.arrayToEnum=o=>{const l={};for(const c of o)l[c]=c;return l},r.getValidEnumValues=o=>{const l=r.objectKeys(o).filter(d=>typeof o[o[d]]!="number"),c={};for(const d of l)c[d]=o[d];return r.objectValues(c)},r.objectValues=o=>r.objectKeys(o).map(function(l){return o[l]}),r.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{const l=[];for(const c in o)Object.prototype.hasOwnProperty.call(o,c)&&l.push(c);return l},r.find=(o,l)=>{for(const c of o)if(l(c))return c},r.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&isFinite(o)&&Math.floor(o)===o;function a(o,l=" | "){return o.map(c=>typeof c=="string"?`'${c}'`:c).join(l)}r.joinValues=a,r.jsonStringifyReplacer=(o,l)=>typeof l=="bigint"?l.toString():l})(e=t.util||(t.util={})),function(r){r.mergeShapes=(i,s)=>({...i,...s})}(t.objectUtil||(t.objectUtil={})),t.ZodParsedType=e.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]);const n=r=>{switch(typeof r){case"undefined":return t.ZodParsedType.undefined;case"string":return t.ZodParsedType.string;case"number":return isNaN(r)?t.ZodParsedType.nan:t.ZodParsedType.number;case"boolean":return t.ZodParsedType.boolean;case"function":return t.ZodParsedType.function;case"bigint":return t.ZodParsedType.bigint;case"symbol":return t.ZodParsedType.symbol;case"object":return Array.isArray(r)?t.ZodParsedType.array:r===null?t.ZodParsedType.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?t.ZodParsedType.promise:typeof Map<"u"&&r instanceof Map?t.ZodParsedType.map:typeof Set<"u"&&r instanceof Set?t.ZodParsedType.set:typeof Date<"u"&&r instanceof Date?t.ZodParsedType.date:t.ZodParsedType.object;default:return t.ZodParsedType.unknown}};t.getParsedType=n})(ks);var zt={};Object.defineProperty(zt,"__esModule",{value:!0});zt.ZodError=zt.quotelessJson=zt.ZodIssueCode=void 0;const Ry=ks;zt.ZodIssueCode=Ry.util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);const v0=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");zt.quotelessJson=v0;class tc extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const a of s.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)r._errors.push(n(a));else{let o=r,l=0;for(;l<a.path.length;){const c=a.path[l];l===a.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(n(a))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return i(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ry.util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}zt.ZodError=tc;tc.create=t=>new tc(t);Object.defineProperty(Fo,"__esModule",{value:!0});const $n=ks,Ie=zt,_0=(t,e)=>{let n;switch(t.code){case Ie.ZodIssueCode.invalid_type:t.received===$n.ZodParsedType.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Ie.ZodIssueCode.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,$n.util.jsonStringifyReplacer)}`;break;case Ie.ZodIssueCode.unrecognized_keys:n=`Unrecognized key(s) in object: ${$n.util.joinValues(t.keys,", ")}`;break;case Ie.ZodIssueCode.invalid_union:n="Invalid input";break;case Ie.ZodIssueCode.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${$n.util.joinValues(t.options)}`;break;case Ie.ZodIssueCode.invalid_enum_value:n=`Invalid enum value. Expected ${$n.util.joinValues(t.options)}, received '${t.received}'`;break;case Ie.ZodIssueCode.invalid_arguments:n="Invalid function arguments";break;case Ie.ZodIssueCode.invalid_return_type:n="Invalid function return type";break;case Ie.ZodIssueCode.invalid_date:n="Invalid date";break;case Ie.ZodIssueCode.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:$n.util.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Ie.ZodIssueCode.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Ie.ZodIssueCode.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Ie.ZodIssueCode.custom:n="Invalid input";break;case Ie.ZodIssueCode.invalid_intersection_types:n="Intersection results could not be merged";break;case Ie.ZodIssueCode.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Ie.ZodIssueCode.not_finite:n="Number must be finite";break;default:n=e.defaultError,$n.util.assertNever(t)}return{message:n}};Fo.default=_0;var w0=Oe&&Oe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.getErrorMap=Zt.setErrorMap=Zt.defaultErrorMap=void 0;const Ny=w0(Fo);Zt.defaultErrorMap=Ny.default;let jy=Ny.default;function b0(t){jy=t}Zt.setErrorMap=b0;function E0(){return jy}Zt.getErrorMap=E0;var Cd={};(function(t){var e=Oe&&Oe.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(t,"__esModule",{value:!0}),t.isAsync=t.isValid=t.isDirty=t.isAborted=t.OK=t.DIRTY=t.INVALID=t.ParseStatus=t.addIssueToContext=t.EMPTY_PATH=t.makeIssue=void 0;const n=Zt,r=e(Fo),i=y=>{const{data:b,path:S,errorMaps:C,issueData:v}=y,g=[...S,...v.path||[]],E={...v,path:g};let P="";const x=C.filter(j=>!!j).slice().reverse();for(const j of x)P=j(E,{data:b,defaultError:P}).message;return{...v,path:g,message:v.message||P}};t.makeIssue=i,t.EMPTY_PATH=[];function s(y,b){const S=(0,t.makeIssue)({issueData:b,data:y.data,path:y.path,errorMaps:[y.common.contextualErrorMap,y.schemaErrorMap,(0,n.getErrorMap)(),r.default].filter(C=>!!C)});y.common.issues.push(S)}t.addIssueToContext=s;class a{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(b,S){const C=[];for(const v of S){if(v.status==="aborted")return t.INVALID;v.status==="dirty"&&b.dirty(),C.push(v.value)}return{status:b.value,value:C}}static async mergeObjectAsync(b,S){const C=[];for(const v of S)C.push({key:await v.key,value:await v.value});return a.mergeObjectSync(b,C)}static mergeObjectSync(b,S){const C={};for(const v of S){const{key:g,value:E}=v;if(g.status==="aborted"||E.status==="aborted")return t.INVALID;g.status==="dirty"&&b.dirty(),E.status==="dirty"&&b.dirty(),g.value!=="__proto__"&&(typeof E.value<"u"||v.alwaysSet)&&(C[g.value]=E.value)}return{status:b.value,value:C}}}t.ParseStatus=a,t.INVALID=Object.freeze({status:"aborted"});const o=y=>({status:"dirty",value:y});t.DIRTY=o;const l=y=>({status:"valid",value:y});t.OK=l;const c=y=>y.status==="aborted";t.isAborted=c;const d=y=>y.status==="dirty";t.isDirty=d;const p=y=>y.status==="valid";t.isValid=p;const h=y=>typeof Promise<"u"&&y instanceof Promise;t.isAsync=h})(Cd);var Dy={};Object.defineProperty(Dy,"__esModule",{value:!0});var Ly={},$y={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.errorUtil=void 0,function(e){e.errToObj=n=>typeof n=="string"?{message:n}:n||{},e.toString=n=>typeof n=="string"?n:n==null?void 0:n.message}(t.errorUtil||(t.errorUtil={}))})($y);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.date=t.boolean=t.bigint=t.array=t.any=t.coerce=t.ZodFirstPartyTypeKind=t.late=t.ZodSchema=t.Schema=t.custom=t.ZodReadonly=t.ZodPipeline=t.ZodBranded=t.BRAND=t.ZodNaN=t.ZodCatch=t.ZodDefault=t.ZodNullable=t.ZodOptional=t.ZodTransformer=t.ZodEffects=t.ZodPromise=t.ZodNativeEnum=t.ZodEnum=t.ZodLiteral=t.ZodLazy=t.ZodFunction=t.ZodSet=t.ZodMap=t.ZodRecord=t.ZodTuple=t.ZodIntersection=t.ZodDiscriminatedUnion=t.ZodUnion=t.ZodObject=t.ZodArray=t.ZodVoid=t.ZodNever=t.ZodUnknown=t.ZodAny=t.ZodNull=t.ZodUndefined=t.ZodSymbol=t.ZodDate=t.ZodBoolean=t.ZodBigInt=t.ZodNumber=t.ZodString=t.ZodType=void 0,t.NEVER=t.void=t.unknown=t.union=t.undefined=t.tuple=t.transformer=t.symbol=t.string=t.strictObject=t.set=t.record=t.promise=t.preprocess=t.pipeline=t.ostring=t.optional=t.onumber=t.oboolean=t.object=t.number=t.nullable=t.null=t.never=t.nativeEnum=t.nan=t.map=t.literal=t.lazy=t.intersection=t.instanceof=t.function=t.enum=t.effect=t.discriminatedUnion=void 0;const e=Zt,n=$y,r=Cd,i=ks,s=zt;class a{constructor(u,f,m,k){this._cachedPath=[],this.parent=u,this.data=f,this._path=m,this._key=k}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const o=(_,u)=>{if((0,r.isValid)(u))return{success:!0,data:u.value};if(!_.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const f=new s.ZodError(_.common.issues);return this._error=f,this._error}}};function l(_){if(!_)return{};const{errorMap:u,invalid_type_error:f,required_error:m,description:k}=_;if(u&&(f||m))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return u?{errorMap:u,description:k}:{errorMap:(I,T)=>I.code!=="invalid_type"?{message:T.defaultError}:typeof T.data>"u"?{message:m??T.defaultError}:{message:f??T.defaultError},description:k}}class c{constructor(u){this.spa=this.safeParseAsync,this._def=u,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(u){return(0,i.getParsedType)(u.data)}_getOrReturnCtx(u,f){return f||{common:u.parent.common,data:u.data,parsedType:(0,i.getParsedType)(u.data),schemaErrorMap:this._def.errorMap,path:u.path,parent:u.parent}}_processInputParams(u){return{status:new r.ParseStatus,ctx:{common:u.parent.common,data:u.data,parsedType:(0,i.getParsedType)(u.data),schemaErrorMap:this._def.errorMap,path:u.path,parent:u.parent}}}_parseSync(u){const f=this._parse(u);if((0,r.isAsync)(f))throw new Error("Synchronous parse encountered promise.");return f}_parseAsync(u){const f=this._parse(u);return Promise.resolve(f)}parse(u,f){const m=this.safeParse(u,f);if(m.success)return m.data;throw m.error}safeParse(u,f){var m;const k={common:{issues:[],async:(m=f==null?void 0:f.async)!==null&&m!==void 0?m:!1,contextualErrorMap:f==null?void 0:f.errorMap},path:(f==null?void 0:f.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:u,parsedType:(0,i.getParsedType)(u)},w=this._parseSync({data:u,path:k.path,parent:k});return o(k,w)}async parseAsync(u,f){const m=await this.safeParseAsync(u,f);if(m.success)return m.data;throw m.error}async safeParseAsync(u,f){const m={common:{issues:[],contextualErrorMap:f==null?void 0:f.errorMap,async:!0},path:(f==null?void 0:f.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:u,parsedType:(0,i.getParsedType)(u)},k=this._parse({data:u,path:m.path,parent:m}),w=await((0,r.isAsync)(k)?k:Promise.resolve(k));return o(m,w)}refine(u,f){const m=k=>typeof f=="string"||typeof f>"u"?{message:f}:typeof f=="function"?f(k):f;return this._refinement((k,w)=>{const I=u(k),T=()=>w.addIssue({code:s.ZodIssueCode.custom,...m(k)});return typeof Promise<"u"&&I instanceof Promise?I.then(z=>z?!0:(T(),!1)):I?!0:(T(),!1)})}refinement(u,f){return this._refinement((m,k)=>u(m)?!0:(k.addIssue(typeof f=="function"?f(m,k):f),!1))}_refinement(u){return new vt({schema:this,typeName:B.ZodEffects,effect:{type:"refinement",refinement:u}})}superRefine(u){return this._refinement(u)}optional(){return Vt.create(this,this._def)}nullable(){return Ln.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return N.create(this,this._def)}promise(){return ar.create(this,this._def)}or(u){return M.create([this,u],this._def)}and(u){return Bt.create(this,u,this._def)}transform(u){return new vt({...l(this._def),schema:this,typeName:B.ZodEffects,effect:{type:"transform",transform:u}})}default(u){const f=typeof u=="function"?u:()=>u;return new Gr({...l(this._def),innerType:this,defaultValue:f,typeName:B.ZodDefault})}brand(){return new $d({typeName:B.ZodBranded,type:this,...l(this._def)})}catch(u){const f=typeof u=="function"?u:()=>u;return new Ts({...l(this._def),innerType:this,catchValue:f,typeName:B.ZodCatch})}describe(u){const f=this.constructor;return new f({...this._def,description:u})}pipe(u){return Jr.create(this,u)}readonly(){return Is.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}t.ZodType=c,t.Schema=c,t.ZodSchema=c;const d=/^c[^\s-]{8,}$/i,p=/^[a-z][a-z0-9]*$/,h=/^[0-9A-HJKMNP-TV-Z]{26}$/,y=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,b=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,S="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let C;const v=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,g=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,E=_=>_.precision?_.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${_.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${_.precision}}Z$`):_.precision===0?_.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):_.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function P(_,u){return!!((u==="v4"||!u)&&v.test(_)||(u==="v6"||!u)&&g.test(_))}class x extends c{_parse(u){if(this._def.coerce&&(u.data=String(u.data)),this._getType(u)!==i.ZodParsedType.string){const w=this._getOrReturnCtx(u);return(0,r.addIssueToContext)(w,{code:s.ZodIssueCode.invalid_type,expected:i.ZodParsedType.string,received:w.parsedType}),r.INVALID}const m=new r.ParseStatus;let k;for(const w of this._def.checks)if(w.kind==="min")u.data.length<w.value&&(k=this._getOrReturnCtx(u,k),(0,r.addIssueToContext)(k,{code:s.ZodIssueCode.too_small,minimum:w.value,type:"string",inclusive:!0,exact:!1,message:w.message}),m.dirty());else if(w.kind==="max")u.data.length>w.value&&(k=this._getOrReturnCtx(u,k),(0,r.addIssueToContext)(k,{code:s.ZodIssueCode.too_big,maximum:w.value,type:"string",inclusive:!0,exact:!1,message:w.message}),m.dirty());else if(w.kind==="length"){const I=u.data.length>w.value,T=u.data.length<w.value;(I||T)&&(k=this._getOrReturnCtx(u,k),I?(0,r.addIssueToContext)(k,{code:s.ZodIssueCode.too_big,maximum:w.value,type:"string",inclusive:!0,exact:!0,message:w.message}):T&&(0,r.addIssueToContext)(k,{code:s.ZodIssueCode.too_small,minimum:w.value,type:"string",inclusive:!0,exact:!0,message:w.message}),m.dirty())}else if(w.kind==="email")b.test(u.data)||(k=this._getOrReturnCtx(u,k),(0,r.addIssueToContext)(k,{validation:"email",code:s.ZodIssueCode.invalid_string,message:w.message}),m.dirty());else if(w.kind==="emoji")C||(C=new RegExp(S,"u")),C.test(u.data)||(k=this._getOrReturnCtx(u,k),(0,r.addIssueToContext)(k,{validation:"emoji",code:s.ZodIssueCode.invalid_string,message:w.message}),m.dirty());else if(w.kind==="uuid")y.test(u.data)||(k=this._getOrReturnCtx(u,k),(0,r.addIssueToContext)(k,{validation:"uuid",code:s.ZodIssueCode.invalid_string,message:w.message}),m.dirty());else if(w.kind==="cuid")d.test(u.data)||(k=this._getOrReturnCtx(u,k),(0,r.addIssueToContext)(k,{validation:"cuid",code:s.ZodIssueCode.invalid_string,message:w.message}),m.dirty());else if(w.kind==="cuid2")p.test(u.data)||(k=this._getOrReturnCtx(u,k),(0,r.addIssueToContext)(k,{validation:"cuid2",code:s.ZodIssueCode.invalid_string,message:w.message}),m.dirty());else if(w.kind==="ulid")h.test(u.data)||(k=this._getOrReturnCtx(u,k),(0,r.addIssueToContext)(k,{validation:"ulid",code:s.ZodIssueCode.invalid_string,message:w.message}),m.dirty());else if(w.kind==="url")try{new URL(u.data)}catch{k=this._getOrReturnCtx(u,k),(0,r.addIssueToContext)(k,{validation:"url",code:s.ZodIssueCode.invalid_string,message:w.message}),m.dirty()}else w.kind==="regex"?(w.regex.lastIndex=0,w.regex.test(u.data)||(k=this._getOrReturnCtx(u,k),(0,r.addIssueToContext)(k,{validation:"regex",code:s.ZodIssueCode.invalid_string,message:w.message}),m.dirty())):w.kind==="trim"?u.data=u.data.trim():w.kind==="includes"?u.data.includes(w.value,w.position)||(k=this._getOrReturnCtx(u,k),(0,r.addIssueToContext)(k,{code:s.ZodIssueCode.invalid_string,validation:{includes:w.value,position:w.position},message:w.message}),m.dirty()):w.kind==="toLowerCase"?u.data=u.data.toLowerCase():w.kind==="toUpperCase"?u.data=u.data.toUpperCase():w.kind==="startsWith"?u.data.startsWith(w.value)||(k=this._getOrReturnCtx(u,k),(0,r.addIssueToContext)(k,{code:s.ZodIssueCode.invalid_string,validation:{startsWith:w.value},message:w.message}),m.dirty()):w.kind==="endsWith"?u.data.endsWith(w.value)||(k=this._getOrReturnCtx(u,k),(0,r.addIssueToContext)(k,{code:s.ZodIssueCode.invalid_string,validation:{endsWith:w.value},message:w.message}),m.dirty()):w.kind==="datetime"?E(w).test(u.data)||(k=this._getOrReturnCtx(u,k),(0,r.addIssueToContext)(k,{code:s.ZodIssueCode.invalid_string,validation:"datetime",message:w.message}),m.dirty()):w.kind==="ip"?P(u.data,w.version)||(k=this._getOrReturnCtx(u,k),(0,r.addIssueToContext)(k,{validation:"ip",code:s.ZodIssueCode.invalid_string,message:w.message}),m.dirty()):i.util.assertNever(w);return{status:m.value,value:u.data}}_regex(u,f,m){return this.refinement(k=>u.test(k),{validation:f,code:s.ZodIssueCode.invalid_string,...n.errorUtil.errToObj(m)})}_addCheck(u){return new x({...this._def,checks:[...this._def.checks,u]})}email(u){return this._addCheck({kind:"email",...n.errorUtil.errToObj(u)})}url(u){return this._addCheck({kind:"url",...n.errorUtil.errToObj(u)})}emoji(u){return this._addCheck({kind:"emoji",...n.errorUtil.errToObj(u)})}uuid(u){return this._addCheck({kind:"uuid",...n.errorUtil.errToObj(u)})}cuid(u){return this._addCheck({kind:"cuid",...n.errorUtil.errToObj(u)})}cuid2(u){return this._addCheck({kind:"cuid2",...n.errorUtil.errToObj(u)})}ulid(u){return this._addCheck({kind:"ulid",...n.errorUtil.errToObj(u)})}ip(u){return this._addCheck({kind:"ip",...n.errorUtil.errToObj(u)})}datetime(u){var f;return typeof u=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:u}):this._addCheck({kind:"datetime",precision:typeof(u==null?void 0:u.precision)>"u"?null:u==null?void 0:u.precision,offset:(f=u==null?void 0:u.offset)!==null&&f!==void 0?f:!1,...n.errorUtil.errToObj(u==null?void 0:u.message)})}regex(u,f){return this._addCheck({kind:"regex",regex:u,...n.errorUtil.errToObj(f)})}includes(u,f){return this._addCheck({kind:"includes",value:u,position:f==null?void 0:f.position,...n.errorUtil.errToObj(f==null?void 0:f.message)})}startsWith(u,f){return this._addCheck({kind:"startsWith",value:u,...n.errorUtil.errToObj(f)})}endsWith(u,f){return this._addCheck({kind:"endsWith",value:u,...n.errorUtil.errToObj(f)})}min(u,f){return this._addCheck({kind:"min",value:u,...n.errorUtil.errToObj(f)})}max(u,f){return this._addCheck({kind:"max",value:u,...n.errorUtil.errToObj(f)})}length(u,f){return this._addCheck({kind:"length",value:u,...n.errorUtil.errToObj(f)})}nonempty(u){return this.min(1,n.errorUtil.errToObj(u))}trim(){return new x({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new x({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new x({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(u=>u.kind==="datetime")}get isEmail(){return!!this._def.checks.find(u=>u.kind==="email")}get isURL(){return!!this._def.checks.find(u=>u.kind==="url")}get isEmoji(){return!!this._def.checks.find(u=>u.kind==="emoji")}get isUUID(){return!!this._def.checks.find(u=>u.kind==="uuid")}get isCUID(){return!!this._def.checks.find(u=>u.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(u=>u.kind==="cuid2")}get isULID(){return!!this._def.checks.find(u=>u.kind==="ulid")}get isIP(){return!!this._def.checks.find(u=>u.kind==="ip")}get minLength(){let u=null;for(const f of this._def.checks)f.kind==="min"&&(u===null||f.value>u)&&(u=f.value);return u}get maxLength(){let u=null;for(const f of this._def.checks)f.kind==="max"&&(u===null||f.value<u)&&(u=f.value);return u}}t.ZodString=x,x.create=_=>{var u;return new x({checks:[],typeName:B.ZodString,coerce:(u=_==null?void 0:_.coerce)!==null&&u!==void 0?u:!1,...l(_)})};function j(_,u){const f=(_.toString().split(".")[1]||"").length,m=(u.toString().split(".")[1]||"").length,k=f>m?f:m,w=parseInt(_.toFixed(k).replace(".","")),I=parseInt(u.toFixed(k).replace(".",""));return w%I/Math.pow(10,k)}class D extends c{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(u){if(this._def.coerce&&(u.data=Number(u.data)),this._getType(u)!==i.ZodParsedType.number){const w=this._getOrReturnCtx(u);return(0,r.addIssueToContext)(w,{code:s.ZodIssueCode.invalid_type,expected:i.ZodParsedType.number,received:w.parsedType}),r.INVALID}let m;const k=new r.ParseStatus;for(const w of this._def.checks)w.kind==="int"?i.util.isInteger(u.data)||(m=this._getOrReturnCtx(u,m),(0,r.addIssueToContext)(m,{code:s.ZodIssueCode.invalid_type,expected:"integer",received:"float",message:w.message}),k.dirty()):w.kind==="min"?(w.inclusive?u.data<w.value:u.data<=w.value)&&(m=this._getOrReturnCtx(u,m),(0,r.addIssueToContext)(m,{code:s.ZodIssueCode.too_small,minimum:w.value,type:"number",inclusive:w.inclusive,exact:!1,message:w.message}),k.dirty()):w.kind==="max"?(w.inclusive?u.data>w.value:u.data>=w.value)&&(m=this._getOrReturnCtx(u,m),(0,r.addIssueToContext)(m,{code:s.ZodIssueCode.too_big,maximum:w.value,type:"number",inclusive:w.inclusive,exact:!1,message:w.message}),k.dirty()):w.kind==="multipleOf"?j(u.data,w.value)!==0&&(m=this._getOrReturnCtx(u,m),(0,r.addIssueToContext)(m,{code:s.ZodIssueCode.not_multiple_of,multipleOf:w.value,message:w.message}),k.dirty()):w.kind==="finite"?Number.isFinite(u.data)||(m=this._getOrReturnCtx(u,m),(0,r.addIssueToContext)(m,{code:s.ZodIssueCode.not_finite,message:w.message}),k.dirty()):i.util.assertNever(w);return{status:k.value,value:u.data}}gte(u,f){return this.setLimit("min",u,!0,n.errorUtil.toString(f))}gt(u,f){return this.setLimit("min",u,!1,n.errorUtil.toString(f))}lte(u,f){return this.setLimit("max",u,!0,n.errorUtil.toString(f))}lt(u,f){return this.setLimit("max",u,!1,n.errorUtil.toString(f))}setLimit(u,f,m,k){return new D({...this._def,checks:[...this._def.checks,{kind:u,value:f,inclusive:m,message:n.errorUtil.toString(k)}]})}_addCheck(u){return new D({...this._def,checks:[...this._def.checks,u]})}int(u){return this._addCheck({kind:"int",message:n.errorUtil.toString(u)})}positive(u){return this._addCheck({kind:"min",value:0,inclusive:!1,message:n.errorUtil.toString(u)})}negative(u){return this._addCheck({kind:"max",value:0,inclusive:!1,message:n.errorUtil.toString(u)})}nonpositive(u){return this._addCheck({kind:"max",value:0,inclusive:!0,message:n.errorUtil.toString(u)})}nonnegative(u){return this._addCheck({kind:"min",value:0,inclusive:!0,message:n.errorUtil.toString(u)})}multipleOf(u,f){return this._addCheck({kind:"multipleOf",value:u,message:n.errorUtil.toString(f)})}finite(u){return this._addCheck({kind:"finite",message:n.errorUtil.toString(u)})}safe(u){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:n.errorUtil.toString(u)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:n.errorUtil.toString(u)})}get minValue(){let u=null;for(const f of this._def.checks)f.kind==="min"&&(u===null||f.value>u)&&(u=f.value);return u}get maxValue(){let u=null;for(const f of this._def.checks)f.kind==="max"&&(u===null||f.value<u)&&(u=f.value);return u}get isInt(){return!!this._def.checks.find(u=>u.kind==="int"||u.kind==="multipleOf"&&i.util.isInteger(u.value))}get isFinite(){let u=null,f=null;for(const m of this._def.checks){if(m.kind==="finite"||m.kind==="int"||m.kind==="multipleOf")return!0;m.kind==="min"?(f===null||m.value>f)&&(f=m.value):m.kind==="max"&&(u===null||m.value<u)&&(u=m.value)}return Number.isFinite(f)&&Number.isFinite(u)}}t.ZodNumber=D,D.create=_=>new D({checks:[],typeName:B.ZodNumber,coerce:(_==null?void 0:_.coerce)||!1,...l(_)});class L extends c{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(u){if(this._def.coerce&&(u.data=BigInt(u.data)),this._getType(u)!==i.ZodParsedType.bigint){const w=this._getOrReturnCtx(u);return(0,r.addIssueToContext)(w,{code:s.ZodIssueCode.invalid_type,expected:i.ZodParsedType.bigint,received:w.parsedType}),r.INVALID}let m;const k=new r.ParseStatus;for(const w of this._def.checks)w.kind==="min"?(w.inclusive?u.data<w.value:u.data<=w.value)&&(m=this._getOrReturnCtx(u,m),(0,r.addIssueToContext)(m,{code:s.ZodIssueCode.too_small,type:"bigint",minimum:w.value,inclusive:w.inclusive,message:w.message}),k.dirty()):w.kind==="max"?(w.inclusive?u.data>w.value:u.data>=w.value)&&(m=this._getOrReturnCtx(u,m),(0,r.addIssueToContext)(m,{code:s.ZodIssueCode.too_big,type:"bigint",maximum:w.value,inclusive:w.inclusive,message:w.message}),k.dirty()):w.kind==="multipleOf"?u.data%w.value!==BigInt(0)&&(m=this._getOrReturnCtx(u,m),(0,r.addIssueToContext)(m,{code:s.ZodIssueCode.not_multiple_of,multipleOf:w.value,message:w.message}),k.dirty()):i.util.assertNever(w);return{status:k.value,value:u.data}}gte(u,f){return this.setLimit("min",u,!0,n.errorUtil.toString(f))}gt(u,f){return this.setLimit("min",u,!1,n.errorUtil.toString(f))}lte(u,f){return this.setLimit("max",u,!0,n.errorUtil.toString(f))}lt(u,f){return this.setLimit("max",u,!1,n.errorUtil.toString(f))}setLimit(u,f,m,k){return new L({...this._def,checks:[...this._def.checks,{kind:u,value:f,inclusive:m,message:n.errorUtil.toString(k)}]})}_addCheck(u){return new L({...this._def,checks:[...this._def.checks,u]})}positive(u){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:n.errorUtil.toString(u)})}negative(u){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:n.errorUtil.toString(u)})}nonpositive(u){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:n.errorUtil.toString(u)})}nonnegative(u){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:n.errorUtil.toString(u)})}multipleOf(u,f){return this._addCheck({kind:"multipleOf",value:u,message:n.errorUtil.toString(f)})}get minValue(){let u=null;for(const f of this._def.checks)f.kind==="min"&&(u===null||f.value>u)&&(u=f.value);return u}get maxValue(){let u=null;for(const f of this._def.checks)f.kind==="max"&&(u===null||f.value<u)&&(u=f.value);return u}}t.ZodBigInt=L,L.create=_=>{var u;return new L({checks:[],typeName:B.ZodBigInt,coerce:(u=_==null?void 0:_.coerce)!==null&&u!==void 0?u:!1,...l(_)})};class H extends c{_parse(u){if(this._def.coerce&&(u.data=!!u.data),this._getType(u)!==i.ZodParsedType.boolean){const m=this._getOrReturnCtx(u);return(0,r.addIssueToContext)(m,{code:s.ZodIssueCode.invalid_type,expected:i.ZodParsedType.boolean,received:m.parsedType}),r.INVALID}return(0,r.OK)(u.data)}}t.ZodBoolean=H,H.create=_=>new H({typeName:B.ZodBoolean,coerce:(_==null?void 0:_.coerce)||!1,...l(_)});class F extends c{_parse(u){if(this._def.coerce&&(u.data=new Date(u.data)),this._getType(u)!==i.ZodParsedType.date){const w=this._getOrReturnCtx(u);return(0,r.addIssueToContext)(w,{code:s.ZodIssueCode.invalid_type,expected:i.ZodParsedType.date,received:w.parsedType}),r.INVALID}if(isNaN(u.data.getTime())){const w=this._getOrReturnCtx(u);return(0,r.addIssueToContext)(w,{code:s.ZodIssueCode.invalid_date}),r.INVALID}const m=new r.ParseStatus;let k;for(const w of this._def.checks)w.kind==="min"?u.data.getTime()<w.value&&(k=this._getOrReturnCtx(u,k),(0,r.addIssueToContext)(k,{code:s.ZodIssueCode.too_small,message:w.message,inclusive:!0,exact:!1,minimum:w.value,type:"date"}),m.dirty()):w.kind==="max"?u.data.getTime()>w.value&&(k=this._getOrReturnCtx(u,k),(0,r.addIssueToContext)(k,{code:s.ZodIssueCode.too_big,message:w.message,inclusive:!0,exact:!1,maximum:w.value,type:"date"}),m.dirty()):i.util.assertNever(w);return{status:m.value,value:new Date(u.data.getTime())}}_addCheck(u){return new F({...this._def,checks:[...this._def.checks,u]})}min(u,f){return this._addCheck({kind:"min",value:u.getTime(),message:n.errorUtil.toString(f)})}max(u,f){return this._addCheck({kind:"max",value:u.getTime(),message:n.errorUtil.toString(f)})}get minDate(){let u=null;for(const f of this._def.checks)f.kind==="min"&&(u===null||f.value>u)&&(u=f.value);return u!=null?new Date(u):null}get maxDate(){let u=null;for(const f of this._def.checks)f.kind==="max"&&(u===null||f.value<u)&&(u=f.value);return u!=null?new Date(u):null}}t.ZodDate=F,F.create=_=>new F({checks:[],coerce:(_==null?void 0:_.coerce)||!1,typeName:B.ZodDate,...l(_)});class pe extends c{_parse(u){if(this._getType(u)!==i.ZodParsedType.symbol){const m=this._getOrReturnCtx(u);return(0,r.addIssueToContext)(m,{code:s.ZodIssueCode.invalid_type,expected:i.ZodParsedType.symbol,received:m.parsedType}),r.INVALID}return(0,r.OK)(u.data)}}t.ZodSymbol=pe,pe.create=_=>new pe({typeName:B.ZodSymbol,...l(_)});class Ge extends c{_parse(u){if(this._getType(u)!==i.ZodParsedType.undefined){const m=this._getOrReturnCtx(u);return(0,r.addIssueToContext)(m,{code:s.ZodIssueCode.invalid_type,expected:i.ZodParsedType.undefined,received:m.parsedType}),r.INVALID}return(0,r.OK)(u.data)}}t.ZodUndefined=Ge,Ge.create=_=>new Ge({typeName:B.ZodUndefined,...l(_)});class Je extends c{_parse(u){if(this._getType(u)!==i.ZodParsedType.null){const m=this._getOrReturnCtx(u);return(0,r.addIssueToContext)(m,{code:s.ZodIssueCode.invalid_type,expected:i.ZodParsedType.null,received:m.parsedType}),r.INVALID}return(0,r.OK)(u.data)}}t.ZodNull=Je,Je.create=_=>new Je({typeName:B.ZodNull,...l(_)});class at extends c{constructor(){super(...arguments),this._any=!0}_parse(u){return(0,r.OK)(u.data)}}t.ZodAny=at,at.create=_=>new at({typeName:B.ZodAny,...l(_)});class gt extends c{constructor(){super(...arguments),this._unknown=!0}_parse(u){return(0,r.OK)(u.data)}}t.ZodUnknown=gt,gt.create=_=>new gt({typeName:B.ZodUnknown,...l(_)});class De extends c{_parse(u){const f=this._getOrReturnCtx(u);return(0,r.addIssueToContext)(f,{code:s.ZodIssueCode.invalid_type,expected:i.ZodParsedType.never,received:f.parsedType}),r.INVALID}}t.ZodNever=De,De.create=_=>new De({typeName:B.ZodNever,...l(_)});class At extends c{_parse(u){if(this._getType(u)!==i.ZodParsedType.undefined){const m=this._getOrReturnCtx(u);return(0,r.addIssueToContext)(m,{code:s.ZodIssueCode.invalid_type,expected:i.ZodParsedType.void,received:m.parsedType}),r.INVALID}return(0,r.OK)(u.data)}}t.ZodVoid=At,At.create=_=>new At({typeName:B.ZodVoid,...l(_)});class N extends c{_parse(u){const{ctx:f,status:m}=this._processInputParams(u),k=this._def;if(f.parsedType!==i.ZodParsedType.array)return(0,r.addIssueToContext)(f,{code:s.ZodIssueCode.invalid_type,expected:i.ZodParsedType.array,received:f.parsedType}),r.INVALID;if(k.exactLength!==null){const I=f.data.length>k.exactLength.value,T=f.data.length<k.exactLength.value;(I||T)&&((0,r.addIssueToContext)(f,{code:I?s.ZodIssueCode.too_big:s.ZodIssueCode.too_small,minimum:T?k.exactLength.value:void 0,maximum:I?k.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:k.exactLength.message}),m.dirty())}if(k.minLength!==null&&f.data.length<k.minLength.value&&((0,r.addIssueToContext)(f,{code:s.ZodIssueCode.too_small,minimum:k.minLength.value,type:"array",inclusive:!0,exact:!1,message:k.minLength.message}),m.dirty()),k.maxLength!==null&&f.data.length>k.maxLength.value&&((0,r.addIssueToContext)(f,{code:s.ZodIssueCode.too_big,maximum:k.maxLength.value,type:"array",inclusive:!0,exact:!1,message:k.maxLength.message}),m.dirty()),f.common.async)return Promise.all([...f.data].map((I,T)=>k.type._parseAsync(new a(f,I,f.path,T)))).then(I=>r.ParseStatus.mergeArray(m,I));const w=[...f.data].map((I,T)=>k.type._parseSync(new a(f,I,f.path,T)));return r.ParseStatus.mergeArray(m,w)}get element(){return this._def.type}min(u,f){return new N({...this._def,minLength:{value:u,message:n.errorUtil.toString(f)}})}max(u,f){return new N({...this._def,maxLength:{value:u,message:n.errorUtil.toString(f)}})}length(u,f){return new N({...this._def,exactLength:{value:u,message:n.errorUtil.toString(f)}})}nonempty(u){return this.min(1,u)}}t.ZodArray=N,N.create=(_,u)=>new N({type:_,minLength:null,maxLength:null,exactLength:null,typeName:B.ZodArray,...l(u)});function O(_){if(_ instanceof R){const u={};for(const f in _.shape){const m=_.shape[f];u[f]=Vt.create(O(m))}return new R({..._._def,shape:()=>u})}else return _ instanceof N?new N({..._._def,type:O(_.element)}):_ instanceof Vt?Vt.create(O(_.unwrap())):_ instanceof Ln?Ln.create(O(_.unwrap())):_ instanceof me?me.create(_.items.map(u=>O(u))):_}class R extends c{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const u=this._def.shape(),f=i.util.objectKeys(u);return this._cached={shape:u,keys:f}}_parse(u){if(this._getType(u)!==i.ZodParsedType.object){const U=this._getOrReturnCtx(u);return(0,r.addIssueToContext)(U,{code:s.ZodIssueCode.invalid_type,expected:i.ZodParsedType.object,received:U.parsedType}),r.INVALID}const{status:m,ctx:k}=this._processInputParams(u),{shape:w,keys:I}=this._getCached(),T=[];if(!(this._def.catchall instanceof De&&this._def.unknownKeys==="strip"))for(const U in k.data)I.includes(U)||T.push(U);const z=[];for(const U of I){const q=w[U],ot=k.data[U];z.push({key:{status:"valid",value:U},value:q._parse(new a(k,ot,k.path,U)),alwaysSet:U in k.data})}if(this._def.catchall instanceof De){const U=this._def.unknownKeys;if(U==="passthrough")for(const q of T)z.push({key:{status:"valid",value:q},value:{status:"valid",value:k.data[q]}});else if(U==="strict")T.length>0&&((0,r.addIssueToContext)(k,{code:s.ZodIssueCode.unrecognized_keys,keys:T}),m.dirty());else if(U!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const U=this._def.catchall;for(const q of T){const ot=k.data[q];z.push({key:{status:"valid",value:q},value:U._parse(new a(k,ot,k.path,q)),alwaysSet:q in k.data})}}return k.common.async?Promise.resolve().then(async()=>{const U=[];for(const q of z){const ot=await q.key;U.push({key:ot,value:await q.value,alwaysSet:q.alwaysSet})}return U}).then(U=>r.ParseStatus.mergeObjectSync(m,U)):r.ParseStatus.mergeObjectSync(m,z)}get shape(){return this._def.shape()}strict(u){return n.errorUtil.errToObj,new R({...this._def,unknownKeys:"strict",...u!==void 0?{errorMap:(f,m)=>{var k,w,I,T;const z=(I=(w=(k=this._def).errorMap)===null||w===void 0?void 0:w.call(k,f,m).message)!==null&&I!==void 0?I:m.defaultError;return f.code==="unrecognized_keys"?{message:(T=n.errorUtil.errToObj(u).message)!==null&&T!==void 0?T:z}:{message:z}}}:{}})}strip(){return new R({...this._def,unknownKeys:"strip"})}passthrough(){return new R({...this._def,unknownKeys:"passthrough"})}extend(u){return new R({...this._def,shape:()=>({...this._def.shape(),...u})})}merge(u){return new R({unknownKeys:u._def.unknownKeys,catchall:u._def.catchall,shape:()=>({...this._def.shape(),...u._def.shape()}),typeName:B.ZodObject})}setKey(u,f){return this.augment({[u]:f})}catchall(u){return new R({...this._def,catchall:u})}pick(u){const f={};return i.util.objectKeys(u).forEach(m=>{u[m]&&this.shape[m]&&(f[m]=this.shape[m])}),new R({...this._def,shape:()=>f})}omit(u){const f={};return i.util.objectKeys(this.shape).forEach(m=>{u[m]||(f[m]=this.shape[m])}),new R({...this._def,shape:()=>f})}deepPartial(){return O(this)}partial(u){const f={};return i.util.objectKeys(this.shape).forEach(m=>{const k=this.shape[m];u&&!u[m]?f[m]=k:f[m]=k.optional()}),new R({...this._def,shape:()=>f})}required(u){const f={};return i.util.objectKeys(this.shape).forEach(m=>{if(u&&!u[m])f[m]=this.shape[m];else{let w=this.shape[m];for(;w instanceof Vt;)w=w._def.innerType;f[m]=w}}),new R({...this._def,shape:()=>f})}keyof(){return Ld(i.util.objectKeys(this.shape))}}t.ZodObject=R,R.create=(_,u)=>new R({shape:()=>_,unknownKeys:"strip",catchall:De.create(),typeName:B.ZodObject,...l(u)}),R.strictCreate=(_,u)=>new R({shape:()=>_,unknownKeys:"strict",catchall:De.create(),typeName:B.ZodObject,...l(u)}),R.lazycreate=(_,u)=>new R({shape:_,unknownKeys:"strip",catchall:De.create(),typeName:B.ZodObject,...l(u)});class M extends c{_parse(u){const{ctx:f}=this._processInputParams(u),m=this._def.options;function k(w){for(const T of w)if(T.result.status==="valid")return T.result;for(const T of w)if(T.result.status==="dirty")return f.common.issues.push(...T.ctx.common.issues),T.result;const I=w.map(T=>new s.ZodError(T.ctx.common.issues));return(0,r.addIssueToContext)(f,{code:s.ZodIssueCode.invalid_union,unionErrors:I}),r.INVALID}if(f.common.async)return Promise.all(m.map(async w=>{const I={...f,common:{...f.common,issues:[]},parent:null};return{result:await w._parseAsync({data:f.data,path:f.path,parent:I}),ctx:I}})).then(k);{let w;const I=[];for(const z of m){const U={...f,common:{...f.common,issues:[]},parent:null},q=z._parseSync({data:f.data,path:f.path,parent:U});if(q.status==="valid")return q;q.status==="dirty"&&!w&&(w={result:q,ctx:U}),U.common.issues.length&&I.push(U.common.issues)}if(w)return f.common.issues.push(...w.ctx.common.issues),w.result;const T=I.map(z=>new s.ZodError(z));return(0,r.addIssueToContext)(f,{code:s.ZodIssueCode.invalid_union,unionErrors:T}),r.INVALID}}get options(){return this._def.options}}t.ZodUnion=M,M.create=(_,u)=>new M({options:_,typeName:B.ZodUnion,...l(u)});const J=_=>_ instanceof Wr?J(_.schema):_ instanceof vt?J(_.innerType()):_ instanceof qr?[_.value]:_ instanceof ln?_.options:_ instanceof Qr?Object.keys(_.enum):_ instanceof Gr?J(_._def.innerType):_ instanceof Ge?[void 0]:_ instanceof Je?[null]:null;class Fe extends c{_parse(u){const{ctx:f}=this._processInputParams(u);if(f.parsedType!==i.ZodParsedType.object)return(0,r.addIssueToContext)(f,{code:s.ZodIssueCode.invalid_type,expected:i.ZodParsedType.object,received:f.parsedType}),r.INVALID;const m=this.discriminator,k=f.data[m],w=this.optionsMap.get(k);return w?f.common.async?w._parseAsync({data:f.data,path:f.path,parent:f}):w._parseSync({data:f.data,path:f.path,parent:f}):((0,r.addIssueToContext)(f,{code:s.ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[m]}),r.INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(u,f,m){const k=new Map;for(const w of f){const I=J(w.shape[u]);if(!I)throw new Error(`A discriminator value for key \`${u}\` could not be extracted from all schema options`);for(const T of I){if(k.has(T))throw new Error(`Discriminator property ${String(u)} has duplicate value ${String(T)}`);k.set(T,w)}}return new Fe({typeName:B.ZodDiscriminatedUnion,discriminator:u,options:f,optionsMap:k,...l(m)})}}t.ZodDiscriminatedUnion=Fe;function Xe(_,u){const f=(0,i.getParsedType)(_),m=(0,i.getParsedType)(u);if(_===u)return{valid:!0,data:_};if(f===i.ZodParsedType.object&&m===i.ZodParsedType.object){const k=i.util.objectKeys(u),w=i.util.objectKeys(_).filter(T=>k.indexOf(T)!==-1),I={..._,...u};for(const T of w){const z=Xe(_[T],u[T]);if(!z.valid)return{valid:!1};I[T]=z.data}return{valid:!0,data:I}}else if(f===i.ZodParsedType.array&&m===i.ZodParsedType.array){if(_.length!==u.length)return{valid:!1};const k=[];for(let w=0;w<_.length;w++){const I=_[w],T=u[w],z=Xe(I,T);if(!z.valid)return{valid:!1};k.push(z.data)}return{valid:!0,data:k}}else return f===i.ZodParsedType.date&&m===i.ZodParsedType.date&&+_==+u?{valid:!0,data:_}:{valid:!1}}class Bt extends c{_parse(u){const{status:f,ctx:m}=this._processInputParams(u),k=(w,I)=>{if((0,r.isAborted)(w)||(0,r.isAborted)(I))return r.INVALID;const T=Xe(w.value,I.value);return T.valid?(((0,r.isDirty)(w)||(0,r.isDirty)(I))&&f.dirty(),{status:f.value,value:T.data}):((0,r.addIssueToContext)(m,{code:s.ZodIssueCode.invalid_intersection_types}),r.INVALID)};return m.common.async?Promise.all([this._def.left._parseAsync({data:m.data,path:m.path,parent:m}),this._def.right._parseAsync({data:m.data,path:m.path,parent:m})]).then(([w,I])=>k(w,I)):k(this._def.left._parseSync({data:m.data,path:m.path,parent:m}),this._def.right._parseSync({data:m.data,path:m.path,parent:m}))}}t.ZodIntersection=Bt,Bt.create=(_,u,f)=>new Bt({left:_,right:u,typeName:B.ZodIntersection,...l(f)});class me extends c{_parse(u){const{status:f,ctx:m}=this._processInputParams(u);if(m.parsedType!==i.ZodParsedType.array)return(0,r.addIssueToContext)(m,{code:s.ZodIssueCode.invalid_type,expected:i.ZodParsedType.array,received:m.parsedType}),r.INVALID;if(m.data.length<this._def.items.length)return(0,r.addIssueToContext)(m,{code:s.ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.INVALID;!this._def.rest&&m.data.length>this._def.items.length&&((0,r.addIssueToContext)(m,{code:s.ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),f.dirty());const w=[...m.data].map((I,T)=>{const z=this._def.items[T]||this._def.rest;return z?z._parse(new a(m,I,m.path,T)):null}).filter(I=>!!I);return m.common.async?Promise.all(w).then(I=>r.ParseStatus.mergeArray(f,I)):r.ParseStatus.mergeArray(f,w)}get items(){return this._def.items}rest(u){return new me({...this._def,rest:u})}}t.ZodTuple=me,me.create=(_,u)=>{if(!Array.isArray(_))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new me({items:_,typeName:B.ZodTuple,rest:null,...l(u)})};class Rt extends c{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(u){const{status:f,ctx:m}=this._processInputParams(u);if(m.parsedType!==i.ZodParsedType.object)return(0,r.addIssueToContext)(m,{code:s.ZodIssueCode.invalid_type,expected:i.ZodParsedType.object,received:m.parsedType}),r.INVALID;const k=[],w=this._def.keyType,I=this._def.valueType;for(const T in m.data)k.push({key:w._parse(new a(m,T,m.path,T)),value:I._parse(new a(m,m.data[T],m.path,T))});return m.common.async?r.ParseStatus.mergeObjectAsync(f,k):r.ParseStatus.mergeObjectSync(f,k)}get element(){return this._def.valueType}static create(u,f,m){return f instanceof c?new Rt({keyType:u,valueType:f,typeName:B.ZodRecord,...l(m)}):new Rt({keyType:x.create(),valueType:u,typeName:B.ZodRecord,...l(f)})}}t.ZodRecord=Rt;class Ps extends c{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(u){const{status:f,ctx:m}=this._processInputParams(u);if(m.parsedType!==i.ZodParsedType.map)return(0,r.addIssueToContext)(m,{code:s.ZodIssueCode.invalid_type,expected:i.ZodParsedType.map,received:m.parsedType}),r.INVALID;const k=this._def.keyType,w=this._def.valueType,I=[...m.data.entries()].map(([T,z],U)=>({key:k._parse(new a(m,T,m.path,[U,"key"])),value:w._parse(new a(m,z,m.path,[U,"value"]))}));if(m.common.async){const T=new Map;return Promise.resolve().then(async()=>{for(const z of I){const U=await z.key,q=await z.value;if(U.status==="aborted"||q.status==="aborted")return r.INVALID;(U.status==="dirty"||q.status==="dirty")&&f.dirty(),T.set(U.value,q.value)}return{status:f.value,value:T}})}else{const T=new Map;for(const z of I){const U=z.key,q=z.value;if(U.status==="aborted"||q.status==="aborted")return r.INVALID;(U.status==="dirty"||q.status==="dirty")&&f.dirty(),T.set(U.value,q.value)}return{status:f.value,value:T}}}}t.ZodMap=Ps,Ps.create=(_,u,f)=>new Ps({valueType:u,keyType:_,typeName:B.ZodMap,...l(f)});class Dn extends c{_parse(u){const{status:f,ctx:m}=this._processInputParams(u);if(m.parsedType!==i.ZodParsedType.set)return(0,r.addIssueToContext)(m,{code:s.ZodIssueCode.invalid_type,expected:i.ZodParsedType.set,received:m.parsedType}),r.INVALID;const k=this._def;k.minSize!==null&&m.data.size<k.minSize.value&&((0,r.addIssueToContext)(m,{code:s.ZodIssueCode.too_small,minimum:k.minSize.value,type:"set",inclusive:!0,exact:!1,message:k.minSize.message}),f.dirty()),k.maxSize!==null&&m.data.size>k.maxSize.value&&((0,r.addIssueToContext)(m,{code:s.ZodIssueCode.too_big,maximum:k.maxSize.value,type:"set",inclusive:!0,exact:!1,message:k.maxSize.message}),f.dirty());const w=this._def.valueType;function I(z){const U=new Set;for(const q of z){if(q.status==="aborted")return r.INVALID;q.status==="dirty"&&f.dirty(),U.add(q.value)}return{status:f.value,value:U}}const T=[...m.data.values()].map((z,U)=>w._parse(new a(m,z,m.path,U)));return m.common.async?Promise.all(T).then(z=>I(z)):I(T)}min(u,f){return new Dn({...this._def,minSize:{value:u,message:n.errorUtil.toString(f)}})}max(u,f){return new Dn({...this._def,maxSize:{value:u,message:n.errorUtil.toString(f)}})}size(u,f){return this.min(u,f).max(u,f)}nonempty(u){return this.min(1,u)}}t.ZodSet=Dn,Dn.create=(_,u)=>new Dn({valueType:_,minSize:null,maxSize:null,typeName:B.ZodSet,...l(u)});class sr extends c{constructor(){super(...arguments),this.validate=this.implement}_parse(u){const{ctx:f}=this._processInputParams(u);if(f.parsedType!==i.ZodParsedType.function)return(0,r.addIssueToContext)(f,{code:s.ZodIssueCode.invalid_type,expected:i.ZodParsedType.function,received:f.parsedType}),r.INVALID;function m(T,z){return(0,r.makeIssue)({data:T,path:f.path,errorMaps:[f.common.contextualErrorMap,f.schemaErrorMap,(0,e.getErrorMap)(),e.defaultErrorMap].filter(U=>!!U),issueData:{code:s.ZodIssueCode.invalid_arguments,argumentsError:z}})}function k(T,z){return(0,r.makeIssue)({data:T,path:f.path,errorMaps:[f.common.contextualErrorMap,f.schemaErrorMap,(0,e.getErrorMap)(),e.defaultErrorMap].filter(U=>!!U),issueData:{code:s.ZodIssueCode.invalid_return_type,returnTypeError:z}})}const w={errorMap:f.common.contextualErrorMap},I=f.data;if(this._def.returns instanceof ar){const T=this;return(0,r.OK)(async function(...z){const U=new s.ZodError([]),q=await T._def.args.parseAsync(z,w).catch(ol=>{throw U.addIssue(m(z,ol)),U}),ot=await Reflect.apply(I,this,q);return await T._def.returns._def.type.parseAsync(ot,w).catch(ol=>{throw U.addIssue(k(ot,ol)),U})})}else{const T=this;return(0,r.OK)(function(...z){const U=T._def.args.safeParse(z,w);if(!U.success)throw new s.ZodError([m(z,U.error)]);const q=Reflect.apply(I,this,U.data),ot=T._def.returns.safeParse(q,w);if(!ot.success)throw new s.ZodError([k(q,ot.error)]);return ot.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...u){return new sr({...this._def,args:me.create(u).rest(gt.create())})}returns(u){return new sr({...this._def,returns:u})}implement(u){return this.parse(u)}strictImplement(u){return this.parse(u)}static create(u,f,m){return new sr({args:u||me.create([]).rest(gt.create()),returns:f||gt.create(),typeName:B.ZodFunction,...l(m)})}}t.ZodFunction=sr;class Wr extends c{get schema(){return this._def.getter()}_parse(u){const{ctx:f}=this._processInputParams(u);return this._def.getter()._parse({data:f.data,path:f.path,parent:f})}}t.ZodLazy=Wr,Wr.create=(_,u)=>new Wr({getter:_,typeName:B.ZodLazy,...l(u)});class qr extends c{_parse(u){if(u.data!==this._def.value){const f=this._getOrReturnCtx(u);return(0,r.addIssueToContext)(f,{received:f.data,code:s.ZodIssueCode.invalid_literal,expected:this._def.value}),r.INVALID}return{status:"valid",value:u.data}}get value(){return this._def.value}}t.ZodLiteral=qr,qr.create=(_,u)=>new qr({value:_,typeName:B.ZodLiteral,...l(u)});function Ld(_,u){return new ln({values:_,typeName:B.ZodEnum,...l(u)})}class ln extends c{_parse(u){if(typeof u.data!="string"){const f=this._getOrReturnCtx(u),m=this._def.values;return(0,r.addIssueToContext)(f,{expected:i.util.joinValues(m),received:f.parsedType,code:s.ZodIssueCode.invalid_type}),r.INVALID}if(this._def.values.indexOf(u.data)===-1){const f=this._getOrReturnCtx(u),m=this._def.values;return(0,r.addIssueToContext)(f,{received:f.data,code:s.ZodIssueCode.invalid_enum_value,options:m}),r.INVALID}return(0,r.OK)(u.data)}get options(){return this._def.values}get enum(){const u={};for(const f of this._def.values)u[f]=f;return u}get Values(){const u={};for(const f of this._def.values)u[f]=f;return u}get Enum(){const u={};for(const f of this._def.values)u[f]=f;return u}extract(u){return ln.create(u)}exclude(u){return ln.create(this.options.filter(f=>!u.includes(f)))}}t.ZodEnum=ln,ln.create=Ld;class Qr extends c{_parse(u){const f=i.util.getValidEnumValues(this._def.values),m=this._getOrReturnCtx(u);if(m.parsedType!==i.ZodParsedType.string&&m.parsedType!==i.ZodParsedType.number){const k=i.util.objectValues(f);return(0,r.addIssueToContext)(m,{expected:i.util.joinValues(k),received:m.parsedType,code:s.ZodIssueCode.invalid_type}),r.INVALID}if(f.indexOf(u.data)===-1){const k=i.util.objectValues(f);return(0,r.addIssueToContext)(m,{received:m.data,code:s.ZodIssueCode.invalid_enum_value,options:k}),r.INVALID}return(0,r.OK)(u.data)}get enum(){return this._def.values}}t.ZodNativeEnum=Qr,Qr.create=(_,u)=>new Qr({values:_,typeName:B.ZodNativeEnum,...l(u)});class ar extends c{unwrap(){return this._def.type}_parse(u){const{ctx:f}=this._processInputParams(u);if(f.parsedType!==i.ZodParsedType.promise&&f.common.async===!1)return(0,r.addIssueToContext)(f,{code:s.ZodIssueCode.invalid_type,expected:i.ZodParsedType.promise,received:f.parsedType}),r.INVALID;const m=f.parsedType===i.ZodParsedType.promise?f.data:Promise.resolve(f.data);return(0,r.OK)(m.then(k=>this._def.type.parseAsync(k,{path:f.path,errorMap:f.common.contextualErrorMap})))}}t.ZodPromise=ar,ar.create=(_,u)=>new ar({type:_,typeName:B.ZodPromise,...l(u)});class vt extends c{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===B.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(u){const{status:f,ctx:m}=this._processInputParams(u),k=this._def.effect||null,w={addIssue:I=>{(0,r.addIssueToContext)(m,I),I.fatal?f.abort():f.dirty()},get path(){return m.path}};if(w.addIssue=w.addIssue.bind(w),k.type==="preprocess"){const I=k.transform(m.data,w);return m.common.issues.length?{status:"dirty",value:m.data}:m.common.async?Promise.resolve(I).then(T=>this._def.schema._parseAsync({data:T,path:m.path,parent:m})):this._def.schema._parseSync({data:I,path:m.path,parent:m})}if(k.type==="refinement"){const I=T=>{const z=k.refinement(T,w);if(m.common.async)return Promise.resolve(z);if(z instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return T};if(m.common.async===!1){const T=this._def.schema._parseSync({data:m.data,path:m.path,parent:m});return T.status==="aborted"?r.INVALID:(T.status==="dirty"&&f.dirty(),I(T.value),{status:f.value,value:T.value})}else return this._def.schema._parseAsync({data:m.data,path:m.path,parent:m}).then(T=>T.status==="aborted"?r.INVALID:(T.status==="dirty"&&f.dirty(),I(T.value).then(()=>({status:f.value,value:T.value}))))}if(k.type==="transform")if(m.common.async===!1){const I=this._def.schema._parseSync({data:m.data,path:m.path,parent:m});if(!(0,r.isValid)(I))return I;const T=k.transform(I.value,w);if(T instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:f.value,value:T}}else return this._def.schema._parseAsync({data:m.data,path:m.path,parent:m}).then(I=>(0,r.isValid)(I)?Promise.resolve(k.transform(I.value,w)).then(T=>({status:f.value,value:T})):I);i.util.assertNever(k)}}t.ZodEffects=vt,t.ZodTransformer=vt,vt.create=(_,u,f)=>new vt({schema:_,typeName:B.ZodEffects,effect:u,...l(f)}),vt.createWithPreprocess=(_,u,f)=>new vt({schema:u,effect:{type:"preprocess",transform:_},typeName:B.ZodEffects,...l(f)});class Vt extends c{_parse(u){return this._getType(u)===i.ZodParsedType.undefined?(0,r.OK)(void 0):this._def.innerType._parse(u)}unwrap(){return this._def.innerType}}t.ZodOptional=Vt,Vt.create=(_,u)=>new Vt({innerType:_,typeName:B.ZodOptional,...l(u)});class Ln extends c{_parse(u){return this._getType(u)===i.ZodParsedType.null?(0,r.OK)(null):this._def.innerType._parse(u)}unwrap(){return this._def.innerType}}t.ZodNullable=Ln,Ln.create=(_,u)=>new Ln({innerType:_,typeName:B.ZodNullable,...l(u)});class Gr extends c{_parse(u){const{ctx:f}=this._processInputParams(u);let m=f.data;return f.parsedType===i.ZodParsedType.undefined&&(m=this._def.defaultValue()),this._def.innerType._parse({data:m,path:f.path,parent:f})}removeDefault(){return this._def.innerType}}t.ZodDefault=Gr,Gr.create=(_,u)=>new Gr({innerType:_,typeName:B.ZodDefault,defaultValue:typeof u.default=="function"?u.default:()=>u.default,...l(u)});class Ts extends c{_parse(u){const{ctx:f}=this._processInputParams(u),m={...f,common:{...f.common,issues:[]}},k=this._def.innerType._parse({data:m.data,path:m.path,parent:{...m}});return(0,r.isAsync)(k)?k.then(w=>({status:"valid",value:w.status==="valid"?w.value:this._def.catchValue({get error(){return new s.ZodError(m.common.issues)},input:m.data})})):{status:"valid",value:k.status==="valid"?k.value:this._def.catchValue({get error(){return new s.ZodError(m.common.issues)},input:m.data})}}removeCatch(){return this._def.innerType}}t.ZodCatch=Ts,Ts.create=(_,u)=>new Ts({innerType:_,typeName:B.ZodCatch,catchValue:typeof u.catch=="function"?u.catch:()=>u.catch,...l(u)});class xs extends c{_parse(u){if(this._getType(u)!==i.ZodParsedType.nan){const m=this._getOrReturnCtx(u);return(0,r.addIssueToContext)(m,{code:s.ZodIssueCode.invalid_type,expected:i.ZodParsedType.nan,received:m.parsedType}),r.INVALID}return{status:"valid",value:u.data}}}t.ZodNaN=xs,xs.create=_=>new xs({typeName:B.ZodNaN,...l(_)}),t.BRAND=Symbol("zod_brand");class $d extends c{_parse(u){const{ctx:f}=this._processInputParams(u),m=f.data;return this._def.type._parse({data:m,path:f.path,parent:f})}unwrap(){return this._def.type}}t.ZodBranded=$d;class Jr extends c{_parse(u){const{status:f,ctx:m}=this._processInputParams(u);if(m.common.async)return(async()=>{const w=await this._def.in._parseAsync({data:m.data,path:m.path,parent:m});return w.status==="aborted"?r.INVALID:w.status==="dirty"?(f.dirty(),(0,r.DIRTY)(w.value)):this._def.out._parseAsync({data:w.value,path:m.path,parent:m})})();{const k=this._def.in._parseSync({data:m.data,path:m.path,parent:m});return k.status==="aborted"?r.INVALID:k.status==="dirty"?(f.dirty(),{status:"dirty",value:k.value}):this._def.out._parseSync({data:k.value,path:m.path,parent:m})}}static create(u,f){return new Jr({in:u,out:f,typeName:B.ZodPipeline})}}t.ZodPipeline=Jr;class Is extends c{_parse(u){const f=this._def.innerType._parse(u);return(0,r.isValid)(f)&&(f.value=Object.freeze(f.value)),f}}t.ZodReadonly=Is,Is.create=(_,u)=>new Is({innerType:_,typeName:B.ZodReadonly,...l(u)});const ng=(_,u={},f)=>_?at.create().superRefine((m,k)=>{var w,I;if(!_(m)){const T=typeof u=="function"?u(m):typeof u=="string"?{message:u}:u,z=(I=(w=T.fatal)!==null&&w!==void 0?w:f)!==null&&I!==void 0?I:!0,U=typeof T=="string"?{message:T}:T;k.addIssue({code:"custom",...U,fatal:z})}}):at.create();t.custom=ng,t.late={object:R.lazycreate};var B;(function(_){_.ZodString="ZodString",_.ZodNumber="ZodNumber",_.ZodNaN="ZodNaN",_.ZodBigInt="ZodBigInt",_.ZodBoolean="ZodBoolean",_.ZodDate="ZodDate",_.ZodSymbol="ZodSymbol",_.ZodUndefined="ZodUndefined",_.ZodNull="ZodNull",_.ZodAny="ZodAny",_.ZodUnknown="ZodUnknown",_.ZodNever="ZodNever",_.ZodVoid="ZodVoid",_.ZodArray="ZodArray",_.ZodObject="ZodObject",_.ZodUnion="ZodUnion",_.ZodDiscriminatedUnion="ZodDiscriminatedUnion",_.ZodIntersection="ZodIntersection",_.ZodTuple="ZodTuple",_.ZodRecord="ZodRecord",_.ZodMap="ZodMap",_.ZodSet="ZodSet",_.ZodFunction="ZodFunction",_.ZodLazy="ZodLazy",_.ZodLiteral="ZodLiteral",_.ZodEnum="ZodEnum",_.ZodEffects="ZodEffects",_.ZodNativeEnum="ZodNativeEnum",_.ZodOptional="ZodOptional",_.ZodNullable="ZodNullable",_.ZodDefault="ZodDefault",_.ZodCatch="ZodCatch",_.ZodPromise="ZodPromise",_.ZodBranded="ZodBranded",_.ZodPipeline="ZodPipeline",_.ZodReadonly="ZodReadonly"})(B=t.ZodFirstPartyTypeKind||(t.ZodFirstPartyTypeKind={}));const rg=(_,u={message:`Input not instance of ${_.name}`})=>(0,t.custom)(f=>f instanceof _,u);t.instanceof=rg;const Md=x.create;t.string=Md;const Ud=D.create;t.number=Ud;const ig=xs.create;t.nan=ig;const sg=L.create;t.bigint=sg;const Zd=H.create;t.boolean=Zd;const ag=F.create;t.date=ag;const og=pe.create;t.symbol=og;const lg=Ge.create;t.undefined=lg;const ug=Je.create;t.null=ug;const cg=at.create;t.any=cg;const dg=gt.create;t.unknown=dg;const fg=De.create;t.never=fg;const hg=At.create;t.void=hg;const pg=N.create;t.array=pg;const mg=R.create;t.object=mg;const yg=R.strictCreate;t.strictObject=yg;const gg=M.create;t.union=gg;const vg=Fe.create;t.discriminatedUnion=vg;const _g=Bt.create;t.intersection=_g;const wg=me.create;t.tuple=wg;const bg=Rt.create;t.record=bg;const Eg=Ps.create;t.map=Eg;const kg=Dn.create;t.set=kg;const Sg=sr.create;t.function=Sg;const Cg=Wr.create;t.lazy=Cg;const Pg=qr.create;t.literal=Pg;const Tg=ln.create;t.enum=Tg;const xg=Qr.create;t.nativeEnum=xg;const Ig=ar.create;t.promise=Ig;const zd=vt.create;t.effect=zd,t.transformer=zd;const Og=Vt.create;t.optional=Og;const Ag=Ln.create;t.nullable=Ag;const Rg=vt.createWithPreprocess;t.preprocess=Rg;const Ng=Jr.create;t.pipeline=Ng;const jg=()=>Md().optional();t.ostring=jg;const Dg=()=>Ud().optional();t.onumber=Dg;const Lg=()=>Zd().optional();t.oboolean=Lg,t.coerce={string:_=>x.create({..._,coerce:!0}),number:_=>D.create({..._,coerce:!0}),boolean:_=>H.create({..._,coerce:!0}),bigint:_=>L.create({..._,coerce:!0}),date:_=>F.create({..._,coerce:!0})},t.NEVER=r.INVALID})(Ly);(function(t){var e=Oe&&Oe.__createBinding||(Object.create?function(r,i,s,a){a===void 0&&(a=s),Object.defineProperty(r,a,{enumerable:!0,get:function(){return i[s]}})}:function(r,i,s,a){a===void 0&&(a=s),r[a]=i[s]}),n=Oe&&Oe.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(Zt,t),n(Cd,t),n(Dy,t),n(ks,t),n(Ly,t),n(zt,t)})(ec);(function(t){var e=Oe&&Oe.__createBinding||(Object.create?function(a,o,l,c){c===void 0&&(c=l),Object.defineProperty(a,c,{enumerable:!0,get:function(){return o[l]}})}:function(a,o,l,c){c===void 0&&(c=l),a[c]=o[l]}),n=Oe&&Oe.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Oe&&Oe.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var l in a)l!=="default"&&Object.prototype.hasOwnProperty.call(a,l)&&e(o,a,l);return n(o,a),o},i=Oe&&Oe.__exportStar||function(a,o){for(var l in a)l!=="default"&&!Object.prototype.hasOwnProperty.call(o,l)&&e(o,a,l)};Object.defineProperty(t,"__esModule",{value:!0}),t.z=void 0;const s=r(ec);t.z=s,i(ec,t),t.default=s})(zo);var Bo={};Object.defineProperty(Bo,"__esModule",{value:!0});Bo.parseAnyDef=void 0;function k0(){return{}}Bo.parseAnyDef=k0;var oi={},sn={};Object.defineProperty(sn,"__esModule",{value:!0});sn.setResponseValueAndErrors=sn.addErrorMessage=void 0;function My(t,e,n,r){r!=null&&r.errorMessages&&n&&(t.errorMessage=Object.assign(Object.assign({},t.errorMessage),{[e]:n}))}sn.addErrorMessage=My;function S0(t,e,n,r,i){t[e]=n,My(t,e,r,i)}sn.setResponseValueAndErrors=S0;var mh;function C0(){if(mh)return oi;mh=1,Object.defineProperty(oi,"__esModule",{value:!0}),oi.parseArrayDef=void 0;const t=zo,e=sn,n=Pe();function r(i,s){var a,o;const l={type:"array"};return((o=(a=i.type)===null||a===void 0?void 0:a._def)===null||o===void 0?void 0:o.typeName)!==t.ZodFirstPartyTypeKind.ZodAny&&(l.items=(0,n.parseDef)(i.type._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"items"]}))),i.minLength&&(0,e.setResponseValueAndErrors)(l,"minItems",i.minLength.value,i.minLength.message,s),i.maxLength&&(0,e.setResponseValueAndErrors)(l,"maxItems",i.maxLength.value,i.maxLength.message,s),l}return oi.parseArrayDef=r,oi}var Vo={};Object.defineProperty(Vo,"__esModule",{value:!0});Vo.parseBigintDef=void 0;function P0(){return{type:"integer",format:"int64"}}Vo.parseBigintDef=P0;var Ho={};Object.defineProperty(Ho,"__esModule",{value:!0});Ho.parseBooleanDef=void 0;function T0(){return{type:"boolean"}}Ho.parseBooleanDef=T0;var li={},yh;function x0(){if(yh)return li;yh=1,Object.defineProperty(li,"__esModule",{value:!0}),li.parseBrandedDef=void 0;const t=Pe();function e(n,r){return(0,t.parseDef)(n.type._def,r)}return li.parseBrandedDef=e,li}var ui={},gh;function I0(){if(gh)return ui;gh=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.parseCatchDef=void 0;const t=Pe(),e=(n,r)=>(0,t.parseDef)(n.innerType._def,r);return ui.parseCatchDef=e,ui}var Ko={};Object.defineProperty(Ko,"__esModule",{value:!0});Ko.parseDateDef=void 0;function O0(){return{type:"string",format:"date-time"}}Ko.parseDateDef=O0;var ci={},vh;function A0(){if(vh)return ci;vh=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci.parseDefaultDef=void 0;const t=Pe();function e(n,r){return Object.assign(Object.assign({},(0,t.parseDef)(n.innerType._def,r)),{default:n.defaultValue()})}return ci.parseDefaultDef=e,ci}var di={},_h;function R0(){if(_h)return di;_h=1,Object.defineProperty(di,"__esModule",{value:!0}),di.parseEffectsDef=void 0;const t=Pe();function e(n,r){return r.effectStrategy==="input"?(0,t.parseDef)(n.schema._def,r):{}}return di.parseEffectsDef=e,di}var Wo={};Object.defineProperty(Wo,"__esModule",{value:!0});Wo.parseEnumDef=void 0;function N0(t){return{type:"string",enum:t.values}}Wo.parseEnumDef=N0;var fi={},wh;function j0(){if(wh)return fi;wh=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.parseIntersectionDef=void 0;const t=Pe();function e(n,r){const i=[(0,t.parseDef)(n.left._def,Object.assign(Object.assign({},r),{currentPath:[...r.currentPath,"allOf","0"]})),(0,t.parseDef)(n.right._def,Object.assign(Object.assign({},r),{currentPath:[...r.currentPath,"allOf","1"]}))].filter(s=>!!s);return i.length?{allOf:i}:void 0}return fi.parseIntersectionDef=e,fi}var qo={};Object.defineProperty(qo,"__esModule",{value:!0});qo.parseLiteralDef=void 0;function D0(t,e){const n=typeof t.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[t.value]}:{type:n==="bigint"?"integer":n,const:t.value}}qo.parseLiteralDef=D0;var hi={},bh;function L0(){if(bh)return hi;bh=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.parseMapDef=void 0;const t=Pe();function e(n,r){const i=(0,t.parseDef)(n.keyType._def,Object.assign(Object.assign({},r),{currentPath:[...r.currentPath,"items","items","0"]}))||{},s=(0,t.parseDef)(n.valueType._def,Object.assign(Object.assign({},r),{currentPath:[...r.currentPath,"items","items","1"]}))||{};return{type:"array",maxItems:125,items:{type:"array",items:[i,s],minItems:2,maxItems:2}}}return hi.parseMapDef=e,hi}var Qo={};Object.defineProperty(Qo,"__esModule",{value:!0});Qo.parseNativeEnumDef=void 0;function $0(t){const e=t.values,r=Object.keys(t.values).filter(s=>typeof e[e[s]]!="number").map(s=>e[s]),i=Array.from(new Set(r.map(s=>typeof s)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:r}}Qo.parseNativeEnumDef=$0;var Go={};Object.defineProperty(Go,"__esModule",{value:!0});Go.parseNeverDef=void 0;function M0(){return{not:{}}}Go.parseNeverDef=M0;var Jo={};Object.defineProperty(Jo,"__esModule",{value:!0});Jo.parseNullDef=void 0;function U0(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}Jo.parseNullDef=U0;var pi={},Ul={},Eh;function Uy(){return Eh||(Eh=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.parseUnionDef=t.primitiveMappings=void 0;const e=Pe();t.primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function n(i,s){if(s.target==="openApi3")return r(i,s);const a=i.options instanceof Map?Array.from(i.options.values()):i.options;if(a.every(o=>o._def.typeName in t.primitiveMappings&&(!o._def.checks||!o._def.checks.length))){const o=a.reduce((l,c)=>{const d=t.primitiveMappings[c._def.typeName];return d&&!l.includes(d)?[...l,d]:l},[]);return{type:o.length>1?o:o[0]}}else if(a.every(o=>o._def.typeName==="ZodLiteral")){const o=a.reduce((l,c)=>{const d=typeof c._def.value;switch(d){case"string":case"number":case"boolean":return[...l,d];case"bigint":return[...l,"integer"];case"object":if(c._def.value===null)return[...l,"null"];case"symbol":case"undefined":case"function":default:return l}},[]);if(o.length===a.length){const l=o.filter((c,d,p)=>p.indexOf(c)===d);return{type:l.length>1?l:l[0],enum:a.reduce((c,d)=>c.includes(d._def.value)?c:[...c,d._def.value],[])}}}else if(a.every(o=>o._def.typeName==="ZodEnum"))return{type:"string",enum:a.reduce((o,l)=>[...o,...l._def.values.filter(c=>!o.includes(c))],[])};return r(i,s)}t.parseUnionDef=n;const r=(i,s)=>{const a=(i.options instanceof Map?Array.from(i.options.values()):i.options).map((o,l)=>(0,e.parseDef)(o._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"anyOf",`${l}`]}))).filter(o=>!!o&&(!s.strictUnions||typeof o=="object"&&Object.keys(o).length>0));return a.length?{anyOf:a}:void 0}}(Ul)),Ul}var kh;function Z0(){if(kh)return pi;kh=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.parseNullableDef=void 0;const t=Pe(),e=Uy();function n(r,i){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(r.innerType._def.typeName)&&(!r.innerType._def.checks||!r.innerType._def.checks.length))return i.target==="openApi3"?{type:e.primitiveMappings[r.innerType._def.typeName],nullable:!0}:{type:[e.primitiveMappings[r.innerType._def.typeName],"null"]};const s=(0,t.parseDef)(r.innerType._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"anyOf","0"]}));return s?i.target==="openApi3"?Object.assign(Object.assign({},s),{nullable:!0}):{anyOf:[s,{type:"null"}]}:void 0}return pi.parseNullableDef=n,pi}var Xo={};Object.defineProperty(Xo,"__esModule",{value:!0});Xo.parseNumberDef=void 0;const fn=sn;function z0(t,e){const n={type:"number"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"int":n.type="integer",(0,fn.addErrorMessage)(n,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?(0,fn.setResponseValueAndErrors)(n,"minimum",r.value,r.message,e):(0,fn.setResponseValueAndErrors)(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),(0,fn.setResponseValueAndErrors)(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?(0,fn.setResponseValueAndErrors)(n,"maximum",r.value,r.message,e):(0,fn.setResponseValueAndErrors)(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),(0,fn.setResponseValueAndErrors)(n,"maximum",r.value,r.message,e));break;case"multipleOf":(0,fn.setResponseValueAndErrors)(n,"multipleOf",r.value,r.message,e);break}return n}Xo.parseNumberDef=z0;var mi={},Sh;function F0(){if(Sh)return mi;Sh=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.parseObjectDef=void 0;const t=Pe();function e(n,r){var i;const s=Object.assign(Object.assign({type:"object"},Object.entries(n.shape()).reduce((a,[o,l])=>{if(l===void 0||l._def===void 0)return a;const c=(0,t.parseDef)(l._def,Object.assign(Object.assign({},r),{currentPath:[...r.currentPath,"properties",o],propertyPath:[...r.currentPath,"properties",o]}));return c===void 0?a:{properties:Object.assign(Object.assign({},a.properties),{[o]:c}),required:l.isOptional()?a.required:[...a.required,o]}},{properties:{},required:[]})),{additionalProperties:n.catchall._def.typeName==="ZodNever"?n.unknownKeys==="passthrough":(i=(0,t.parseDef)(n.catchall._def,Object.assign(Object.assign({},r),{currentPath:[...r.currentPath,"additionalProperties"]})))!==null&&i!==void 0?i:!0});return s.required.length||delete s.required,s}return mi.parseObjectDef=e,mi}var yi={},Ch;function B0(){if(Ch)return yi;Ch=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.parseOptionalDef=void 0;const t=Pe(),e=(n,r)=>{var i;if(r.currentPath.toString()===((i=r.propertyPath)===null||i===void 0?void 0:i.toString()))return(0,t.parseDef)(n.innerType._def,r);const s=(0,t.parseDef)(n.innerType._def,Object.assign(Object.assign({},r),{currentPath:[...r.currentPath,"anyOf","1"]}));return s?{anyOf:[{not:{}},s]}:{}};return yi.parseOptionalDef=e,yi}var gi={},Ph;function V0(){if(Ph)return gi;Ph=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.parsePipelineDef=void 0;const t=Pe(),e=(n,r)=>{const i=(0,t.parseDef)(n.in._def,Object.assign(Object.assign({},r),{currentPath:[...r.currentPath,"allOf","0"]})),s=(0,t.parseDef)(n.out._def,Object.assign(Object.assign({},r),{currentPath:[...r.currentPath,"allOf",i?"1":"0"]}));return{allOf:[i,s].filter(a=>a!==void 0)}};return gi.parsePipelineDef=e,gi}var vi={},Th;function H0(){if(Th)return vi;Th=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.parsePromiseDef=void 0;const t=Pe();function e(n,r){return(0,t.parseDef)(n.type._def,r)}return vi.parsePromiseDef=e,vi}var _i={},Ss={};Object.defineProperty(Ss,"__esModule",{value:!0});Ss.parseStringDef=void 0;const Kt=sn;function K0(t,e){const n={type:"string"};if(t.checks)for(const r of t.checks)switch(r.kind){case"min":(0,Kt.setResponseValueAndErrors)(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e);break;case"max":(0,Kt.setResponseValueAndErrors)(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"email":(0,Kt.setResponseValueAndErrors)(n,"format","email",r.message,e);break;case"url":(0,Kt.setResponseValueAndErrors)(n,"format","uri",r.message,e);break;case"uuid":(0,Kt.setResponseValueAndErrors)(n,"format","uuid",r.message,e);break;case"regex":wi(n,r.regex.source,r.message,e);break;case"cuid":wi(n,"^c[^\\s-]{8,}$",r.message,e);break;case"cuid2":wi(n,"^[a-z][a-z0-9]*$",r.message,e);break;case"startsWith":wi(n,"^"+xh(r.value),r.message,e);break;case"endsWith":wi(n,xh(r.value)+"$",r.message,e);break;case"trim":break;case"datetime":(0,Kt.setResponseValueAndErrors)(n,"format","date-time",r.message,e);break;case"length":(0,Kt.setResponseValueAndErrors)(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e),(0,Kt.setResponseValueAndErrors)(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break}return n}Ss.parseStringDef=K0;const xh=t=>Array.from(t).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),wi=(t,e,n,r)=>{var i;t.pattern||!((i=t.allOf)===null||i===void 0)&&i.some(s=>s.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push(Object.assign({pattern:t.pattern},t.errorMessage&&r.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}})),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push(Object.assign({pattern:e},n&&r.errorMessages&&{errorMessage:{pattern:n}}))):(0,Kt.setResponseValueAndErrors)(t,"pattern",e,n,r)};var Ih;function W0(){if(Ih)return _i;Ih=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.parseRecordDef=void 0;const t=zo,e=Pe(),n=Ss;function r(i,s){var a,o,l;const c={type:"object",additionalProperties:(0,e.parseDef)(i.valueType._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"additionalProperties"]}))||{}};if(((a=i.keyType)===null||a===void 0?void 0:a._def.typeName)===t.ZodFirstPartyTypeKind.ZodString&&(!((o=i.keyType._def.checks)===null||o===void 0)&&o.length)){const d=Object.entries((0,n.parseStringDef)(i.keyType._def,s)).reduce((p,[h,y])=>h==="type"?p:Object.assign(Object.assign({},p),{[h]:y}),{});return Object.assign(Object.assign({},c),{propertyNames:d})}else if(((l=i.keyType)===null||l===void 0?void 0:l._def.typeName)===t.ZodFirstPartyTypeKind.ZodEnum)return Object.assign(Object.assign({},c),{propertyNames:{enum:i.keyType._def.values}});return c}return _i.parseRecordDef=r,_i}var bi={},Oh;function q0(){if(Oh)return bi;Oh=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.parseSetDef=void 0;const t=sn,e=Pe();function n(r,i){const a={type:"array",items:(0,e.parseDef)(r.valueType._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"items"]}))};return r.minSize&&(0,t.setResponseValueAndErrors)(a,"minItems",r.minSize.value,r.minSize.message,i),r.maxSize&&(0,t.setResponseValueAndErrors)(a,"maxItems",r.maxSize.value,r.maxSize.message,i),a}return bi.parseSetDef=n,bi}var Ei={},Ah;function Q0(){if(Ah)return Ei;Ah=1,Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.parseTupleDef=void 0;const t=Pe();function e(n,r){return n.rest?{type:"array",minItems:n.items.length,items:n.items.map((i,s)=>(0,t.parseDef)(i._def,Object.assign(Object.assign({},r),{currentPath:[...r.currentPath,"items",`${s}`]}))).reduce((i,s)=>s===void 0?i:[...i,s],[]),additionalItems:(0,t.parseDef)(n.rest._def,Object.assign(Object.assign({},r),{currentPath:[...r.currentPath,"additionalItems"]}))}:{type:"array",minItems:n.items.length,maxItems:n.items.length,items:n.items.map((i,s)=>(0,t.parseDef)(i._def,Object.assign(Object.assign({},r),{currentPath:[...r.currentPath,"items",`${s}`]}))).reduce((i,s)=>s===void 0?i:[...i,s],[])}}return Ei.parseTupleDef=e,Ei}var Yo={};Object.defineProperty(Yo,"__esModule",{value:!0});Yo.parseUndefinedDef=void 0;function G0(){return{not:{}}}Yo.parseUndefinedDef=G0;var el={};Object.defineProperty(el,"__esModule",{value:!0});el.parseUnknownDef=void 0;function J0(){return{}}el.parseUnknownDef=J0;var Rh;function Pe(){if(Rh)return ai;Rh=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.parseDef=void 0;const t=zo,e=Bo,n=C0(),r=Vo,i=Ho,s=x0(),a=I0(),o=Ko,l=A0(),c=R0(),d=Wo,p=j0(),h=qo,y=L0(),b=Qo,S=Go,C=Jo,v=Z0(),g=Xo,E=F0(),P=B0(),x=V0(),j=H0(),D=W0(),L=q0(),H=Ss,F=Q0(),pe=Yo,Ge=Uy(),Je=el;function at(O,R){const M=R.seen.find(Xe=>Object.is(Xe.def,O));if(M)return gt(M,R);const J={def:O,path:R.currentPath,jsonSchema:void 0};R.seen.push(J);const Fe=At(O,O.typeName,R);return Fe&&N(O,Fe),J.jsonSchema=Fe,Fe}ai.parseDef=at;const gt=(O,R)=>{switch(R.$refStrategy){case"root":return{$ref:O.path.length===0?"":O.path.length===1?`${O.path[0]}/`:O.path.join("/")};case"relative":return{$ref:De(R.currentPath,O.path)};case"none":return O.path.length<R.currentPath.length&&O.path.every((M,J)=>R.currentPath[J]===M)?(console.warn(`Recursive reference detected at ${R.currentPath.join("/")}! Defaulting to any`),{}):O.jsonSchema}},De=(O,R)=>{let M=0;for(;M<O.length&&M<R.length&&O[M]===R[M];M++);return[(O.length-M).toString(),...R.slice(M)].join("/")},At=(O,R,M)=>{switch(R){case t.ZodFirstPartyTypeKind.ZodString:return(0,H.parseStringDef)(O,M);case t.ZodFirstPartyTypeKind.ZodNumber:return(0,g.parseNumberDef)(O,M);case t.ZodFirstPartyTypeKind.ZodObject:return(0,E.parseObjectDef)(O,M);case t.ZodFirstPartyTypeKind.ZodBigInt:return(0,r.parseBigintDef)();case t.ZodFirstPartyTypeKind.ZodBoolean:return(0,i.parseBooleanDef)();case t.ZodFirstPartyTypeKind.ZodDate:return(0,o.parseDateDef)();case t.ZodFirstPartyTypeKind.ZodUndefined:return(0,pe.parseUndefinedDef)();case t.ZodFirstPartyTypeKind.ZodNull:return(0,C.parseNullDef)(M);case t.ZodFirstPartyTypeKind.ZodArray:return(0,n.parseArrayDef)(O,M);case t.ZodFirstPartyTypeKind.ZodUnion:case t.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return(0,Ge.parseUnionDef)(O,M);case t.ZodFirstPartyTypeKind.ZodIntersection:return(0,p.parseIntersectionDef)(O,M);case t.ZodFirstPartyTypeKind.ZodTuple:return(0,F.parseTupleDef)(O,M);case t.ZodFirstPartyTypeKind.ZodRecord:return(0,D.parseRecordDef)(O,M);case t.ZodFirstPartyTypeKind.ZodLiteral:return(0,h.parseLiteralDef)(O,M);case t.ZodFirstPartyTypeKind.ZodEnum:return(0,d.parseEnumDef)(O);case t.ZodFirstPartyTypeKind.ZodNativeEnum:return(0,b.parseNativeEnumDef)(O);case t.ZodFirstPartyTypeKind.ZodNullable:return(0,v.parseNullableDef)(O,M);case t.ZodFirstPartyTypeKind.ZodOptional:return(0,P.parseOptionalDef)(O,M);case t.ZodFirstPartyTypeKind.ZodMap:return(0,y.parseMapDef)(O,M);case t.ZodFirstPartyTypeKind.ZodSet:return(0,L.parseSetDef)(O,M);case t.ZodFirstPartyTypeKind.ZodLazy:return at(O.getter()._def,M);case t.ZodFirstPartyTypeKind.ZodPromise:return(0,j.parsePromiseDef)(O,M);case t.ZodFirstPartyTypeKind.ZodNaN:case t.ZodFirstPartyTypeKind.ZodNever:return(0,S.parseNeverDef)();case t.ZodFirstPartyTypeKind.ZodEffects:return(0,c.parseEffectsDef)(O,M);case t.ZodFirstPartyTypeKind.ZodAny:return(0,e.parseAnyDef)();case t.ZodFirstPartyTypeKind.ZodUnknown:return(0,Je.parseUnknownDef)();case t.ZodFirstPartyTypeKind.ZodDefault:return(0,l.parseDefaultDef)(O,M);case t.ZodFirstPartyTypeKind.ZodBranded:return(0,s.parseBrandedDef)(O,M);case t.ZodFirstPartyTypeKind.ZodCatch:return(0,a.parseCatchDef)(O,M);case t.ZodFirstPartyTypeKind.ZodPipeline:return(0,x.parsePipelineDef)(O,M);case t.ZodFirstPartyTypeKind.ZodFunction:case t.ZodFirstPartyTypeKind.ZodVoid:case t.ZodFirstPartyTypeKind.ZodSymbol:return;default:return(J=>{})()}},N=(O,R)=>(O.description&&(R.description=O.description),R);return ai}var tl={},Zy={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultOptions=t.defaultOptions=void 0,t.defaultOptions={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1};const e=n=>typeof n=="string"?Object.assign(Object.assign({},t.defaultOptions),{name:n}):Object.assign(Object.assign({},t.defaultOptions),n);t.getDefaultOptions=e})(Zy);Object.defineProperty(tl,"__esModule",{value:!0});tl.getRefs=void 0;const X0=Zy,Y0=t=>{const e=(0,X0.getDefaultOptions)(t),n=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return Object.assign(Object.assign({},e),{currentPath:n,propertyPath:void 0,seen:[]})};tl.getRefs=Y0;Object.defineProperty(Zo,"__esModule",{value:!0});Zo.zodToJsonSchema=void 0;const Nh=Pe(),e1=tl,t1=(t,e)=>{var n;const r=(0,e1.getRefs)(e),i=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((l,[c,d])=>{var p;return Object.assign(Object.assign({},l),{[c]:(p=(0,Nh.parseDef)(d._def,Object.assign(Object.assign({},r),{currentPath:[...r.basePath,r.definitionPath,c]})))!==null&&p!==void 0?p:{}})},{}):void 0,s=typeof e=="string"?e:e==null?void 0:e.name,a=(n=(0,Nh.parseDef)(t._def,s===void 0?r:Object.assign(Object.assign({},r),{currentPath:[...r.basePath,r.definitionPath,s]})))!==null&&n!==void 0?n:{},o=s===void 0?i?Object.assign(Object.assign({},a),{[r.definitionPath]:i}):a:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,s].join("/"),[r.definitionPath]:Object.assign(Object.assign({},i),{[s]:a})};return r.target==="jsonSchema7"&&(o.$schema="http://json-schema.org/draft-07/schema#"),o};Zo.zodToJsonSchema=t1;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.zodToJsonSchema=void 0;const e=Zo;Object.defineProperty(t,"zodToJsonSchema",{enumerable:!0,get:function(){return e.zodToJsonSchema}}),t.default=e.zodToJsonSchema})(Ay);function n1(t){const e=Ay.zodToJsonSchema(t.schema);return{type:"function",function:{name:t.name,description:t.description,parameters:e}}}function r1(t){const{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:n,azureOpenAIApiKey:r,azureOpenAIBasePath:i,baseURL:s}=t;if(r&&i&&e)return`${i}/${e}`;if(r){if(!n)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${n}.openai.azure.com/openai/deployments/${e}`}return s}var Zl={};const i1=()=>typeof window<"u"&&typeof window.document<"u",s1=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",a1=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),zy=()=>typeof Deno<"u",o1=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!zy(),l1=()=>{let t;return i1()?t="browser":o1()?t="node":s1()?t="webworker":a1()?t="jsdom":zy()?t="deno":t="other",t};let zl;async function u1(){return zl===void 0&&(zl={library:"langchain-js",runtime:l1()}),zl}function Ae(t){try{return typeof process<"u"?Zl==null?void 0:Zl[t]:void 0}catch{return}}var nl={exports:{}},Fy={};function yt(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var c1=yt;yt.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};yt.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};yt.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var n=this._timeouts.shift();if(n===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1);else return!1;var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},n),this._options.unref&&this._timer.unref(),!0};yt.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};yt.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};yt.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};yt.prototype.start=yt.prototype.try;yt.prototype.errors=function(){return this._errors};yt.prototype.attempts=function(){return this._attempts};yt.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,n=0,r=0;r<this._errors.length;r++){var i=this._errors[r],s=i.message,a=(t[s]||0)+1;t[s]=a,a>=n&&(e=i,n=a)}return e};(function(t){var e=c1;t.operation=function(n){var r=t.timeouts(n);return new e(r,{forever:n&&(n.forever||n.retries===1/0),unref:n&&n.unref,maxRetryTime:n&&n.maxRetryTime})},t.timeouts=function(n){if(n instanceof Array)return[].concat(n);var r={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in n)r[i]=n[i];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var s=[],a=0;a<r.retries;a++)s.push(this.createTimeout(a,r));return n&&n.forever&&!s.length&&s.push(this.createTimeout(a,r)),s.sort(function(o,l){return o-l}),s},t.createTimeout=function(n,r){var i=r.randomize?Math.random()+1:1,s=Math.round(i*Math.max(r.minTimeout,1)*Math.pow(r.factor,n));return s=Math.min(s,r.maxTimeout),s},t.wrap=function(n,r,i){if(r instanceof Array&&(i=r,r=null),!i){i=[];for(var s in n)typeof n[s]=="function"&&i.push(s)}for(var a=0;a<i.length;a++){var o=i[a],l=n[o];n[o]=(function(d){var p=t.operation(r),h=Array.prototype.slice.call(arguments,1),y=h.pop();h.push(function(b){p.retry(b)||(b&&(arguments[0]=p.mainError()),y.apply(this,arguments))}),p.attempt(function(){d.apply(n,h)})}).bind(n,l),n[o].options=r}}})(Fy);var d1=Fy;const f1=d1,h1=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class By extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const p1=(t,e,n)=>{const r=n.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=r,t},m1=t=>h1.includes(t),Vy=(t,e)=>new Promise((n,r)=>{e={onFailedAttempt:()=>{},retries:10,...e};const i=f1.operation(e);i.attempt(async s=>{try{n(await t(s))}catch(a){if(!(a instanceof Error)){r(new TypeError(`Non-error was thrown: "${a}". You should only throw errors.`));return}if(a instanceof By)i.stop(),r(a.originalError);else if(a instanceof TypeError&&!m1(a.message))i.stop(),r(a);else{p1(a,s,e);try{await e.onFailedAttempt(a)}catch(o){r(o);return}i.retry(a)||r(i.mainError())}}})});nl.exports=Vy;nl.exports.default=Vy;nl.exports.AbortError=By;var y1=nl.exports;const mo=_o(y1);var Hy={},Ky={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,d){this.fn=l,this.context=c,this.once=d||!1}function s(l,c,d,p,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var y=new i(d,p||l,h),b=n?n+c:c;return l._events[b]?l._events[b].fn?l._events[b]=[l._events[b],y]:l._events[b].push(y):(l._events[b]=y,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],d,p;if(this._eventsCount===0)return c;for(p in d=this._events)e.call(d,p)&&c.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},o.prototype.listeners=function(c){var d=n?n+c:c,p=this._events[d];if(!p)return[];if(p.fn)return[p.fn];for(var h=0,y=p.length,b=new Array(y);h<y;h++)b[h]=p[h].fn;return b},o.prototype.listenerCount=function(c){var d=n?n+c:c,p=this._events[d];return p?p.fn?1:p.length:0},o.prototype.emit=function(c,d,p,h,y,b){var S=n?n+c:c;if(!this._events[S])return!1;var C=this._events[S],v=arguments.length,g,E;if(C.fn){switch(C.once&&this.removeListener(c,C.fn,void 0,!0),v){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,d),!0;case 3:return C.fn.call(C.context,d,p),!0;case 4:return C.fn.call(C.context,d,p,h),!0;case 5:return C.fn.call(C.context,d,p,h,y),!0;case 6:return C.fn.call(C.context,d,p,h,y,b),!0}for(E=1,g=new Array(v-1);E<v;E++)g[E-1]=arguments[E];C.fn.apply(C.context,g)}else{var P=C.length,x;for(E=0;E<P;E++)switch(C[E].once&&this.removeListener(c,C[E].fn,void 0,!0),v){case 1:C[E].fn.call(C[E].context);break;case 2:C[E].fn.call(C[E].context,d);break;case 3:C[E].fn.call(C[E].context,d,p);break;case 4:C[E].fn.call(C[E].context,d,p,h);break;default:if(!g)for(x=1,g=new Array(v-1);x<v;x++)g[x-1]=arguments[x];C[E].fn.apply(C[E].context,g)}}return!0},o.prototype.on=function(c,d,p){return s(this,c,d,p,!1)},o.prototype.once=function(c,d,p){return s(this,c,d,p,!0)},o.prototype.removeListener=function(c,d,p,h){var y=n?n+c:c;if(!this._events[y])return this;if(!d)return a(this,y),this;var b=this._events[y];if(b.fn)b.fn===d&&(!h||b.once)&&(!p||b.context===p)&&a(this,y);else{for(var S=0,C=[],v=b.length;S<v;S++)(b[S].fn!==d||h&&!b[S].once||p&&b[S].context!==p)&&C.push(b[S]);C.length?this._events[y]=C.length===1?C[0]:C:a(this,y)}return this},o.prototype.removeAllListeners=function(c){var d;return c?(d=n?n+c:c,this._events[d]&&a(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(Ky);var g1=Ky.exports,rl={exports:{}},v1=(t,e)=>(e=e||(()=>{}),t.then(n=>new Promise(r=>{r(e())}).then(()=>n),n=>new Promise(r=>{r(e())}).then(()=>{throw n})));const _1=v1;class Wy extends Error{constructor(e){super(e),this.name="TimeoutError"}}const qy=(t,e,n)=>new Promise((r,i)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){r(t);return}const s=setTimeout(()=>{if(typeof n=="function"){try{r(n())}catch(l){i(l)}return}const a=typeof n=="string"?n:`Promise timed out after ${e} milliseconds`,o=n instanceof Error?n:new Wy(a);typeof t.cancel=="function"&&t.cancel(),i(o)},e);_1(t.then(r,i),()=>{clearTimeout(s)})});rl.exports=qy;rl.exports.default=qy;rl.exports.TimeoutError=Wy;var w1=rl.exports,Pd={},Td={};Object.defineProperty(Td,"__esModule",{value:!0});function b1(t,e,n){let r=0,i=t.length;for(;i>0;){const s=i/2|0;let a=r+s;n(t[a],e)<=0?(r=++a,i-=s+1):i=s}return r}Td.default=b1;Object.defineProperty(Pd,"__esModule",{value:!0});const E1=Td;class k1{constructor(){this._queue=[]}enqueue(e,n){n=Object.assign({priority:0},n);const r={priority:n.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=n.priority){this._queue.push(r);return}const i=E1.default(this._queue,r,(s,a)=>a.priority-s.priority);this._queue.splice(i,0,r)}dequeue(){const e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(n=>n.priority===e.priority).map(n=>n.run)}get size(){return this._queue.length}}Pd.default=k1;Object.defineProperty(Hy,"__esModule",{value:!0});const S1=g1,Qy=w1,C1=Pd,Gs=()=>{},P1=new Qy.TimeoutError;class T1 extends S1{constructor(e){var n,r,i,s;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=Gs,this._resolveIdle=Gs,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:C1.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(r=(n=e.intervalCap)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(s=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=Gs,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=Gs,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(this._intervalId===void 0){const n=this._intervalEnd-e;if(n<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},n)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const n=this._queue.dequeue();return n?(this.emit("active"),n(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,n={}){return new Promise((r,i)=>{const s=async()=>{this._pendingCount++,this._intervalCount++;try{const a=this._timeout===void 0&&n.timeout===void 0?e():Qy.default(Promise.resolve(e()),n.timeout===void 0?this._timeout:n.timeout,()=>{(n.throwOnTimeout===void 0?this._throwOnTimeout:n.throwOnTimeout)&&i(P1)});r(await a)}catch(a){i(a)}this._next()};this._queue.enqueue(s,n),this._tryToStartAnother(),this.emit("add")})}async addAll(e,n){return Promise.all(e.map(async r=>this.add(r,n)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{const n=this._resolveEmpty;this._resolveEmpty=()=>{n(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{const n=this._resolveIdle;this._resolveIdle=()=>{n(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}var Yt=Hy.default=T1;const x1=[400,401,402,403,404,405,406,407,408,409],I1=t=>{var n,r;if(t.message.startsWith("Cancel")||t.message.startsWith("TimeoutError")||t.name==="TimeoutError"||t.message.startsWith("AbortError")||t.name==="AbortError"||(t==null?void 0:t.code)==="ECONNABORTED")throw t;const e=((n=t==null?void 0:t.response)==null?void 0:n.status)??(t==null?void 0:t.status);if(e&&x1.includes(+e))throw t;if(((r=t==null?void 0:t.error)==null?void 0:r.code)==="insufficient_quota"){const i=new Error(t==null?void 0:t.message);throw i.name="InsufficientQuotaError",i}};let xd=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??I1;const n="default"in Yt?Yt.default:Yt;this.queue=new n({concurrency:this.maxConcurrency})}call(e,...n){return this.queue.add(()=>mo(()=>e(...n).catch(r=>{throw r instanceof Error?r:new Error(r)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,n,...r){return e.signal?Promise.race([this.call(n,...r),new Promise((i,s)=>{var a;(a=e.signal)==null||a.addEventListener("abort",()=>{s(new Error("AbortError"))})})]):this.call(n,...r)}fetch(...e){return this.call(()=>fetch(...e).then(n=>n.ok?n:Promise.reject(n)))}};var il={};il.byteLength=R1;il.toByteArray=j1;il.fromByteArray=$1;var $t=[],lt=[],O1=typeof Uint8Array<"u"?Uint8Array:Array,Fl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var lr=0,A1=Fl.length;lr<A1;++lr)$t[lr]=Fl[lr],lt[Fl.charCodeAt(lr)]=lr;lt[45]=62;lt[95]=63;function Gy(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function R1(t){var e=Gy(t),n=e[0],r=e[1];return(n+r)*3/4-r}function N1(t,e,n){return(e+n)*3/4-n}function j1(t){var e,n=Gy(t),r=n[0],i=n[1],s=new O1(N1(t,r,i)),a=0,o=i>0?r-4:r,l;for(l=0;l<o;l+=4)e=lt[t.charCodeAt(l)]<<18|lt[t.charCodeAt(l+1)]<<12|lt[t.charCodeAt(l+2)]<<6|lt[t.charCodeAt(l+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return i===2&&(e=lt[t.charCodeAt(l)]<<2|lt[t.charCodeAt(l+1)]>>4,s[a++]=e&255),i===1&&(e=lt[t.charCodeAt(l)]<<10|lt[t.charCodeAt(l+1)]<<4|lt[t.charCodeAt(l+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function D1(t){return $t[t>>18&63]+$t[t>>12&63]+$t[t>>6&63]+$t[t&63]}function L1(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(D1(r));return i.join("")}function $1(t){for(var e,n=t.length,r=n%3,i=[],s=16383,a=0,o=n-r;a<o;a+=s)i.push(L1(t,a,a+s>o?o:a+s));return r===1?(e=t[n-1],i.push($t[e>>2]+$t[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push($t[e>>10]+$t[e>>4&63]+$t[e<<2&63]+"=")),i.join("")}var M1=Object.defineProperty,U1=(t,e,n)=>e in t?M1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Z1=(t,e,n)=>(U1(t,typeof e!="symbol"?e+"":e,n),n);function z1(t,e){let n=Array.from({length:t.length},(r,i)=>({start:i,end:i+1}));for(;n.length>1;){let r=null;for(let i=0;i<n.length-1;i++){const s=t.slice(n[i].start,n[i+1].end),a=e.get(s.join(","));a!=null&&(r==null||a<r[0])&&(r=[a,i])}if(r!=null){const i=r[1];n[i]={start:n[i].start,end:n[i+1].end},n.splice(i+1,1)}else break}return n}function F1(t,e){return t.length===1?[e.get(t.join(","))]:z1(t,e).map(n=>e.get(t.slice(n.start,n.end).join(","))).filter(n=>n!=null)}function B1(t){return t.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var nc=class{constructor(t,e){un(this,"specialTokens");un(this,"inverseSpecialTokens");un(this,"patStr");un(this,"textEncoder",new TextEncoder);un(this,"textDecoder",new TextDecoder("utf-8"));un(this,"rankMap",new Map);un(this,"textMap",new Map);this.patStr=t.pat_str;const n=t.bpe_ranks.split(`
`).filter(Boolean).reduce((r,i)=>{const[s,a,...o]=i.split(" "),l=Number.parseInt(a,10);return o.forEach((c,d)=>r[c]=l+d),r},{});for(const[r,i]of Object.entries(n)){const s=il.toByteArray(r);this.rankMap.set(s.join(","),i),this.textMap.set(i,s)}this.specialTokens={...t.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((r,[i,s])=>(r[s]=this.textEncoder.encode(i),r),{})}encode(t,e=[],n="all"){const r=new RegExp(this.patStr,"ug"),i=nc.specialTokenRegex(Object.keys(this.specialTokens)),s=[],a=new Set(e==="all"?Object.keys(this.specialTokens):e),o=new Set(n==="all"?Object.keys(this.specialTokens).filter(c=>!a.has(c)):n);if(o.size>0){const c=nc.specialTokenRegex([...o]),d=t.match(c);if(d!=null)throw new Error(`The text contains a special token that is not allowed: ${d[0]}`)}let l=0;for(;;){let c=null,d=l;for(;i.lastIndex=d,c=i.exec(t),!(c==null||a.has(c[0]));)d=c.index+1;const p=(c==null?void 0:c.index)??t.length;for(const y of t.substring(l,p).matchAll(r)){const b=this.textEncoder.encode(y[0]),S=this.rankMap.get(b.join(","));if(S!=null){s.push(S);continue}s.push(...F1(b,this.rankMap))}if(c==null)break;let h=this.specialTokens[c[0]];s.push(h),l=c.index+c[0].length}return s}decode(t){const e=[];let n=0;for(let s=0;s<t.length;++s){const a=t[s],o=this.textMap.get(a)??this.inverseSpecialTokens[a];o!=null&&(e.push(o),n+=o.length)}const r=new Uint8Array(n);let i=0;for(const s of e)r.set(s,i),i+=s.length;return this.textDecoder.decode(r)}},Jy=nc;Z1(Jy,"specialTokenRegex",t=>new RegExp(t.map(e=>B1(e)).join("|"),"g"));function V1(t){switch(t){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"text-embedding-ada-002":return"cl100k_base";default:throw new Error("Unknown model")}}const Js={},H1=new xd({});async function K1(t,e){return t in Js||(Js[t]=H1.fetch(`https://tiktoken.pages.dev/js/${t}.json`,{signal:e==null?void 0:e.signal}).then(n=>n.json()).catch(n=>{throw delete Js[t],n})),new Jy(await Js[t],e==null?void 0:e.extendedSpecialTokens)}async function W1(t,e){return K1(V1(t),e)}let Xs;const q1=new Uint8Array(16);function Q1(){if(!Xs&&(Xs=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Xs))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Xs(q1)}const G1=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function J1(t){return typeof t=="string"&&G1.test(t)}const we=[];for(let t=0;t<256;++t)we.push((t+256).toString(16).slice(1));function X1(t,e=0){return we[t[e+0]]+we[t[e+1]]+we[t[e+2]]+we[t[e+3]]+"-"+we[t[e+4]]+we[t[e+5]]+"-"+we[t[e+6]]+we[t[e+7]]+"-"+we[t[e+8]]+we[t[e+9]]+"-"+we[t[e+10]]+we[t[e+11]]+we[t[e+12]]+we[t[e+13]]+we[t[e+14]]+we[t[e+15]]}const Y1=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),jh={randomUUID:Y1};function Qt(t,e,n){if(jh.randomUUID&&!e&&!t)return jh.randomUUID();t=t||{};const r=t.random||(t.rng||Q1)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return X1(r)}var Bl={};class eb{}class Cs extends eb{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,xy(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:typeof process<"u"?(Bl==null?void 0:Bl.LANGCHAIN_CALLBACKS_BACKGROUND)!=="true":!0}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever)}copy(){return new this.constructor(this)}toJSON(){return nr.prototype.toJSON.call(this)}toJSONNotImplemented(){return nr.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class n extends Cs{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Qt()}),Object.assign(this,e)}}return new n}}var Id={exports:{}};Id.exports;(function(t){const n=(s=0)=>a=>`\x1B[${38+s};5;${a}m`,r=(s=0)=>(a,o,l)=>`\x1B[${38+s};2;${a};${o};${l}m`;function i(){const s=new Map,a={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};a.color.gray=a.color.blackBright,a.bgColor.bgGray=a.bgColor.bgBlackBright,a.color.grey=a.color.blackBright,a.bgColor.bgGrey=a.bgColor.bgBlackBright;for(const[o,l]of Object.entries(a)){for(const[c,d]of Object.entries(l))a[c]={open:`\x1B[${d[0]}m`,close:`\x1B[${d[1]}m`},l[c]=a[c],s.set(d[0],d[1]);Object.defineProperty(a,o,{value:l,enumerable:!1})}return Object.defineProperty(a,"codes",{value:s,enumerable:!1}),a.color.close="\x1B[39m",a.bgColor.close="\x1B[49m",a.color.ansi256=n(),a.color.ansi16m=r(),a.bgColor.ansi256=n(10),a.bgColor.ansi16m=r(10),Object.defineProperties(a,{rgbToAnsi256:{value:(o,l,c)=>o===l&&l===c?o<8?16:o>248?231:Math.round((o-8)/247*24)+232:16+36*Math.round(o/255*5)+6*Math.round(l/255*5)+Math.round(c/255*5),enumerable:!1},hexToRgb:{value:o=>{const l=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(o.toString(16));if(!l)return[0,0,0];let{colorString:c}=l.groups;c.length===3&&(c=c.split("").map(p=>p+p).join(""));const d=Number.parseInt(c,16);return[d>>16&255,d>>8&255,d&255]},enumerable:!1},hexToAnsi256:{value:o=>a.rgbToAnsi256(...a.hexToRgb(o)),enumerable:!1}}),a}Object.defineProperty(t,"exports",{enumerable:!0,get:i})})(Id);var tb=Id.exports;const Xy=_o(tb);function Vl(t,e){return t&&!Array.isArray(t)&&typeof t=="object"?t:{[e]:t}}class sl extends Cs{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}_addChildRun(e,n){e.child_runs.push(n)}async _startTrace(e){var n;if(e.parent_run_id!==void 0){const r=this.runMap.get(e.parent_run_id);r&&(this._addChildRun(r,e),r.child_execution_order=Math.max(r.child_execution_order,e.child_execution_order))}this.runMap.set(e.id,e),await((n=this.onRunCreate)==null?void 0:n.call(this,e))}async _endTrace(e){var r;const n=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);n?n.child_execution_order=Math.max(n.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await((r=this.onRunUpdate)==null?void 0:r.call(this,e))}_getExecutionOrder(e){const n=e!==void 0&&this.runMap.get(e);return n?n.child_execution_order+1:1}async handleLLMStart(e,n,r,i,s,a,o,l){var y;const c=this._getExecutionOrder(i),d=Date.now(),p=o?{...s,metadata:o}:s,h={id:r,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:d,serialized:e,events:[{name:"start",time:new Date(d).toISOString()}],inputs:{prompts:n},execution_order:c,child_runs:[],child_execution_order:c,run_type:"llm",extra:p??{},tags:a||[]};return await this._startTrace(h),await((y=this.onLLMStart)==null?void 0:y.call(this,h)),h}async handleChatModelStart(e,n,r,i,s,a,o,l){var y;const c=this._getExecutionOrder(i),d=Date.now(),p=o?{...s,metadata:o}:s,h={id:r,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:d,serialized:e,events:[{name:"start",time:new Date(d).toISOString()}],inputs:{messages:n},execution_order:c,child_runs:[],child_execution_order:c,run_type:"llm",extra:p??{},tags:a||[]};return await this._startTrace(h),await((y=this.onLLMStart)==null?void 0:y.call(this,h)),h}async handleLLMEnd(e,n){var i;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="llm")throw new Error("No LLM run to end.");return r.end_time=Date.now(),r.outputs=e,r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((i=this.onLLMEnd)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleLLMError(e,n){var i;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="llm")throw new Error("No LLM run to end.");return r.end_time=Date.now(),r.error=e.message,r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((i=this.onLLMError)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleChainStart(e,n,r,i,s,a,o,l){var h;const c=this._getExecutionOrder(i),d=Date.now(),p={id:r,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:d,serialized:e,events:[{name:"start",time:new Date(d).toISOString()}],inputs:n,execution_order:c,child_execution_order:c,run_type:o??"chain",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return await this._startTrace(p),await((h=this.onChainStart)==null?void 0:h.call(this,p)),p}async handleChainEnd(e,n,r,i,s){var o;const a=this.runMap.get(n);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.outputs=Vl(e,"output"),a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),(s==null?void 0:s.inputs)!==void 0&&(a.inputs=Vl(s.inputs,"input")),await((o=this.onChainEnd)==null?void 0:o.call(this,a)),await this._endTrace(a),a}async handleChainError(e,n,r,i,s){var o;const a=this.runMap.get(n);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.error=e.message,a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),(s==null?void 0:s.inputs)!==void 0&&(a.inputs=Vl(s.inputs,"input")),await((o=this.onChainError)==null?void 0:o.call(this,a)),await this._endTrace(a),a}async handleToolStart(e,n,r,i,s,a,o){var p;const l=this._getExecutionOrder(i),c=Date.now(),d={id:r,name:o??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{input:n},execution_order:l,child_execution_order:l,run_type:"tool",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return await this._startTrace(d),await((p=this.onToolStart)==null?void 0:p.call(this,d)),d}async handleToolEnd(e,n){var i;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((i=this.onToolEnd)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleToolError(e,n){var i;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.error=e.message,r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((i=this.onToolError)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleAgentAction(e,n){var s;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="chain")return;const i=r;i.actions=i.actions||[],i.actions.push(e),i.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((s=this.onAgentAction)==null?void 0:s.call(this,r))}async handleAgentEnd(e,n){var i;const r=this.runMap.get(n);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((i=this.onAgentEnd)==null?void 0:i.call(this,r)))}async handleRetrieverStart(e,n,r,i,s,a,o){var p;const l=this._getExecutionOrder(i),c=Date.now(),d={id:r,name:o??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{query:n},execution_order:l,child_execution_order:l,run_type:"retriever",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return await this._startTrace(d),await((p=this.onRetrieverStart)==null?void 0:p.call(this,d)),d}async handleRetrieverEnd(e,n){var i;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((i=this.onRetrieverEnd)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleRetrieverError(e,n){var i;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.error=e.message,r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((i=this.onRetrieverError)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleText(e,n){var i;const r=this.runMap.get(n);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((i=this.onText)==null?void 0:i.call(this,r)))}async handleLLMNewToken(e,n,r,i,s,a){var l;const o=this.runMap.get(r);if(!o||(o==null?void 0:o.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return o.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:n,chunk:a==null?void 0:a.chunk}}),await((l=this.onLLMNewToken)==null?void 0:l.call(this,o,e)),o}}function Le(t,e){return`${t.open}${e}${t.close}`}function kt(t,e){try{return JSON.stringify(t,null,2)}catch{return e}}function hn(t){if(!t.end_time)return"";const e=t.end_time-t.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:Be}=Xy;class Dh extends sl{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const n=[];let r=e;for(;r.parent_run_id;){const i=this.runMap.get(r.parent_run_id);if(i)n.push(i),r=i;else break}return n}getBreadcrumbs(e){const r=[...this.getParents(e).reverse(),e].map((i,s,a)=>{const o=`${i.execution_order}:${i.run_type}:${i.name}`;return s===a.length-1?Le(Xy.bold,o):o}).join(" > ");return Le(Be.grey,r)}onChainStart(e){const n=this.getBreadcrumbs(e);console.log(`${Le(Be.green,"[chain/start]")} [${n}] Entering Chain run with input: ${kt(e.inputs,"[inputs]")}`)}onChainEnd(e){const n=this.getBreadcrumbs(e);console.log(`${Le(Be.cyan,"[chain/end]")} [${n}] [${hn(e)}] Exiting Chain run with output: ${kt(e.outputs,"[outputs]")}`)}onChainError(e){const n=this.getBreadcrumbs(e);console.log(`${Le(Be.red,"[chain/error]")} [${n}] [${hn(e)}] Chain run errored with error: ${kt(e.error,"[error]")}`)}onLLMStart(e){const n=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map(i=>i.trim())}:e.inputs;console.log(`${Le(Be.green,"[llm/start]")} [${n}] Entering LLM run with input: ${kt(r,"[inputs]")}`)}onLLMEnd(e){const n=this.getBreadcrumbs(e);console.log(`${Le(Be.cyan,"[llm/end]")} [${n}] [${hn(e)}] Exiting LLM run with output: ${kt(e.outputs,"[response]")}`)}onLLMError(e){const n=this.getBreadcrumbs(e);console.log(`${Le(Be.red,"[llm/error]")} [${n}] [${hn(e)}] LLM run errored with error: ${kt(e.error,"[error]")}`)}onToolStart(e){var r;const n=this.getBreadcrumbs(e);console.log(`${Le(Be.green,"[tool/start]")} [${n}] Entering Tool run with input: "${(r=e.inputs.input)==null?void 0:r.trim()}"`)}onToolEnd(e){var r,i;const n=this.getBreadcrumbs(e);console.log(`${Le(Be.cyan,"[tool/end]")} [${n}] [${hn(e)}] Exiting Tool run with output: "${(i=(r=e.outputs)==null?void 0:r.output)==null?void 0:i.trim()}"`)}onToolError(e){const n=this.getBreadcrumbs(e);console.log(`${Le(Be.red,"[tool/error]")} [${n}] [${hn(e)}] Tool run errored with error: ${kt(e.error,"[error]")}`)}onRetrieverStart(e){const n=this.getBreadcrumbs(e);console.log(`${Le(Be.green,"[retriever/start]")} [${n}] Entering Retriever run with input: ${kt(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const n=this.getBreadcrumbs(e);console.log(`${Le(Be.cyan,"[retriever/end]")} [${n}] [${hn(e)}] Exiting Retriever run with output: ${kt(e.outputs,"[outputs]")}`)}onRetrieverError(e){const n=this.getBreadcrumbs(e);console.log(`${Le(Be.red,"[retriever/error]")} [${n}] [${hn(e)}] Retriever run errored with error: ${kt(e.error,"[error]")}`)}onAgentAction(e){const n=e,r=this.getBreadcrumbs(e);console.log(`${Le(Be.blue,"[agent/action]")} [${r}] Agent selected action: ${kt(n.actions[n.actions.length-1],"[action]")}`)}}const nb=[400,401,403,404,405,406,407,408,409];class rb{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6;const n="default"in Yt?Yt.default:Yt;this.queue=new n({concurrency:this.maxConcurrency})}call(e,...n){return this.queue.add(()=>mo(()=>e(...n).catch(r=>{throw r instanceof Error?r:new Error(r)}),{onFailedAttempt(r){var s;if(r.message.startsWith("Cancel")||r.message.startsWith("TimeoutError")||r.message.startsWith("AbortError")||(r==null?void 0:r.code)==="ECONNABORTED")throw r;const i=(s=r==null?void 0:r.response)==null?void 0:s.status;if(i&&nb.includes(+i))throw r},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,n,...r){return e.signal?Promise.race([this.call(n,...r),new Promise((i,s)=>{var a;(a=e.signal)==null||a.addEventListener("abort",()=>{s(new Error("AbortError"))})})]):this.call(n,...r)}fetch(...e){return this.call(()=>fetch(...e).then(n=>n.ok?n:Promise.reject(n)))}}function Lh(t){return typeof(t==null?void 0:t._getType)=="function"}function $h(t){const e={type:t._getType(),data:{content:t.content}};return t!=null&&t.additional_kwargs&&Object.keys(t.additional_kwargs).length>0&&(e.data.additional_kwargs={...t.additional_kwargs}),e}var Hl={};const ib=()=>typeof window<"u"&&typeof window.document<"u",sb=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",ab=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),Yy=()=>typeof Deno<"u",ob=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!Yy(),lb=()=>{let t;return ib()?t="browser":ob()?t="node":sb()?t="webworker":ab()?t="jsdom":Yy()?t="deno":t="other",t};let Kl;async function ub(){if(Kl===void 0){const t=lb(),e=cb();Kl={library:"langsmith",runtime:t,...e}}return Kl}function Rr(t){try{return typeof process<"u"?Hl==null?void 0:Hl[t]:void 0}catch{return}}let Wl;function cb(){if(Wl!==void 0)return Wl;const t=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(const n of t){const r=Rr(n);r!==void 0&&(e[n]=r)}return Wl=e,e}const Mh=t=>{const n=t.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return n==="localhost"||n==="127.0.0.1"||n==="::1"},Mn=async(t,e)=>{const n=await t.text();if(!t.ok)throw new Error(`Failed to ${e}: ${t.status} ${t.statusText} ${n}`)};async function db(t){const e=[];for await(const n of t)e.push(n);return e}function ql(t){if(t!==void 0)return t.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}function Uh(t){return Rr("LANGCHAIN_HIDE_INPUTS")==="true"?{}:t}function Zh(t){return Rr("LANGCHAIN_HIDE_OUTPUTS")==="true"?{}:t}function le(t){if(!J1(t))throw new Error(`Invalid UUID: ${t}`)}class Od{constructor(e={}){Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null});const n=Od.getDefaultClientConfig();this.apiUrl=ql(e.apiUrl??n.apiUrl)??"",this.apiKey=ql(e.apiKey??n.apiKey),this.webUrl=ql(e.webUrl??n.webUrl),this.validateApiKeyIfHosted(),this.timeout_ms=e.timeout_ms??4e3,this.caller=new rb(e.callerOptions??{})}static getDefaultClientConfig(){const e=Rr("LANGCHAIN_API_KEY");return{apiUrl:Rr("LANGCHAIN_ENDPOINT")??(e?"https://api.smith.langchain.com":"http://localhost:1984"),apiKey:e,webUrl:void 0}}validateApiKeyIfHosted(){if(!Mh(this.apiUrl)&&!this.apiKey)throw new Error("API key must be provided when using hosted LangSmith API")}getHostUrl(){return this.webUrl?this.webUrl:Mh(this.apiUrl)?(this.webUrl="http://localhost","http://localhost"):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com","https://dev.smith.langchain.com"):(this.webUrl="https://smith.langchain.com","https://smith.langchain.com")}get headers(){const e={};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}async _getResponse(e,n){const r=(n==null?void 0:n.toString())??"",i=`${this.apiUrl}${e}?${r}`,s=await this.caller.call(fetch,i,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!s.ok)throw new Error(`Failed to fetch ${e}: ${s.status} ${s.statusText}`);return s}async _get(e,n){return(await this._getResponse(e,n)).json()}async*_getPaginated(e,n=new URLSearchParams){let r=Number(n.get("offset"))||0;const i=Number(n.get("limit"))||100;for(;;){n.set("offset",String(r)),n.set("limit",String(i));const s=`${this.apiUrl}${e}?${n}`,a=await this.caller.call(fetch,s,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!a.ok)throw new Error(`Failed to fetch ${e}: ${a.status} ${a.statusText}`);const o=await a.json();if(o.length===0||(yield o,o.length<i))break;r+=o.length}}async createRun(e){const n={...this.headers,"Content-Type":"application/json"},r=e.extra??{},i=await ub(),s=e.project_name;delete e.project_name;const a={session_name:s,...e,extra:{...e.extra,runtime:{...i,...r.runtime}}};a.inputs=Uh(a.inputs),a.outputs&&(a.outputs=Zh(a.outputs));const o=await this.caller.call(fetch,`${this.apiUrl}/runs`,{method:"POST",headers:n,body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms)});await Mn(o,"create run")}async updateRun(e,n){le(e),n.inputs&&(n.inputs=Uh(n.inputs)),n.outputs&&(n.outputs=Zh(n.outputs));const r={...this.headers,"Content-Type":"application/json"},i=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:r,body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms)});await Mn(i,"update run")}async readRun(e,{loadChildRuns:n}={loadChildRuns:!1}){le(e);let r=await this._get(`/runs/${e}`);return n&&r.child_run_ids&&(r=await this._loadChildRuns(r)),r}async getRunUrl({runId:e,run:n,projectOpts:r}){if(n!==void 0){let i;n.session_id?i=n.session_id:r!=null&&r.projectName?i=(await this.readProject({projectName:r==null?void 0:r.projectName})).id:r!=null&&r.projectId?i=r==null?void 0:r.projectId:i=(await this.readProject({projectName:Rr("LANGCHAIN_PROJECT")||"default"})).id;const s=await this._getTenantId();return`${this.getHostUrl()}/o/${s}/projects/p/${i}/r/${n.id}?poll=true`}else if(e!==void 0){const i=await this.readRun(e);if(!i.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${i.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){const n=await db(this.listRuns({id:e.child_run_ids})),r={},i={};n.sort((s,a)=>((s==null?void 0:s.dotted_order)??"").localeCompare((a==null?void 0:a.dotted_order)??""));for(const s of n){if(s.parent_run_id===null||s.parent_run_id===void 0)throw new Error(`Child run ${s.id} has no parent`);s.parent_run_id in r||(r[s.parent_run_id]=[]),r[s.parent_run_id].push(s),i[s.id]=s}e.child_runs=r[e.id]||[];for(const s in r)s!==e.id&&(i[s].child_runs=r[s]);return e}async*listRuns({projectId:e,projectName:n,parentRunId:r,referenceExampleId:i,startTime:s,executionOrder:a,runType:o,error:l,id:c,limit:d,offset:p,query:h,filter:y}){const b=new URLSearchParams;let S=e;if(n){if(e)throw new Error("Only one of projectId or projectName may be given");S=(await this.readProject({projectName:n})).id}if(S&&b.append("session",S),r&&b.append("parent_run",r),i&&b.append("reference_example",i),s&&b.append("start_time",s.toISOString()),a&&b.append("execution_order",a.toString()),o&&b.append("run_type",o),l!==void 0&&b.append("error",l.toString()),c!==void 0)for(const C of c)b.append("id",C);d!==void 0&&b.append("limit",d.toString()),p!==void 0&&b.append("offset",p.toString()),h!==void 0&&b.append("query",h),y!==void 0&&b.append("filter",y);for await(const C of this._getPaginated("/runs",b))yield*C}async shareRun(e,{shareId:n}={}){const r={run_id:e,share_token:n||Qt()};le(e);const s=await(await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms)})).json();if(s===null||!("share_token"in s))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${s.share_token}/r`}async unshareRun(e){le(e);const n=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await Mn(n,"unshare run")}async readRunSharedLink(e){le(e);const r=await(await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)})).json();if(!(r===null||!("share_token"in r)))return`${this.getHostUrl()}/public/${r.share_token}/r`}async listSharedRuns(e,{runIds:n}={}){const r=new URLSearchParams({share_token:e});if(n!==void 0)for(const a of n)r.append("id",a);return le(e),await(await this.caller.call(fetch,`${this.apiUrl}/public/${e}/runs${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)})).json()}async readDatasetSharedSchema(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id),le(e);const i=await(await this.caller.call(fetch,`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)})).json();return i.url=`${this.getHostUrl()}/public/${i.share_token}/d`,i}async shareDataset(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id);const r={dataset_id:e};le(e);const s=await(await this.caller.call(fetch,`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms)})).json();return s.url=`${this.getHostUrl()}/public/${s.share_token}/d`,s}async unshareDataset(e){le(e);const n=await this.caller.call(fetch,`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await Mn(n,"unshare dataset")}async readSharedDataset(e){return le(e),await(await this.caller.call(fetch,`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)})).json()}async createProject({projectName:e,projectExtra:n,upsert:r,referenceDatasetId:i}){const s=r?"?upsert=true":"",a=`${this.apiUrl}/sessions${s}`,o={name:e};n!==void 0&&(o.extra=n),i!==void 0&&(o.reference_dataset_id=i);const l=await this.caller.call(fetch,a,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms)}),c=await l.json();if(!l.ok)throw new Error(`Failed to create session ${e}: ${l.status} ${l.statusText}`);return c}async readProject({projectId:e,projectName:n}){let r="/sessions";const i=new URLSearchParams;if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)le(e),r+=`/${e}`;else if(n!==void 0)i.append("name",n);else throw new Error("Must provide projectName or projectId");const s=await this._get(r,i);let a;if(Array.isArray(s)){if(s.length===0)throw new Error(`Project[id=${e}, name=${n}] not found`);a=s[0]}else a=s;return a}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const n of this._getPaginated("/sessions",e))return this._tenantId=n[0].tenant_id,n[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:n,nameContains:r,referenceDatasetId:i,referenceDatasetName:s,referenceFree:a}={}){const o=new URLSearchParams;if(e!==void 0)for(const l of e)o.append("id",l);if(n!==void 0&&o.append("name",n),r!==void 0&&o.append("name_contains",r),i!==void 0)o.append("reference_dataset",i);else if(s!==void 0){const l=await this.readDataset({datasetName:s});o.append("reference_dataset",l.id)}a!==void 0&&o.append("reference_free",a.toString());for await(const l of this._getPaginated("/sessions",o))yield*l}async deleteProject({projectId:e,projectName:n}){let r;if(e===void 0&&n===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?r=(await this.readProject({projectName:n})).id:r=e,le(r);const i=await this.caller.call(fetch,`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await Mn(i,`delete session ${r} (${n})`)}async uploadCsv({csvFile:e,fileName:n,inputKeys:r,outputKeys:i,description:s,dataType:a,name:o}){const l=`${this.apiUrl}/datasets/upload`,c=new FormData;c.append("file",e,n),r.forEach(h=>{c.append("input_keys",h)}),i.forEach(h=>{c.append("output_keys",h)}),s&&c.append("description",s),a&&c.append("data_type",a),o&&c.append("name",o);const d=await this.caller.call(fetch,l,{method:"POST",headers:this.headers,body:c,signal:AbortSignal.timeout(this.timeout_ms)});if(!d.ok){const h=await d.json();throw h.detail&&h.detail.includes("already exists")?new Error(`Dataset ${n} already exists`):new Error(`Failed to upload CSV: ${d.status} ${d.statusText}`)}return await d.json()}async createDataset(e,{description:n,dataType:r}={}){const i={name:e,description:n};r&&(i.data_type=r);const s=await this.caller.call(fetch,`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms)});if(!s.ok){const o=await s.json();throw o.detail&&o.detail.includes("already exists")?new Error(`Dataset ${e} already exists`):new Error(`Failed to create dataset ${s.status} ${s.statusText}`)}return await s.json()}async readDataset({datasetId:e,datasetName:n}){let r="/datasets";const i=new URLSearchParams({limit:"1"});if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)le(e),r+=`/${e}`;else if(n!==void 0)i.append("name",n);else throw new Error("Must provide datasetName or datasetId");const s=await this._get(r,i);let a;if(Array.isArray(s)){if(s.length===0)throw new Error(`Dataset[id=${e}, name=${n}] not found`);a=s[0]}else a=s;return a}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:n}){const r="/datasets";if(e===void 0)if(n!==void 0)e=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide datasetName or datasetId");return(await(await this._getResponse(`${r}/${e}/openai_ft`)).text()).trim().split(`
`).map(o=>JSON.parse(o))}async*listDatasets({limit:e=100,offset:n=0,datasetIds:r,datasetName:i,datasetNameContains:s}={}){const a="/datasets",o=new URLSearchParams({limit:e.toString(),offset:n.toString()});if(r!==void 0)for(const l of r)o.append("id",l);i!==void 0&&o.append("name",i),s!==void 0&&o.append("name_contains",s);for await(const l of this._getPaginated(a,o))yield*l}async deleteDataset({datasetId:e,datasetName:n}){let r="/datasets",i=e;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(n!==void 0&&(i=(await this.readDataset({datasetName:n})).id),i!==void 0)le(i),r+=`/${i}`;else throw new Error("Must provide datasetName or datasetId");const s=await this.caller.call(fetch,this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!s.ok)throw new Error(`Failed to delete ${r}: ${s.status} ${s.statusText}`);await s.json()}async createExample(e,n,{datasetId:r,datasetName:i,createdAt:s,exampleId:a}){let o=r;if(o===void 0&&i===void 0)throw new Error("Must provide either datasetName or datasetId");if(o!==void 0&&i!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");o===void 0&&(o=(await this.readDataset({datasetName:i})).id);const c={dataset_id:o,inputs:e,outputs:n,created_at:(s||new Date).toISOString(),id:a},d=await this.caller.call(fetch,`${this.apiUrl}/examples`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms)});if(!d.ok)throw new Error(`Failed to create example: ${d.status} ${d.statusText}`);return await d.json()}async createLLMExample(e,n,r){return this.createExample({input:e},{output:n},r)}async createChatExample(e,n,r){const i=e.map(a=>Lh(a)?$h(a):a),s=Lh(n)?$h(n):n;return this.createExample({input:i},{output:s},r)}async readExample(e){le(e);const n=`/examples/${e}`;return await this._get(n)}async*listExamples({datasetId:e,datasetName:n,exampleIds:r}={}){let i;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)i=e;else if(n!==void 0)i=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide a datasetName or datasetId");const s=new URLSearchParams({dataset:i});if(r!==void 0)for(const a of r)s.append("id",a);for await(const a of this._getPaginated("/examples",s))yield*a}async deleteExample(e){le(e);const n=`/examples/${e}`,r=await this.caller.call(fetch,this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!r.ok)throw new Error(`Failed to delete ${n}: ${r.status} ${r.statusText}`);await r.json()}async updateExample(e,n){le(e);const r=await this.caller.call(fetch,`${this.apiUrl}/examples/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms)});if(!r.ok)throw new Error(`Failed to update example ${e}: ${r.status} ${r.statusText}`);return await r.json()}async evaluateRun(e,n,{sourceInfo:r,loadChildRuns:i}={loadChildRuns:!1}){let s;if(typeof e=="string")s=await this.readRun(e,{loadChildRuns:i});else if(typeof e=="object"&&"id"in e)s=e;else throw new Error(`Invalid run type: ${typeof e}`);let a;s.reference_example_id!==null&&s.reference_example_id!==void 0&&(a=await this.readExample(s.reference_example_id));const o=await n.evaluateRun(s,a);let l=r??{};return o.evaluatorInfo&&(l={...l,...o.evaluatorInfo}),await this.createFeedback(s.id,o.key,{score:o.score,value:o.value,comment:o.comment,correction:o.correction,sourceInfo:l,feedbackSourceType:"model"})}async createFeedback(e,n,{score:r,value:i,correction:s,comment:a,sourceInfo:o,feedbackSourceType:l="api",sourceRunId:c,feedbackId:d,eager:p=!1}){var C;const h={type:l??"api",metadata:o??{}};c!==void 0&&(h==null?void 0:h.metadata)!==void 0&&!h.metadata.__run&&(h.metadata.__run={run_id:c}),(h==null?void 0:h.metadata)!==void 0&&((C=h.metadata.__run)==null?void 0:C.run_id)!==void 0&&le(h.metadata.__run.run_id);const y={id:d??Qt(),run_id:e,key:n,score:r,value:i,correction:s,comment:a,feedback_source:h},b=`${this.apiUrl}/feedback`+(p?"/eager":""),S=await this.caller.call(fetch,b,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(y),signal:AbortSignal.timeout(this.timeout_ms)});return await Mn(S,"create feedback"),y}async updateFeedback(e,{score:n,value:r,correction:i,comment:s}){const a={};n!=null&&(a.score=n),r!=null&&(a.value=r),i!=null&&(a.correction=i),s!=null&&(a.comment=s),le(e);const o=await this.caller.call(fetch,`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms)});await Mn(o,"update feedback")}async readFeedback(e){le(e);const n=`/feedback/${e}`;return await this._get(n)}async deleteFeedback(e){le(e);const n=`/feedback/${e}`,r=await this.caller.call(fetch,this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!r.ok)throw new Error(`Failed to delete ${n}: ${r.status} ${r.statusText}`);await r.json()}async*listFeedback({runIds:e,feedbackKeys:n,feedbackSourceTypes:r}={}){const i=new URLSearchParams;if(e&&i.append("run",e.join(",")),n)for(const s of n)i.append("key",s);if(r)for(const s of r)i.append("source",s);for await(const s of this._getPaginated("/feedback",i))yield*s}}class fb extends sl{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:n,projectName:r,client:i}=e;this.projectName=r??Ae("LANGCHAIN_PROJECT")??Ae("LANGCHAIN_SESSION"),this.exampleId=n,this.client=i??new Od({})}async _convertToCreate(e,n=void 0){return{...e,extra:{...e.extra,runtime:await u1()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:n}}async persistRun(e){}async _persistRunSingle(e){const n=await this._convertToCreate(e,this.exampleId);await this.client.createRun(n)}async _updateRunSingle(e){const n={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs};await this.client.updateRun(e.id,n)}async onRetrieverStart(e){await this._persistRunSingle(e)}async onRetrieverEnd(e){await this._updateRunSingle(e)}async onRetrieverError(e){await this._updateRunSingle(e)}async onLLMStart(e){await this._persistRunSingle(e)}async onLLMEnd(e){await this._updateRunSingle(e)}async onLLMError(e){await this._updateRunSingle(e)}async onChainStart(e){await this._persistRunSingle(e)}async onChainEnd(e){await this._updateRunSingle(e)}async onChainError(e){await this._updateRunSingle(e)}async onToolStart(e){await this._persistRunSingle(e)}async onToolEnd(e){await this._updateRunSingle(e)}async onToolError(e){await this._updateRunSingle(e)}}class hb extends sl{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"endpoint",{enumerable:!0,configurable:!0,writable:!0,value:Ae("LANGCHAIN_ENDPOINT")||"http://localhost:1984"}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:{"Content-Type":"application/json"}}),Object.defineProperty(this,"session",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const e=Ae("LANGCHAIN_API_KEY");e&&(this.headers["x-api-key"]=e)}async newSession(e){const n={start_time:Date.now(),name:e},r=await this.persistSession(n);return this.session=r,r}async loadSession(e){const n=`${this.endpoint}/sessions?name=${e}`;return this._handleSessionResponse(n)}async loadDefaultSession(){const e=`${this.endpoint}/sessions?name=default`;return this._handleSessionResponse(e)}async convertV2RunToRun(e){var s;const n=this.session??await this.loadDefaultSession(),r=e.serialized;let i;if(e.run_type==="llm"){const a=e.inputs.prompts?e.inputs.prompts:e.inputs.messages.map(l=>bd(l));i={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:r,type:e.run_type,session_id:n.id,prompts:a,response:e.outputs}}else if(e.run_type==="chain"){const a=await Promise.all(e.child_runs.map(l=>this.convertV2RunToRun(l)));i={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:r,type:e.run_type,session_id:n.id,inputs:e.inputs,outputs:e.outputs,child_llm_runs:a.filter(l=>l.type==="llm"),child_chain_runs:a.filter(l=>l.type==="chain"),child_tool_runs:a.filter(l=>l.type==="tool")}}else if(e.run_type==="tool"){const a=await Promise.all(e.child_runs.map(l=>this.convertV2RunToRun(l)));i={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:r,type:e.run_type,session_id:n.id,tool_input:e.inputs.input,output:(s=e.outputs)==null?void 0:s.output,action:JSON.stringify(r),child_llm_runs:a.filter(l=>l.type==="llm"),child_chain_runs:a.filter(l=>l.type==="chain"),child_tool_runs:a.filter(l=>l.type==="tool")}}else throw new Error(`Unknown run type: ${e.run_type}`);return i}async persistRun(e){let n,r;e.run_type!==void 0?r=await this.convertV2RunToRun(e):r=e,r.type==="llm"?n=`${this.endpoint}/llm-runs`:r.type==="chain"?n=`${this.endpoint}/chain-runs`:n=`${this.endpoint}/tool-runs`;const i=await fetch(n,{method:"POST",headers:this.headers,body:JSON.stringify(r)});i.ok||console.error(`Failed to persist run: ${i.status} ${i.statusText}`)}async persistSession(e){const n=`${this.endpoint}/sessions`,r=await fetch(n,{method:"POST",headers:this.headers,body:JSON.stringify(e)});return r.ok?{id:(await r.json()).id,...e}:(console.error(`Failed to persist session: ${r.status} ${r.statusText}, using default session.`),{id:1,...e})}async _handleSessionResponse(e){const n=await fetch(e,{method:"GET",headers:this.headers});let r;if(!n.ok)return console.error(`Failed to load session: ${n.status} ${n.statusText}`),r={id:1,start_time:Date.now()},this.session=r,r;const i=await n.json();return i.length===0?(r={id:1,start_time:Date.now()},this.session=r,r):([r]=i,this.session=r,r)}}async function pb(t){const e=new hb;return t?await e.loadSession(t):await e.loadDefaultSession(),e}async function mb(){return new fb}let Ql;function yb(){const t="default"in Yt?Yt.default:Yt;return new t({autoStart:!0,concurrency:1})}async function Ee(t,e){e===!0?await t():(typeof Ql>"u"&&(Ql=yb()),Ql.add(t))}class gb{setHandler(e){return this.setHandlers([e])}}class al{constructor(e,n,r,i,s,a,o,l){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:l})}async handleText(e){await Promise.all(this.handlers.map(n=>Ee(async()=>{var r;try{await((r=n.handleText)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${n.constructor.name}, handleText: ${i}`)}},n.awaitHandlers)))}}class vb extends al{getChild(e){const n=new ht(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),e&&n.addTags([e],!1),n}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(n=>Ee(async()=>{var r;if(!n.ignoreRetriever)try{await((r=n.handleRetrieverEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch{console.error(`Error in handler ${n.constructor.name}, handleRetriever`)}},n.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(n=>Ee(async()=>{var r;if(!n.ignoreRetriever)try{await((r=n.handleRetrieverError)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${n.constructor.name}, handleRetrieverError: ${i}`)}},n.awaitHandlers)))}}class zh extends al{async handleLLMNewToken(e,n,r,i,s,a){await Promise.all(this.handlers.map(o=>Ee(async()=>{var l;if(!o.ignoreLLM)try{await((l=o.handleLLMNewToken)==null?void 0:l.call(o,e,n??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,a))}catch(c){console.error(`Error in handler ${o.constructor.name}, handleLLMNewToken: ${c}`)}},o.awaitHandlers)))}async handleLLMError(e){await Promise.all(this.handlers.map(n=>Ee(async()=>{var r;if(!n.ignoreLLM)try{await((r=n.handleLLMError)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${n.constructor.name}, handleLLMError: ${i}`)}},n.awaitHandlers)))}async handleLLMEnd(e){await Promise.all(this.handlers.map(n=>Ee(async()=>{var r;if(!n.ignoreLLM)try{await((r=n.handleLLMEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${n.constructor.name}, handleLLMEnd: ${i}`)}},n.awaitHandlers)))}}class _b extends al{getChild(e){const n=new ht(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),e&&n.addTags([e],!1),n}async handleChainError(e,n,r,i,s){await Promise.all(this.handlers.map(a=>Ee(async()=>{var o;if(!a.ignoreChain)try{await((o=a.handleChainError)==null?void 0:o.call(a,e,this.runId,this._parentRunId,this.tags,s))}catch(l){console.error(`Error in handler ${a.constructor.name}, handleChainError: ${l}`)}},a.awaitHandlers)))}async handleChainEnd(e,n,r,i,s){await Promise.all(this.handlers.map(a=>Ee(async()=>{var o;if(!a.ignoreChain)try{await((o=a.handleChainEnd)==null?void 0:o.call(a,e,this.runId,this._parentRunId,this.tags,s))}catch(l){console.error(`Error in handler ${a.constructor.name}, handleChainEnd: ${l}`)}},a.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(n=>Ee(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleAgentAction)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${n.constructor.name}, handleAgentAction: ${i}`)}},n.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(n=>Ee(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleAgentEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${n.constructor.name}, handleAgentEnd: ${i}`)}},n.awaitHandlers)))}}class wb extends al{getChild(e){const n=new ht(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),e&&n.addTags([e],!1),n}async handleToolError(e){await Promise.all(this.handlers.map(n=>Ee(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleToolError)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${n.constructor.name}, handleToolError: ${i}`)}},n.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(n=>Ee(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleToolEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${n.constructor.name}, handleToolEnd: ${i}`)}},n.awaitHandlers)))}}class ht extends gb{constructor(e){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=[],this.inheritableHandlers=[],this._parentRunId=e}async handleLLMStart(e,n,r=void 0,i=void 0,s=void 0,a=void 0,o=void 0,l=void 0){return Promise.all(n.map(async c=>{const d=Qt();return await Promise.all(this.handlers.map(p=>Ee(async()=>{var h;if(!p.ignoreLLM)try{await((h=p.handleLLMStart)==null?void 0:h.call(p,e,[c],d,this._parentRunId,s,this.tags,this.metadata,l))}catch(y){console.error(`Error in handler ${p.constructor.name}, handleLLMStart: ${y}`)}},p.awaitHandlers))),new zh(d,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,n,r=void 0,i=void 0,s=void 0,a=void 0,o=void 0,l=void 0){return Promise.all(n.map(async c=>{const d=Qt();return await Promise.all(this.handlers.map(p=>Ee(async()=>{var h,y;if(!p.ignoreLLM)try{if(p.handleChatModelStart)await((h=p.handleChatModelStart)==null?void 0:h.call(p,e,[c],d,this._parentRunId,s,this.tags,this.metadata,l));else if(p.handleLLMStart){const b=bd(c);await((y=p.handleLLMStart)==null?void 0:y.call(p,e,[b],d,this._parentRunId,s,this.tags,this.metadata,l))}}catch(b){console.error(`Error in handler ${p.constructor.name}, handleLLMStart: ${b}`)}},p.awaitHandlers))),new zh(d,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,n,r=Qt(),i=void 0,s=void 0,a=void 0,o=void 0){return await Promise.all(this.handlers.map(l=>Ee(async()=>{var c;if(!l.ignoreChain)try{await((c=l.handleChainStart)==null?void 0:c.call(l,e,n,r,this._parentRunId,this.tags,this.metadata,i,o))}catch(d){console.error(`Error in handler ${l.constructor.name}, handleChainStart: ${d}`)}},l.awaitHandlers))),new _b(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,n,r=Qt(),i=void 0,s=void 0,a=void 0,o=void 0){return await Promise.all(this.handlers.map(l=>Ee(async()=>{var c;if(!l.ignoreAgent)try{await((c=l.handleToolStart)==null?void 0:c.call(l,e,n,r,this._parentRunId,this.tags,this.metadata,o))}catch(d){console.error(`Error in handler ${l.constructor.name}, handleToolStart: ${d}`)}},l.awaitHandlers))),new wb(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,n,r=Qt(),i=void 0,s=void 0,a=void 0,o=void 0){return await Promise.all(this.handlers.map(l=>Ee(async()=>{var c;if(!l.ignoreRetriever)try{await((c=l.handleRetrieverStart)==null?void 0:c.call(l,e,n,r,this._parentRunId,this.tags,this.metadata,o))}catch(d){console.error(`Error in handler ${l.constructor.name}, handleRetrieverStart: ${d}`)}},l.awaitHandlers))),new vb(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}addHandler(e,n=!0){this.handlers.push(e),n&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(n=>n!==e),this.inheritableHandlers=this.inheritableHandlers.filter(n=>n!==e)}setHandlers(e,n=!0){this.handlers=[],this.inheritableHandlers=[];for(const r of e)this.addHandler(r,n)}addTags(e,n=!0){this.removeTags(e),this.tags.push(...e),n&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(n=>!e.includes(n)),this.inheritableTags=this.inheritableTags.filter(n=>!e.includes(n))}addMetadata(e,n=!0){this.metadata={...this.metadata,...e},n&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const n of Object.keys(e))delete this.metadata[n],delete this.inheritableMetadata[n]}copy(e=[],n=!0){const r=new ht(this._parentRunId);for(const i of this.handlers){const s=this.inheritableHandlers.includes(i);r.addHandler(i,s)}for(const i of this.tags){const s=this.inheritableTags.includes(i);r.addTags([i],s)}for(const i of Object.keys(this.metadata)){const s=Object.keys(this.inheritableMetadata).includes(i);r.addMetadata({[i]:this.metadata[i]},s)}for(const i of e)r.handlers.filter(s=>s.name==="console_callback_handler").some(s=>s.name===i.name)||r.addHandler(i,n);return r}static fromHandlers(e){class n extends Cs{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Qt()}),Object.assign(this,e)}}const r=new this;return r.addHandler(new n),r}static async configure(e,n,r,i,s,a,o){let l;(e||n)&&(Array.isArray(e)||!e?(l=new ht,l.setHandlers((e==null?void 0:e.map(Fh))??[],!0)):l=e,l=l.copy(Array.isArray(n)?n.map(Fh):n==null?void 0:n.handlers,!1));const c=Ae("LANGCHAIN_VERBOSE")==="true"||(o==null?void 0:o.verbose),d=Ae("LANGCHAIN_TRACING_V2")==="true",p=d||(Ae("LANGCHAIN_TRACING")??!1);if(c||p){if(l||(l=new ht),c&&!l.handlers.some(h=>h.name===Dh.prototype.name)){const h=new Dh;l.addHandler(h,!0)}if(p&&!l.handlers.some(h=>h.name==="langchain_tracer"))if(d)l.addHandler(await mb(),!0);else{const h=Ae("LANGCHAIN_PROJECT")&&Ae("LANGCHAIN_SESSION");l.addHandler(await pb(h),!0)}}return(r||i)&&l&&(l.addTags(r??[]),l.addTags(i??[],!1)),(s||a)&&l&&(l.addMetadata(s??{}),l.addMetadata(a??{},!1)),l}}function Fh(t){return"name"in t?t:Cs.fromMethods(t)}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */const bb=Object.prototype.hasOwnProperty;function Eb(t,e){return bb.call(t,e)}function kb(t){if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<n.length;r++)n[r]=""+r;return n}if(Object.keys)return Object.keys(t);let e=[];for(let n in t)Eb(t,n)&&e.push(n);return e}function zr(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function rc(t){let e=0;const n=t.length;let r;for(;e<n;){if(r=t.charCodeAt(e),r>=48&&r<=57){e++;continue}return!1}return!0}function Sb(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function ic(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(ic(t[n]))return!0}else if(typeof t=="object"){const n=kb(t),r=n.length;for(var e=0;e<r;e++)if(ic(t[n[e]]))return!0}}return!1}function Bh(t,e){const n=[t];for(const r in e){const i=typeof e[r]=="object"?JSON.stringify(e[r],null,2):e[r];typeof i<"u"&&n.push(`${r}: ${i}`)}return n.join(`
`)}class Cb extends Error{constructor(e,n,r,i,s){super(Bh(e,{name:n,index:r,operation:i,tree:s})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.setPrototypeOf(this,new.target.prototype),this.message=Bh(e,{name:n,index:r,operation:i,tree:s})}}const ce=Cb,kr={add:function(t,e,n){return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){var r=t[e];return delete t[e],{newDocument:n,removed:r}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:function(t,e,n){let r=sc(n,this.path);r&&(r=zr(r));const i=Fi(n,{op:"remove",path:this.from}).removed;return Fi(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(t,e,n){const r=sc(n,this.from);return Fi(n,{op:"add",path:this.path,value:zr(r)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:yo(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}};var Pb={add:function(t,e,n){return rc(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){var r=t.splice(e,1);return{newDocument:n,removed:r[0]}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:kr.move,copy:kr.copy,test:kr.test,_get:kr._get};function sc(t,e){if(e=="")return t;var n={op:"_get",path:e};return Fi(t,n),n.value}function Fi(t,e,n=!1,r=!0,i=!0,s=0){if(n&&(typeof n=="function"?n(e,0,t,e.path):ac(e,0)),e.path===""){let a={newDocument:t};if(e.op==="add")return a.newDocument=e.value,a;if(e.op==="replace")return a.newDocument=e.value,a.removed=t,a;if(e.op==="move"||e.op==="copy")return a.newDocument=sc(t,e.from),e.op==="move"&&(a.removed=t),a;if(e.op==="test"){if(a.test=yo(t,e.value),a.test===!1)throw new ce("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return a.newDocument=t,a}else{if(e.op==="remove")return a.removed=t,a.newDocument=null,a;if(e.op==="_get")return e.value=t,a;if(n)throw new ce("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,e,t);return a}}else{r||(t=zr(t));const o=(e.path||"").split("/");let l=t,c=1,d=o.length,p,h,y;for(typeof n=="function"?y=n:y=ac;;){if(h=o[c],h&&h.indexOf("~")!=-1&&(h=Sb(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&o[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(l[h]===void 0?p=o.slice(0,c).join("/"):c==d-1&&(p=e.path),p!==void 0&&y(e,0,t,p)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!rc(h))throw new ce("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,e,t);rc(h)&&(h=~~h)}if(c>=d){if(n&&e.op==="add"&&h>l.length)throw new ce("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,e,t);const b=Pb[e.op].call(e,l,h,t);if(b.test===!1)throw new ce("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return b}}else if(c>=d){const b=kr[e.op].call(e,l,h,t);if(b.test===!1)throw new ce("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return b}if(l=l[h],n&&c<d&&(!l||typeof l!="object"))throw new ce("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,e,t)}}}function Ad(t,e,n,r=!0,i=!0){if(n&&!Array.isArray(e))throw new ce("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(t=zr(t));const s=new Array(e.length);for(let a=0,o=e.length;a<o;a++)s[a]=Fi(t,e[a],n,!0,i,a),t=s[a].newDocument;return s.newDocument=t,s}function ac(t,e,n,r){if(typeof t!="object"||t===null||Array.isArray(t))throw new ce("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,n);if(kr[t.op]){if(typeof t.path!="string")throw new ce("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,n);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new ce('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,n);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new ce("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new ce("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&ic(t.value))throw new ce("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,n);if(n){if(t.op=="add"){var i=t.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new ce("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,n)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==r)throw new ce("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,n)}else if(t.op==="move"||t.op==="copy"){var a={op:"_get",path:t.from,value:void 0},o=Tb([a],n);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new ce("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,n)}}}else throw new ce("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,n)}function Tb(t,e,n){try{if(!Array.isArray(t))throw new ce("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)Ad(zr(e),zr(t),n||!0);else{n=n||ac;for(var r=0;r<t.length;r++)n(t[r],r,e,void 0)}}catch(i){if(i instanceof ce)return i;throw i}}function yo(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var n=Array.isArray(t),r=Array.isArray(e),i,s,a;if(n&&r){if(s=t.length,s!=e.length)return!1;for(i=s;i--!==0;)if(!yo(t[i],e[i]))return!1;return!0}if(n!=r)return!1;var o=Object.keys(t);if(s=o.length,s!==Object.keys(e).length)return!1;for(i=s;i--!==0;)if(!e.hasOwnProperty(o[i]))return!1;for(i=s;i--!==0;)if(a=o[i],!yo(t[a],e[a]))return!1;return!0}return t!==t&&e!==e}class ms extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done&&this.reader.releaseLock(),{done:e.done,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){this.ensureReader();const e=this.reader.cancel();return this.reader.releaseLock(),await e,{done:!0,value:void 0}}[Symbol.asyncIterator](){return this}static fromReadableStream(e){const n=e.getReader();return new ms({start(r){return i();function i(){return n.read().then(({done:s,value:a})=>{if(s){r.close();return}return r.enqueue(a),i()})}},cancel(){n.releaseLock()}})}static fromAsyncGenerator(e){return new ms({async pull(n){const{value:r,done:i}=await e.next();i&&n.close(),n.enqueue(r)}})}}class zn{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops}concat(e){const n=this.ops.concat(e.ops),r=Ad({},n);return new Rd({ops:n,state:r[r.length-1].newDocument})}}class Rd extends zn{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const n=this.ops.concat(e.ops),r=Ad(this.state,e.ops);return new Rd({ops:n,state:r[r.length-1].newDocument})}}class xb extends sl{constructor(e){super(e),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=ms.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.parent_run_id===void 0)return!1;const n=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(r=r||n.find(i=>{var s;return(s=this.includeTags)==null?void 0:s.includes(i)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(r=r&&n.every(i=>{var s;return!((s=this.excludeTags)!=null&&s.includes(i))})),r}async onRunCreate(e){var i;if(e.parent_run_id===void 0&&await this.writer.write(new zn({ops:[{op:"replace",path:"",value:{id:e.id,streamed_output:[],final_output:void 0,logs:{}}}]})),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const n=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=n===1?e.name:`${e.name}:${n}`;const r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:((i=e.extra)==null?void 0:i.metadata)??{},start_time:new Date(e.start_time).toISOString(),streamed_output_str:[],final_output:void 0,end_time:void 0};await this.writer.write(new zn({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:r}]}))}async onRunUpdate(e){try{const n=this.keyMapByRunId[e.id];if(n===void 0)return;const r=[{op:"add",path:`/logs/${n}/final_output`,value:e.outputs}];e.end_time!==void 0&&r.push({op:"add",path:`/logs/${n}/end_time`,value:new Date(e.end_time).toISOString()});const i=new zn({ops:r});await this.writer.write(i)}finally{if(e.parent_run_id===void 0){const n=new zn({ops:[{op:"replace",path:"/final_output",value:e.outputs}]});await this.writer.write(n),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,n){const r=this.keyMapByRunId[e.id];if(r===void 0)return;const i=new zn({ops:[{op:"add",path:`/logs/${r}/streamed_output_str/-`,value:n}]});await this.writer.write(i)}}async function Qn(t){return ht.configure(t==null?void 0:t.callbacks,void 0,t==null?void 0:t.tags,void 0,t==null?void 0:t.metadata)}function Ne(t,e){return t&&!Array.isArray(t)&&typeof t=="object"?t:{[e]:t}}class tt extends nr{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}bind(e){return new go({bound:this,kwargs:e,config:{}})}map(){return new Nd({bound:this})}withRetry(e){return new Ib({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new go({bound:this,config:e,kwargs:{}})}withFallbacks(e){return new Ob({runnable:this,fallbacks:e.fallbacks})}_getOptionsList(e,n=0){if(Array.isArray(e)){if(e.length!==n)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${n} inputs`);return e}return Array.from({length:n},()=>e)}async batch(e,n,r){const i=this._getOptionsList(n??{},e.length),s=new xd({maxConcurrency:r==null?void 0:r.maxConcurrency,onFailedAttempt:o=>{throw o}}),a=e.map((o,l)=>s.call(async()=>{try{return await this.invoke(o,i[l])}catch(c){if(r!=null&&r.returnExceptions)return c;throw c}}));return Promise.all(a)}async*_streamIterator(e,n){yield this.invoke(e,n)}async stream(e,n){return ms.fromAsyncGenerator(this._streamIterator(e,n))}_separateRunnableConfigFromCallOptions(e={}){const n={callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName},r={...e};return delete r.callbacks,delete r.tags,delete r.metadata,delete r.runName,[n,r]}async _callWithConfig(e,n,r){const i=await Qn(r),s=await(i==null?void 0:i.handleChainStart(this.toJSON(),Ne(n,"input"),void 0,r==null?void 0:r.runType,void 0,void 0,r==null?void 0:r.runName));let a;try{a=await e.bind(this)(n,r,s)}catch(o){throw await(s==null?void 0:s.handleChainError(o)),o}return await(s==null?void 0:s.handleChainEnd(Ne(a,"output"))),a}async _batchWithConfig(e,n,r,i){const s=this._getOptionsList(r??{},n.length),a=await Promise.all(s.map(Qn)),o=await Promise.all(a.map((c,d)=>c==null?void 0:c.handleChainStart(this.toJSON(),Ne(n[d],"input"),void 0,s[d].runType,void 0,void 0,s[d].runName)));let l;try{l=await e(n,s,o,i)}catch(c){throw await Promise.all(o.map(d=>d==null?void 0:d.handleChainError(c))),c}return await Promise.all(o.map(c=>c==null?void 0:c.handleChainEnd(Ne(l,"output")))),l}async*_transformStreamWithConfig(e,n,r){let i,s=!0,a,o=!0;const l=await Qn(r);let c;const d=this.toJSON();async function*p(){for await(const y of e){if(c||(c=await(l==null?void 0:l.handleChainStart(d,{input:""},void 0,r==null?void 0:r.runType,void 0,void 0,r==null?void 0:r.runName))),s)if(i===void 0)i=y;else try{i=i.concat(y)}catch{i=void 0,s=!1}yield y}}const h=p();try{const y=n(h,c,r);for await(const b of y)if(yield b,o)if(a===void 0)a=b;else try{a=a.concat(b)}catch{a=void 0,o=!1}}catch(y){throw await(c==null?void 0:c.handleChainError(y,void 0,void 0,void 0,{inputs:Ne(i,"input")})),y}await(c==null?void 0:c.handleChainEnd(a??{},void 0,void 0,void 0,{inputs:Ne(i,"input")}))}_patchConfig(e={},n=void 0){const r={...e};return n!==void 0?(delete r.runName,{...r,callbacks:n}):r}pipe(e){return new Sr({first:this,last:Kn(e)})}async*transform(e,n){let r;for await(const i of e)r===void 0?r=i:r=r.concat(i);yield*this._streamIterator(r,n)}async*streamLog(e,n,r){const i=new xb({...r,autoClose:!1}),s=n??{},{callbacks:a}=s;if(a===void 0)s.callbacks=[i];else if(Array.isArray(a))s.callbacks=a.concat([i]);else{const d=a.copy();d.inheritableHandlers.push(i),s.callbacks=d}const o=await this.stream(e,s);async function l(){try{for await(const d of o){const p=new zn({ops:[{op:"add",path:"/streamed_output/-",value:d}]});await i.writer.write(p)}}finally{await i.writer.close()}}const c=l();try{for await(const d of i)yield d}finally{await c}}static isRunnable(e){return e?e.lc_runnable:!1}}class go extends tt{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config}_mergeConfig(e){const n={...this.config};if(e)for(const r of Object.keys(e))r==="metadata"?n[r]={...n[r],...e[r]}:r==="tags"?n[r]=(n[r]??[]).concat(e[r]??[]):n[r]=e[r]??n[r];return n}bind(e){return this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return this.constructor({bound:this.bound.withRetry(e),kwargs:this.kwargs,config:this.config})}async invoke(e,n){return this.bound.invoke(e,this._mergeConfig({...n,...this.kwargs}))}async batch(e,n,r){const i=Array.isArray(n)?n.map(s=>this._mergeConfig({...s,...this.kwargs})):this._mergeConfig({...n,...this.kwargs});return this.bound.batch(e,i,r)}async*_streamIterator(e,n){yield*this.bound._streamIterator(e,this._mergeConfig({...n,...this.kwargs}))}async stream(e,n){return this.bound.stream(e,this._mergeConfig({...n,...this.kwargs}))}async*transform(e,n){yield*this.bound.transform(e,this._mergeConfig({...n,...this.kwargs}))}static isRunnableBinding(e){return e.bound&&tt.isRunnable(e.bound)}}class Nd extends tt{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new Nd({bound:this.bound.bind(e)})}async invoke(e,n){return this._callWithConfig(this._invoke,e,n)}async _invoke(e,n,r){return this.bound.batch(e,this._patchConfig(n,r==null?void 0:r.getChild()))}}class Ib extends go{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,n,r){const i=e>1?`retry:attempt:${e}`:void 0;return this._patchConfig(n,r==null?void 0:r.getChild(i))}async _invoke(e,n,r){return mo(i=>super.invoke(e,this._patchConfigForRetry(i,n,r)),{onFailedAttempt:this.onFailedAttempt,retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,n){return this._callWithConfig(this._invoke,e,n)}async _batch(e,n,r,i){const s={};try{await mo(async a=>{const o=e.map((h,y)=>y).filter(h=>s[h.toString()]===void 0||s[h.toString()]instanceof Error),l=o.map(h=>e[h]),c=o.map(h=>this._patchConfigForRetry(a,n==null?void 0:n[h],r==null?void 0:r[h])),d=await super.batch(l,c,{...i,returnExceptions:!0});let p;for(let h=0;h<d.length;h+=1){const y=d[h],b=o[h];y instanceof Error&&p===void 0&&(p=y),s[b.toString()]=y}if(p)throw p;return d},{onFailedAttempt:this.onFailedAttempt,retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(a){if((i==null?void 0:i.returnExceptions)!==!0)throw a}return Object.keys(s).sort((a,o)=>parseInt(a,10)-parseInt(o,10)).map(a=>s[parseInt(a,10)])}async batch(e,n,r){return this._batchWithConfig(this._batch.bind(this),e,n,r)}}class Sr extends tt{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,n){const r=await Qn(n),i=await(r==null?void 0:r.handleChainStart(this.toJSON(),Ne(e,"input"),void 0,void 0,void 0,void 0,n==null?void 0:n.runName));let s=e,a;try{const o=[this.first,...this.middle];for(let l=0;l<o.length;l+=1)s=await o[l].invoke(s,this._patchConfig(n,i==null?void 0:i.getChild(`seq:step:${l+1}`)));a=await this.last.invoke(s,this._patchConfig(n,i==null?void 0:i.getChild(`seq:step:${this.steps.length}`)))}catch(o){throw await(i==null?void 0:i.handleChainError(o)),o}return await(i==null?void 0:i.handleChainEnd(Ne(a,"output"))),a}async batch(e,n,r){const i=this._getOptionsList(n??{},e.length),s=await Promise.all(i.map(Qn)),a=await Promise.all(s.map((c,d)=>c==null?void 0:c.handleChainStart(this.toJSON(),Ne(e[d],"input"),void 0,void 0,void 0,void 0,i[d].runName)));let o=e,l;try{const c=[this.first,...this.middle];for(let d=0;d<c.length;d+=1)o=await c[d].batch(o,a.map((h,y)=>this._patchConfig(i[y],h==null?void 0:h.getChild(`seq:step:${d+1}`))),r);l=await this.last.batch(o,a.map(d=>this._patchConfig(i[this.steps.length-1],d==null?void 0:d.getChild(`seq:step:${this.steps.length}`))),r)}catch(c){throw await Promise.all(a.map(d=>d==null?void 0:d.handleChainError(c))),c}return await Promise.all(a.map((c,d)=>c==null?void 0:c.handleChainEnd(Ne(l[d],"output")))),l}async*_streamIterator(e,n){const r=await Qn(n),i=await(r==null?void 0:r.handleChainStart(this.toJSON(),Ne(e,"input"),void 0,void 0,void 0,void 0,n==null?void 0:n.runName));let s=e;const a=[this.first,...this.middle,this.last],o=Math.min(a.length-1,a.length-[...a].reverse().findIndex(d=>{var y;const p=d.transform===tt.prototype.transform,h=go.isRunnableBinding(d)&&((y=d.bound)==null?void 0:y.transform)===tt.prototype.transform;return p||h})-1);try{const d=a.slice(0,o);for(let p=0;p<d.length;p+=1)s=await d[p].invoke(s,this._patchConfig(n,i==null?void 0:i.getChild(`seq:step:${p+1}`)))}catch(d){throw await(i==null?void 0:i.handleChainError(d)),d}let l=!0,c;try{let d=await a[o]._streamIterator(s,this._patchConfig(n,i==null?void 0:i.getChild(`seq:step:${o+1}`)));const p=a.slice(o+1);for(let h=0;h<p.length;h+=1)d=await p[h].transform(d,this._patchConfig(n,i==null?void 0:i.getChild(`seq:step:${o+h+2}`)));for await(const h of d)if(yield h,l)if(c===void 0)c=h;else try{c=c.concat(h)}catch{c=void 0,l=!1}}catch(d){throw await(i==null?void 0:i.handleChainError(d)),d}await(i==null?void 0:i.handleChainEnd(Ne(c,"output")))}pipe(e){return Sr.isRunnableSequence(e)?new Sr({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last}):new Sr({first:this.first,middle:[...this.middle,this.last],last:Kn(e)})}static isRunnableSequence(e){return Array.isArray(e.middle)&&tt.isRunnable(e)}static from([e,...n]){return new Sr({first:Kn(e),middle:n.slice(0,-1).map(Kn),last:Kn(n[n.length-1])})}}class jd extends tt{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[n,r]of Object.entries(e.steps))this.steps[n]=Kn(r)}static from(e){return new jd({steps:e})}async invoke(e,n){const r=await Qn(n),i=await(r==null?void 0:r.handleChainStart(this.toJSON(),{input:e},void 0,void 0,void 0,void 0,n==null?void 0:n.runName)),s={};try{await Promise.all(Object.entries(this.steps).map(async([a,o])=>{s[a]=await o.invoke(e,this._patchConfig(n,i==null?void 0:i.getChild(a)))}))}catch(a){throw await(i==null?void 0:i.handleChainError(a)),a}return await(i==null?void 0:i.handleChainEnd(s)),s}}class Dd extends tt{static lc_name(){return"RunnableLambda"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.func=e.func}static from(e){return new Dd({func:e})}async _invoke(e,n,r){let i=await this.func(e);return i&&tt.isRunnable(i)&&(i=await i.invoke(e,this._patchConfig(n,r==null?void 0:r.getChild()))),i}async invoke(e,n){return this._callWithConfig(this._invoke,e,n)}}class Ob extends tt{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,n){const r=await ht.configure(n==null?void 0:n.callbacks,void 0,n==null?void 0:n.tags,void 0,n==null?void 0:n.metadata),i=await(r==null?void 0:r.handleChainStart(this.toJSON(),Ne(e,"input"),void 0,void 0,void 0,void 0,n==null?void 0:n.runName));let s;for(const a of this.runnables())try{const o=await a.invoke(e,this._patchConfig(n,i==null?void 0:i.getChild()));return await(i==null?void 0:i.handleChainEnd(Ne(o,"output"))),o}catch(o){s===void 0&&(s=o)}throw s===void 0?new Error("No error stored at end of fallback."):(await(i==null?void 0:i.handleChainError(s)),s)}async batch(e,n,r){if(r!=null&&r.returnExceptions)throw new Error("Not implemented.");const i=this._getOptionsList(n??{},e.length),s=await Promise.all(i.map(l=>ht.configure(l==null?void 0:l.callbacks,void 0,l==null?void 0:l.tags,void 0,l==null?void 0:l.metadata))),a=await Promise.all(s.map((l,c)=>l==null?void 0:l.handleChainStart(this.toJSON(),Ne(e[c],"input"),void 0,void 0,void 0,void 0,i[c].runName)));let o;for(const l of this.runnables())try{const c=await l.batch(e,a.map((d,p)=>this._patchConfig(i[p],d==null?void 0:d.getChild())),r);return await Promise.all(a.map((d,p)=>d==null?void 0:d.handleChainEnd(Ne(c[p],"output")))),c}catch(c){o===void 0&&(o=c)}throw o?(await Promise.all(a.map(l=>l==null?void 0:l.handleChainError(o))),o):new Error("No error stored at end of fallbacks.")}}function Kn(t){if(typeof t=="function")return new Dd({func:t});if(tt.isRunnable(t))return t;if(!Array.isArray(t)&&typeof t=="object"){const e={};for(const[n,r]of Object.entries(t))e[n]=Kn(r);return new jd({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}const Ab=t=>t.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":t.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":t.startsWith("gpt-4-32k")?"gpt-4-32k":t.startsWith("gpt-4-")?"gpt-4":t,Rb=()=>!1;class Nb extends tt{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??Rb(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class jb extends Nb{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:n,...r}){super({callbacks:e??n,...r}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof r.cache=="object"?this.cache=r.cache:r.cache?this.cache=Sd.global():this.cache=void 0,this.caller=new xd(r??{})}async getNumTokens(e){if(typeof e!="string")return 0;let n=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await W1("modelName"in this?Ab(this.modelName):"gpt2")}catch(r){console.warn("Failed to calculate number of tokens, falling back to approximate count",r)}return this._encoding&&(n=this._encoding.encode(e).length),n}static _convertInputToPromptValue(e){return typeof e=="string"?new d0(e):Array.isArray(e)?new f0(e.map(ga)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall(e){const n={...this._identifyingParams(),...e,_type:this._llmType(),_model:this._modelType()};return Object.entries(n).filter(([s,a])=>a!==void 0).map(([s,a])=>`${s}:${JSON.stringify(a)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}}class Fn extends jb{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]})}_separateRunnableConfigFromCallOptions(e){const[n,r]=super._separateRunnableConfigFromCallOptions(e);return r!=null&&r.timeout&&!r.signal&&(r.signal=AbortSignal.timeout(r.timeout)),[n,r]}async invoke(e,n){const r=Fn._convertInputToPromptValue(e);return(await this.generatePrompt([r],n,n==null?void 0:n.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,n,r){throw new Error("Not implemented.")}async*_streamIterator(e,n){if(this._streamResponseChunks===Fn.prototype._streamResponseChunks)yield this.invoke(e,n);else{const i=Fn._convertInputToPromptValue(e).toChatMessages(),[s,a]=this._separateRunnableConfigFromCallOptions(n),o=await ht.configure(s.callbacks,this.callbacks,s.tags,this.tags,s.metadata,this.metadata,{verbose:this.verbose}),l={options:a,invocation_params:this==null?void 0:this.invocationParams(a),batch_size:1},c=await(o==null?void 0:o.handleChatModelStart(this.toJSON(),[i],void 0,void 0,l,void 0,void 0,s.runName));let d;try{for await(const p of this._streamResponseChunks(i,a,c==null?void 0:c[0]))yield p.message,d?d=d.concat(p):d=p}catch(p){throw await Promise.all((c??[]).map(h=>h==null?void 0:h.handleLLMError(p))),p}await Promise.all((c??[]).map(p=>p==null?void 0:p.handleLLMEnd({generations:[[d]]})))}}async _generateUncached(e,n,r){var h;const i=e.map(y=>y.map(ga)),s=await ht.configure(r.callbacks,this.callbacks,r.tags,this.tags,r.metadata,this.metadata,{verbose:this.verbose}),a={options:n,invocation_params:this==null?void 0:this.invocationParams(n),batch_size:1},o=await(s==null?void 0:s.handleChatModelStart(this.toJSON(),i,void 0,void 0,a,void 0,void 0,r.runName)),l=await Promise.allSettled(i.map((y,b)=>this._generate(y,{...n,promptIndex:b},o==null?void 0:o[b]))),c=[],d=[];await Promise.all(l.map(async(y,b)=>{var S,C;if(y.status==="fulfilled"){const v=y.value;return c[b]=v.generations,d[b]=v.llmOutput,(S=o==null?void 0:o[b])==null?void 0:S.handleLLMEnd({generations:[v.generations],llmOutput:v.llmOutput})}else return await((C=o==null?void 0:o[b])==null?void 0:C.handleLLMError(y.reason)),Promise.reject(y.reason)}));const p={generations:c,llmOutput:d.length?(h=this._combineLLMOutput)==null?void 0:h.call(this,...d):void 0};return Object.defineProperty(p,c0,{value:o?{runIds:o==null?void 0:o.map(y=>y.runId)}:void 0,configurable:!0}),p}async generate(e,n,r){let i;Array.isArray(n)?i={stop:n}:i=n;const s=e.map(y=>y.map(ga)),[a,o]=this._separateRunnableConfigFromCallOptions(i);if(a.callbacks=a.callbacks??r,!this.cache)return this._generateUncached(s,o,a);const{cache:l}=this,c=this._getSerializedCacheKeyParametersForCall(o),d=[],p=await Promise.all(s.map(async(y,b)=>{const S=Fn._convertInputToPromptValue(y).toString(),C=await l.lookup(S,c);return C||d.push(b),C}));let h={};if(d.length>0){const y=await this._generateUncached(d.map(b=>s[b]),o,a);await Promise.all(y.generations.map(async(b,S)=>{const C=d[S];p[C]=b;const v=Fn._convertInputToPromptValue(s[C]).toString();return l.update(v,c,b)})),h=y.llmOutput??{}}return{generations:p,llmOutput:h}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(e,n,r){const i=e.map(s=>s.toChatMessages());return this.generate(i,n,r)}async call(e,n,r){return(await this.generate([e.map(ga)],n,r)).generations[0][0].message}async callPrompt(e,n,r){const i=e.toChatMessages();return this.call(i,n,r)}async predictMessages(e,n,r){return this.call(e,n,r)}async predict(e,n,r){const i=new Zr(e),s=await this.call([i],n,r);if(typeof s.content!="string")throw new Error("Cannot use predict when output is not a string.");return s.content}}function Db(t){let e;return t.constructor.name===Gw.name?(e=new Error(t.message),e.name="TimeoutError"):t.constructor.name===Jw.name?(e=new Error(t.message),e.name="AbortError"):e=t,e}function Lb(t){return t.anyOf!==void 0&&Array.isArray(t.anyOf)}function $b(t){const e=["namespace functions {",""];for(const n of t)n.description&&e.push(`// ${n.description}`),Object.keys(n.parameters.properties??{}).length>0?(e.push(`type ${n.name} = (_: {`),e.push(eg(n.parameters,0)),e.push("}) => any;")):e.push(`type ${n.name} = () => any;`),e.push("");return e.push("} // namespace functions"),e.join(`
`)}function eg(t,e){var r;const n=[];for(const[i,s]of Object.entries(t.properties??{}))s.description&&e<2&&n.push(`// ${s.description}`),(r=t.required)!=null&&r.includes(i)?n.push(`${i}: ${vo(s,e)},`):n.push(`${i}?: ${vo(s,e)},`);return n.map(i=>" ".repeat(e)+i).join(`
`)}function vo(t,e){if(Lb(t))return t.anyOf.map(n=>vo(n,e)).join(" | ");switch(t.type){case"string":return t.enum?t.enum.map(n=>`"${n}"`).join(" | "):"string";case"number":return t.enum?t.enum.map(n=>`${n}`).join(" | "):"number";case"integer":return t.enum?t.enum.map(n=>`${n}`).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",eg(t,e+2),"}"].join(`
`);case"array":return t.items?`${vo(t.items,e)}[]`:"any[]";default:return""}}function Mb(t){return t.role!=="system"&&t.role!=="assistant"&&t.role!=="user"&&t.role!=="function"&&t.role!=="tool"&&console.warn(`Unknown message role: ${t.role}`),t.role}function tg(t){const e=t._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":{if(!wd.isInstance(t))throw new Error("Invalid generic chat message");return Mb(t)}default:throw new Error(`Unknown message type: ${e}`)}}function Ub(t){switch(t.role){case"assistant":return new Uo(t.content||"",{function_call:t.function_call,tool_calls:t.tool_calls});default:return new wd(t.content||"",t.role??"unknown")}}function Zb(t,e){const n=t.role??e,r=t.content??"";let i;return t.function_call?i={function_call:t.function_call}:t.tool_calls?i={tool_calls:t.tool_calls}:i={},n==="user"?new cs({content:r}):n==="assistant"?new ds({content:r,additional_kwargs:i}):n==="system"?new fs({content:r}):n==="function"?new hs({content:r,additional_kwargs:i,name:t.name}):n==="tool"?new po({content:r,additional_kwargs:i,tool_call_id:t.tool_call_id}):new ps({content:r,role:n})}function Vh(t){return t.map(e=>({role:tg(e),content:e.content,name:e.name,function_call:e.additional_kwargs.function_call,tool_calls:e.additional_kwargs.tool_calls,tool_call_id:e.tool_call_id}))}class zb extends Fn{static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",azureOpenAIApiKey:"AZURE_OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",azureOpenAIApiVersion:"azure_openai_api_version",azureOpenAIApiKey:"azure_openai_api_key",azureOpenAIApiInstanceName:"azure_openai_api_instance_name",azureOpenAIApiDeploymentName:"azure_openai_api_deployment_name"}}constructor(e,n){var r,i,s,a,o,l,c,d;if(super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=(e==null?void 0:e.openAIApiKey)??Ae("OPENAI_API_KEY"),this.azureOpenAIApiKey=(e==null?void 0:e.azureOpenAIApiKey)??Ae("AZURE_OPENAI_API_KEY"),!this.azureOpenAIApiKey&&!this.openAIApiKey)throw new Error("OpenAI or Azure OpenAI API key not found");if(this.azureOpenAIApiInstanceName=(e==null?void 0:e.azureOpenAIApiInstanceName)??Ae("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=(e==null?void 0:e.azureOpenAIApiDeploymentName)??Ae("AZURE_OPENAI_API_DEPLOYMENT_NAME"),this.azureOpenAIApiVersion=(e==null?void 0:e.azureOpenAIApiVersion)??Ae("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=(e==null?void 0:e.azureOpenAIBasePath)??Ae("AZURE_OPENAI_BASE_PATH"),this.organization=((r=e==null?void 0:e.configuration)==null?void 0:r.organization)??Ae("OPENAI_ORGANIZATION"),this.modelName=(e==null?void 0:e.modelName)??this.modelName,this.modelKwargs=(e==null?void 0:e.modelKwargs)??{},this.timeout=e==null?void 0:e.timeout,this.temperature=(e==null?void 0:e.temperature)??this.temperature,this.topP=(e==null?void 0:e.topP)??this.topP,this.frequencyPenalty=(e==null?void 0:e.frequencyPenalty)??this.frequencyPenalty,this.presencePenalty=(e==null?void 0:e.presencePenalty)??this.presencePenalty,this.maxTokens=e==null?void 0:e.maxTokens,this.n=(e==null?void 0:e.n)??this.n,this.logitBias=e==null?void 0:e.logitBias,this.stop=e==null?void 0:e.stop,this.user=e==null?void 0:e.user,this.streaming=(e==null?void 0:e.streaming)??!1,this.azureOpenAIApiKey){if(!this.azureOpenAIApiInstanceName&&!this.azureOpenAIBasePath)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found");this.openAIApiKey=this.openAIApiKey??""}this.clientConfig={apiKey:this.openAIApiKey,organization:this.organization,baseURL:(n==null?void 0:n.basePath)??((i=e==null?void 0:e.configuration)==null?void 0:i.basePath),dangerouslyAllowBrowser:!0,defaultHeaders:((s=n==null?void 0:n.baseOptions)==null?void 0:s.headers)??((o=(a=e==null?void 0:e.configuration)==null?void 0:a.baseOptions)==null?void 0:o.headers),defaultQuery:((l=n==null?void 0:n.baseOptions)==null?void 0:l.params)??((d=(c=e==null?void 0:e.configuration)==null?void 0:c.baseOptions)==null?void 0:d.params),...n,...e==null?void 0:e.configuration}}invocationParams(e){function n(i){return i!==void 0&&i.every(s=>Array.isArray(s.lc_namespace))}return{model:this.modelName,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,max_tokens:this.maxTokens===-1?void 0:this.maxTokens,n:this.n,logit_bias:this.logitBias,stop:(e==null?void 0:e.stop)??this.stop,user:this.user,stream:this.streaming,functions:e==null?void 0:e.functions,function_call:e==null?void 0:e.function_call,tools:n(e==null?void 0:e.tools)?e==null?void 0:e.tools.map(n1):e==null?void 0:e.tools,tool_choice:e==null?void 0:e.tool_choice,response_format:e==null?void 0:e.response_format,seed:e==null?void 0:e.seed,...this.modelKwargs}}_identifyingParams(){return{model_name:this.modelName,...this.invocationParams(),...this.clientConfig}}async*_streamResponseChunks(e,n,r){var l;const i=Vh(e),s={...this.invocationParams(n),messages:i,stream:!0};let a;const o=await this.completionWithRetry(s,n);for await(const c of o){const d=c==null?void 0:c.choices[0];if(!d)continue;const{delta:p}=d;if(!p)continue;const h=Zb(p,a);a=p.role??a;const y={prompt:n.promptIndex??0,completion:d.index??0};if(typeof h.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}const b=new kd({message:h,text:h.content,generationInfo:y});yield b,r==null||r.handleLLMNewToken(b.text??"",y,void 0,void 0,void 0,{chunk:b})}if((l=n.signal)!=null&&l.aborted)throw new Error("AbortError")}identifyingParams(){return this._identifyingParams()}async _generate(e,n,r){var o,l;const i={},s=this.invocationParams(n),a=Vh(e);if(s.stream){const c=this._streamResponseChunks(e,n,r),d={};for await(const C of c){const v=((o=C.generationInfo)==null?void 0:o.completion)??0;d[v]===void 0?d[v]=C:d[v]=d[v].concat(C)}const p=Object.entries(d).sort(([C],[v])=>parseInt(C,10)-parseInt(v,10)).map(([C,v])=>v),{functions:h,function_call:y}=this.invocationParams(n),b=await this.getEstimatedTokenCountFromPrompt(e,h,y),S=await this.getNumTokensFromGenerations(p);return i.promptTokens=b,i.completionTokens=S,i.totalTokens=b+S,{generations:p,llmOutput:{estimatedTokenUsage:i}}}else{const c=await this.completionWithRetry({...s,stream:!1,messages:a},{signal:n==null?void 0:n.signal,...n==null?void 0:n.options}),{completion_tokens:d,prompt_tokens:p,total_tokens:h}=(c==null?void 0:c.usage)??{};d&&(i.completionTokens=(i.completionTokens??0)+d),p&&(i.promptTokens=(i.promptTokens??0)+p),h&&(i.totalTokens=(i.totalTokens??0)+h);const y=[];for(const b of(c==null?void 0:c.choices)??[]){const C={text:((l=b.message)==null?void 0:l.content)??"",message:Ub(b.message??{role:"assistant"})};b.finish_reason&&(C.generationInfo={finish_reason:b.finish_reason}),y.push(C)}return{generations:y,llmOutput:{tokenUsage:i}}}}async getEstimatedTokenCountFromPrompt(e,n,r){let i=(await this.getNumTokensFromMessages(e)).totalCount;if(n&&r!=="auto"){const s=$b(n);i+=await this.getNumTokens(s),i+=9}return n&&e.find(s=>s._getType()==="system")&&(i-=4),r==="none"?i+=1:typeof r=="object"&&(i+=await this.getNumTokens(r.name)+4),i}async getNumTokensFromGenerations(e){return(await Promise.all(e.map(async r=>{var i;return(i=r.message.additional_kwargs)!=null&&i.function_call?(await this.getNumTokensFromMessages([r.message])).countPerMessage[0]:await this.getNumTokens(r.message.content)}))).reduce((r,i)=>r+i,0)}async getNumTokensFromMessages(e){let n=0,r=0,i=0;this.modelName==="gpt-3.5-turbo-0301"?(r=4,i=-1):(r=3,i=1);const s=await Promise.all(e.map(async a=>{var h,y,b,S,C;const o=await this.getNumTokens(a.content),l=await this.getNumTokens(tg(a)),c=a.name!==void 0?i+await this.getNumTokens(a.name):0;let d=o+r+l+c;const p=a;return p._getType()==="function"&&(d-=2),(h=p.additional_kwargs)!=null&&h.function_call&&(d+=3),(y=p==null?void 0:p.additional_kwargs.function_call)!=null&&y.name&&(d+=await this.getNumTokens((b=p.additional_kwargs.function_call)==null?void 0:b.name)),(S=p.additional_kwargs.function_call)!=null&&S.arguments&&(d+=await this.getNumTokens(JSON.stringify(JSON.parse((C=p.additional_kwargs.function_call)==null?void 0:C.arguments)))),n+=d,d}));return n+=3,{totalCount:n,countPerMessage:s}}async completionWithRetry(e,n){const r=this._getClientOptions(n);return this.caller.call(async()=>{try{return await this.client.chat.completions.create(e,r)}catch(i){throw Db(i)}})}_getClientOptions(e){if(!this.client){const r={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,baseURL:this.clientConfig.baseURL},i=r1(r),s={...this.clientConfig,baseURL:i,timeout:this.timeout,maxRetries:0};s.baseURL||delete s.baseURL,this.client=new _e(s)}const n={...this.clientConfig,...e};return this.azureOpenAIApiKey&&(n.headers={"api-key":this.azureOpenAIApiKey,...n.headers},n.query={"api-version":this.azureOpenAIApiVersion,...n.query}),n}_llmType(){return"openai"}_combineLLMOutput(...e){return e.reduce((n,r)=>(r&&r.tokenUsage&&(n.tokenUsage.completionTokens+=r.tokenUsage.completionTokens??0,n.tokenUsage.promptTokens+=r.tokenUsage.promptTokens??0,n.tokenUsage.totalTokens+=r.tokenUsage.totalTokens??0),n),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}}const Hh={GetChatbotResponse:async(t,e,n)=>{const r=n,i=new zb({temperature:.9,openAIApiKey:r});if(t=="")return"Hello! I'm here to help you with your financial goals. May I know your name and age, please?";var s=[...e,new Zr(t)];return console.log(s),(await i.call(s)).content}};function Fb(){return Z.jsx("div",{className:"header",children:" React Chatbot UI"})}function Bb({context:t,chatHistory:e,setChatHistory:n,apiKey:r}){const[i,s]=ke.useState([]),[a,o]=ke.useState("");function l(d,p){s(d),n([...e,new Zr(p),new Uo(a)])}ke.useEffect(()=>{async function d(){s([Z.jsx(Xf,{fetchMessage:async()=>await Hh.GetChatbotResponse("",e,r),setBotMessage:o},"0")])}d()},[]);const c=async d=>{const p=i.concat(Z.jsx(gw,{text:d},i.length+1),Z.jsx(Xf,{fetchMessage:async()=>await Hh.GetChatbotResponse(d,e,r),setBotMessage:o},i.length+2));l(p,d)};return Z.jsxs("div",{className:"chatbot",children:[Z.jsx(Fb,{}),Z.jsx(vw,{messages:i}),Z.jsx(_w,{onSend:c})]})}function Vb(){const[t,e]=ke.useState(0),[n,r]=ke.useState(""),[i,s]=ke.useState(""),[a,o]=ke.useState("");if(t<6)return Z.jsx("div",{className:"full-card",children:Z.jsx(yw,{questionNumber:t,questionSetCount:e,QA:n,setQA:r,setApiKey:o})});var l="Questions and Answers: "+n+` 
Prompt: 
    You are a chatbot designed to ask questions to build a financial profile of a potential investor.     You're goal is to understand the potential clients name, age, networth, income, details of potential loans,     future financial goals, risk tolerance, and typical expenses this person may have. If they have a question answer briefly, but your goal     is to collect information for a human financial advisor to review at a later time.     Additionally the human has already answered questions previously. You can use the answers from     the question and answers provided. Do not ask questions from the question and answer portion.     Be friendly, try not to sound robotic, and let the conversation flow naturally.     After about six messages from the human, say goodbye and give a summary of the conversation.
    `,c="Hello! I'm here to help you with your financial goals. May I know your name and age, please?";return l=[new Iy(l),new Uo(c)],i.length==0&&s(l),console.log(a),Z.jsx(Bb,{context:l,chatHistory:i,setChatHistory:s,apiKey:a})}Gl.createRoot(document.getElementById("root")).render(Z.jsx(ev.StrictMode,{children:Z.jsx(Vb,{})}));
